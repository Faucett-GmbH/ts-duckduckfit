import{V as vr,N as Sn,aT as si,T as Ct,L as Q,ar as ii,M as on,H as te,a4 as Xa,P as Za,Q as Qa,R as Kr,U as Xe,a0 as Ve,ao as ec,au as tc,W as dt,Z as nc,aU as xn,aV as vn,X as rc,aJ as Jr,aE as sc,af as Yr,ay as oi,m as ai,_ as Ar,$ as ci,aW as ic,aX as Un,q as oc,aY as gt,aZ as ac,aq as cc,a_ as uc,ax as fc,a$ as lc,a8 as ui,b0 as hc,O as dc,b1 as gc,aA as _c,e as fi,aj as pc,b2 as yc,b3 as bc,b4 as mc,b5 as wc,b6 as Sc,Y as xc,b7 as vc,b8 as Ac,b9 as Ec,ba as Ic,bb as Cc,bc as kc,aF as An,a5 as En,a6 as Je,bd as Tc,h as Oc,aG as Er,p as Hc,aS as Dc,u as Xr,I as mt,d as Rc,s as Mc,g as Uc,b as Zr,c as Bc,aC as jc,a as Lc,be as $c}from"./DKyuKv9V.js";import{g as ke,b as Pc,c as Fc,l as Qr,p as st}from"./BkpU17rM.js";import"./DsnmJJEf.js";import{i as zc}from"./Dt8rrK3f.js";import{i as Vc,c as es,f as Nc,g as Wc,d as qc,n as Gc,j as Kc}from"./Bvir9z7y.js";const Jc=!0;let ht=null;function ts(t){ht=t}function Yc(t,e){return e}function Xc(t,e,n){for(var r=t.items,s=[],i=e.length,o=0;o<i;o++)uc(e[o].e,s,!0);var a=i>0&&s.length===0&&n!==null;if(a){var c=n.parentNode;fc(c),c.append(n),r.clear(),He(t,e[0].prev,e[i-1].next)}lc(s,()=>{for(var f=0;f<i;f++){var g=e[f];a||(r.delete(g.k),He(t,g.prev,g.next)),gt(g.e,!a)}})}function Zc(t,e,n,r,s,i=null){var o=t,a={flags:e,items:new Map,first:null},c=(e&si)!==0;if(c){var f=t;o=Q?Ct(ii(f)):f.appendChild(vr())}Q&&on();var g=null,l=!1,u=new Map,d=Xa(()=>{var E=n();return ai(E)?E:E==null?[]:oi(E)}),h,y;function b(){Qc(y,h,a,u,o,s,e,r,n),i!==null&&(h.length===0?g?Ar(g):g=dt(()=>i(o)):g!==null&&ci(g,()=>{g=null}))}Sn(()=>{y??=ui,h=te(d);var E=h.length;if(l&&E===0)return;l=E===0;let R=!1;if(Q){var w=Za(o)===Qa;w!==(E===0)&&(o=Kr(),Ct(o),Xe(!1),R=!0)}if(Q){for(var $=null,I,v=0;v<E;v++){if(Ve.nodeType===ec&&Ve.data===tc){o=Ve,R=!0,Xe(!1);break}var M=h[v],P=r(M,v);I=rr(Ve,a,$,null,M,P,v,s,e,n),a.items.set(P,I),$=I}E>0&&Ct(Kr())}if(Q)E===0&&i&&(g=dt(()=>i(o)));else if(nc()){var T=new Set,H=rc;for(v=0;v<E;v+=1){M=h[v],P=r(M,v);var F=a.items.get(P)??u.get(P);F?(e&(xn|vn))!==0&&li(F,M,v,e):(I=rr(null,a,null,null,M,P,v,s,e,n,!0),u.set(P,I)),T.add(P)}for(const[W,_]of a.items)T.has(W)||H.skipped_effects.add(_.e);H.add_callback(b)}else b();R&&Xe(!0),te(d)}),Q&&(o=Ve)}function Qc(t,e,n,r,s,i,o,a,c){var f=(o&ac)!==0,g=(o&(xn|vn))!==0,l=e.length,u=n.items,d=n.first,h=d,y,b=null,E,R=[],w=[],$,I,v,M;if(f)for(M=0;M<l;M+=1)$=e[M],I=a($,M),v=u.get(I),v!==void 0&&(v.a?.measure(),(E??=new Set).add(v));for(M=0;M<l;M+=1){if($=e[M],I=a($,M),v=u.get(I),v===void 0){var P=r.get(I);if(P!==void 0){r.delete(I),u.set(I,P);var T=b?b.next:h;He(n,b,P),He(n,P,T),Bn(P,T,s),b=P}else{var H=h?h.e.nodes_start:s;b=rr(H,n,b,b===null?n.first:b.next,$,I,M,i,o,c)}u.set(I,b),R=[],w=[],h=b.next;continue}if(g&&li(v,$,M,o),(v.e.f&Un)!==0&&(Ar(v.e),f&&(v.a?.unfix(),(E??=new Set).delete(v))),v!==h){if(y!==void 0&&y.has(v)){if(R.length<w.length){var F=w[0],W;b=F.prev;var _=R[0],U=R[R.length-1];for(W=0;W<R.length;W+=1)Bn(R[W],F,s);for(W=0;W<w.length;W+=1)y.delete(w[W]);He(n,_.prev,U.next),He(n,b,_),He(n,U,F),h=F,b=U,M-=1,R=[],w=[]}else y.delete(v),Bn(v,h,s),He(n,v.prev,v.next),He(n,v,b===null?n.first:b.next),He(n,b,v),b=v;continue}for(R=[],w=[];h!==null&&h.k!==I;)(h.e.f&Un)===0&&(y??=new Set).add(h),w.push(h),h=h.next;if(h===null)continue;v=h}R.push(v),b=v,h=v.next}if(h!==null||y!==void 0){for(var A=y===void 0?[]:oi(y);h!==null;)(h.e.f&Un)===0&&A.push(h),h=h.next;var O=A.length;if(O>0){var k=(o&si)!==0&&l===0?s:null;if(f){for(M=0;M<O;M+=1)A[M].a?.measure();for(M=0;M<O;M+=1)A[M].a?.fix()}Xc(n,A,k)}}f&&oc(()=>{if(E!==void 0)for(v of E)v.a?.apply()}),t.first=n.first&&n.first.e,t.last=b&&b.e;for(var N of r.values())gt(N.e);r.clear()}function li(t,e,n,r){(r&xn)!==0&&Jr(t.v,e),(r&vn)!==0?Jr(t.i,n):t.i=n}function rr(t,e,n,r,s,i,o,a,c,f,g){var l=ht,u=(c&xn)!==0,d=(c&ic)===0,h=u?d?sc(s,!1,!1):Yr(s):s,y=(c&vn)===0?o:Yr(o),b={i:y,v:h,k:i,a:null,e:null,prev:n,next:r};ht=b;try{if(t===null){var E=document.createDocumentFragment();E.append(t=vr())}return b.e=dt(()=>a(t,h,y,f),Q),b.e.prev=n&&n.e,b.e.next=r&&r.e,n===null?g||(e.first=b):(n.next=b,n.e.next=b.e),r!==null&&(r.prev=b,r.e.prev=b.e),b}finally{ht=l}}function Bn(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==r;){var o=cc(i);s.before(i),i=o}}function He(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function eu(t,e,n,r,s){Q&&on();var i=e.$$slots?.[n],o=!1;i===!0&&(i=e.children,o=!0),i===void 0||i(t,o?()=>r:r)}function tu(t,e,n,r,s,i){let o=Q;Q&&on();var a,c,f=null;Q&&Ve.nodeType===hc&&(f=Ve,on());var g=Q?Ve:t,l,u=ht;Sn(()=>{const d=e()||null;var h=gc;if(d!==a){var y=ht;ts(u),l&&(d===null?ci(l,()=>{l=null,c=null}):d===c?Ar(l):(gt(l),es(!1))),d&&d!==c&&(l=dt(()=>{if(f=Q?f:document.createElementNS(h,d),_c(f,f),r){Q&&Vc(d)&&f.append(document.createComment(""));var b=Q?ii(f):f.appendChild(vr());Q&&(b===null?Xe(!1):Ct(b)),r(f,b)}ui.nodes_end=f,g.before(f)})),a=d,a&&(c=a),es(!0),ts(y)}},dc),o&&(Xe(!0),Ct(g))}function nu(t,e){var n=void 0,r;Sn(()=>{n!==(n=e())&&(r&&(gt(r),r=null),n&&(r=dt(()=>{fi(()=>n(t))})))})}function hi(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=hi(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ru(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=hi(t))&&(r&&(r+=" "),r+=e);return r}function su(t){return typeof t=="object"?ru(t):t??""}const ns=[...` 	
\r\fÂ \v\uFEFF`];function iu(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,o=0;(o=r.indexOf(s,o))>=0;){var a=o+i;(o===0||ns.includes(r[o-1]))&&(a===r.length||ns.includes(r[a]))?r=(o===0?"":r.substring(0,o))+r.substring(a+1):o=a}}return r===""?null:r}function rs(t,e=!1){var n=e?" !important;":";",r="";for(var s in t){var i=t[s];i!=null&&i!==""&&(r+=" "+s+": "+i+n)}return r}function jn(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function ou(t,e){if(e){var n="",r,s;if(Array.isArray(e)?(r=e[0],s=e[1]):r=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,a=!1,c=[];r&&c.push(...Object.keys(r).map(jn)),s&&c.push(...Object.keys(s).map(jn));var f=0,g=-1;const y=t.length;for(var l=0;l<y;l++){var u=t[l];if(a?u==="/"&&t[l-1]==="*"&&(a=!1):i?i===u&&(i=!1):u==="/"&&t[l+1]==="*"?a=!0:u==='"'||u==="'"?i=u:u==="("?o++:u===")"&&o--,!a&&i===!1&&o===0){if(u===":"&&g===-1)g=l;else if(u===";"||l===y-1){if(g!==-1){var d=jn(t.substring(f,g).trim());if(!c.includes(d)){u!==";"&&l++;var h=t.substring(f,l).trim();n+=" "+h+";"}}f=l+1,g=-1}}}}return r&&(n+=rs(r)),s&&(n+=rs(s,!0)),n=n.trim(),n===""?null:n}return t==null?null:String(t)}function au(t,e,n,r,s,i){var o=t.__className;if(Q||o!==n||o===void 0){var a=iu(n,r,i);(!Q||a!==t.getAttribute("class"))&&(a==null?t.removeAttribute("class"):e?t.className=a:t.setAttribute("class",a)),t.__className=n}else if(i&&s!==i)for(var c in i){var f=!!i[c];(s==null||f!==!!s[c])&&t.classList.toggle(c,f)}return i}function Ln(t,e={},n,r){for(var s in n){var i=n[s];e[s]!==i&&(n[s]==null?t.style.removeProperty(s):t.style.setProperty(s,i,r))}}function cu(t,e,n,r){var s=t.__style;if(Q||s!==e){var i=ou(e,r);(!Q||i!==t.getAttribute("style"))&&(i==null?t.removeAttribute("style"):t.style.cssText=i),t.__style=e}else r&&(Array.isArray(r)?(Ln(t,n?.[0],r[0]),Ln(t,n?.[1],r[1],"important")):Ln(t,n,r));return r}function sr(t,e,n=!1){if(t.multiple){if(e==null)return;if(!ai(e))return yc();for(var r of t.options)r.selected=e.includes(ss(r));return}for(r of t.options){var s=ss(r);if(bc(s,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function uu(t){var e=new MutationObserver(()=>{sr(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),pc(()=>{e.disconnect()})}function ss(t){return"__value"in t?t.__value:t.value}const wt=Symbol("class"),St=Symbol("style"),di=Symbol("is custom element"),gi=Symbol("is html");function fg(t){if(Q){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;an(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var s=t.checked;an(t,"checked",null),t.checked=s}}};t.__on_r=n,Ic(n),Cc()}}function fu(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function an(t,e,n,r){var s=_i(t);Q&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=n)&&(e==="loading"&&(t[Ec]=n),n==null?t.removeAttribute(e):typeof n!="string"&&pi(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function lu(t,e,n,r,s=!1){var i=_i(t),o=i[di],a=!i[gi];let c=Q&&o;c&&Xe(!1);var f=e||{},g=t.tagName==="OPTION";for(var l in e)l in n||(n[l]=null);n.class?n.class=su(n.class):n[wt]&&(n.class=null),n[St]&&(n.style??=null);var u=pi(t);for(const w in n){let $=n[w];if(g&&w==="value"&&$==null){t.value=t.__value="",f[w]=$;continue}if(w==="class"){var d=t.namespaceURI==="http://www.w3.org/1999/xhtml";au(t,d,$,r,e?.[wt],n[wt]),f[w]=$,f[wt]=n[wt];continue}if(w==="style"){cu(t,$,e?.[St],n[St]),f[w]=$,f[St]=n[St];continue}var h=f[w];if(!($===h&&!($===void 0&&t.hasAttribute(w)))){f[w]=$;var y=w[0]+w[1];if(y!=="$$")if(y==="on"){const I={},v="$$"+w;let M=w.slice(2);var b=Kc(M);if(Nc(M)&&(M=M.slice(0,-7),I.capture=!0),!b&&h){if($!=null)continue;t.removeEventListener(M,f[v],I),f[v]=null}if($!=null)if(b)t[`__${M}`]=$,qc([M]);else{let P=function(T){f[w].call(this,T)};f[v]=Wc(M,t,P,I)}else b&&(t[`__${M}`]=void 0)}else if(w==="style")an(t,w,$);else if(w==="autofocus")Sc(t,!!$);else if(!o&&(w==="__value"||w==="value"&&$!=null))t.value=t.__value=$;else if(w==="selected"&&g)fu(t,$);else{var E=w;a||(E=Gc(E));var R=E==="defaultValue"||E==="defaultChecked";if($==null&&!o&&!R)if(i[w]=null,E==="value"||E==="checked"){let I=t;const v=e===void 0;if(E==="value"){let M=I.defaultValue;I.removeAttribute(E),I.defaultValue=M,I.value=I.__value=v?M:null}else{let M=I.defaultChecked;I.removeAttribute(E),I.defaultChecked=M,I.checked=v?M:!1}}else t.removeAttribute(w);else R||u.includes(E)&&(o||typeof $!="string")?(t[E]=$,E in i&&(i[E]=xc)):typeof $!="function"&&an(t,E,$)}}}return c&&Xe(!0),f}function is(t,e,n=[],r=[],s,i=!1){mc(n,r,o=>{var a=void 0,c={},f=t.nodeName==="SELECT",g=!1;if(Sn(()=>{var u=e(...o.map(te)),d=lu(t,a,u,s,i);g&&f&&"value"in u&&sr(t,u.value);for(let y of Object.getOwnPropertySymbols(c))u[y]||gt(c[y]);for(let y of Object.getOwnPropertySymbols(u)){var h=u[y];y.description===wc&&(!a||h!==a[y])&&(c[y]&&gt(c[y]),c[y]=dt(()=>nu(t,()=>h))),d[y]=h}a=d}),f){var l=t;fi(()=>{sr(l,a.value,!0),uu(l)})}g=!0})}function _i(t){return t.__attributes??={[di]:t.nodeName.includes("-"),[gi]:t.namespaceURI===vc}}var os=new Map;function pi(t){var e=os.get(t.nodeName);if(e)return e;os.set(t.nodeName,e=[]);for(var n,r=t,s=Element.prototype;s!==r;){n=kc(r);for(var i in n)n[i].set&&e.push(i);r=Ac(r)}return e}const hu=Jc;function du(t,e,n={}){const{storage:r="local",serializer:s=JSON,syncTabs:i=!0,onWriteError:o=console.error,onParseError:a=console.error,beforeRead:c=h=>h,beforeWrite:f=h=>h}=n,g=r==="local"?localStorage:sessionStorage;let l;try{const h=g?.getItem(t);l=h?c(s.parse(h)):e}catch(h){a(h),l=e}let u=An(En(l));function d(h){try{const y=f(h);g?.setItem(t,s.stringify(y))}catch(y){o(y)}}return i&&hu&&r==="local"&&window.addEventListener("storage",h=>{if(h.key===t&&h.storageArea===localStorage)try{const y=h.newValue?s.parse(h.newValue):e;Je(u,c(y),!0)}catch(y){a(y)}}),Tc(()=>(Oc(()=>{d(te(u))}),()=>{})),{get value(){return te(u)},set value(h){Je(u,h,!0)},update(h){Je(u,h(te(u)),!0)},reset(){Je(u,e,!0)}}}const In=Symbol.for("_am_meta"),Tt=Symbol.for("_am_trace"),Ot=Symbol.for("_am_objectId"),Ir=Symbol.for("_am_isProxy"),yi=Symbol.for("_am_clearCache"),gu=Symbol.for("_am_uint"),_u=Symbol.for("_am_int"),pu=Symbol.for("_am_f64"),bi=Symbol.for("_am_counter"),mi=Symbol.for("_am_immutableString");class ir{constructor(e){this.value=e||0,Reflect.defineProperty(this,bi,{value:!0})}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}increment(e){throw new Error("Counters should not be incremented outside of a change callback")}decrement(e){throw new Error("Counters should not be decremented outside of a change callback")}}class yu extends ir{constructor(e,n,r,s,i){super(e),this.context=n,this.path=r,this.objectId=s,this.key=i}increment(e){return e=typeof e=="number"?e:1,this.context.increment(this.objectId,this.key,e),this.value+=e,this.value}decrement(e){return this.increment(typeof e=="number"?-e:-1)}}function bu(t,e,n,r,s){return new yu(t,e,n,r,s)}var wi;class Si{constructor(e){this[wi]=!0,this.val=e}toString(){return this.val}toJSON(){return this.val}}wi=mi;function Le(t){if(typeof t=="string"&&/^[0-9]+$/.test(t)&&(t=parseInt(t,10)),typeof t!="number")return t;if(t<0||isNaN(t)||t===1/0||t===-1/0)throw new RangeError("A list index must be positive, but you passed "+t);return t}function pe(t,e){const{context:n,objectId:r,path:s}=t,i=n.getWithType(r,e);if(i===null)return;const o=i[0],a=i[1];switch(o){case void 0:return;case"map":return Lt(n,a,[...s,e]);case"list":return kn(n,a,[...s,e]);case"text":return n.text(a);case"str":return new Si(a);case"uint":return a;case"int":return a;case"f64":return a;case"boolean":return a;case"null":return null;case"bytes":return a;case"timestamp":return a;case"counter":return bu(a,n,s,r,e);default:throw RangeError(`datatype ${o} unimplemented`)}}function cn(t,e,n){const r=typeof t;switch(r){case"object":if(t==null)return[null,"null"];if(t[gu])return[t.value,"uint"];if(t[_u])return[t.value,"int"];if(t[pu])return[t.value,"f64"];if(t[bi])return[t.value,"counter"];if(t instanceof Date)return[t.getTime(),"timestamp"];if(xi(t))return[t.toString(),"str"];if(t instanceof Uint8Array)return[t,"bytes"];if(t instanceof Array)return[t,"list"];if(Object.prototype.toString.call(t)==="[object Object]")return[t,"map"];throw Cn(t,n)?new RangeError("Cannot create a reference to an existing document object"):new RangeError(`Cannot assign unknown object: ${t}`);case"boolean":return[t,"boolean"];case"number":return Number.isInteger(t)?[t,"int"]:[t,"f64"];case"string":return[t,"text"];case"undefined":throw new RangeError([`Cannot assign undefined value at ${as(e)}, `,"because `undefined` is not a valid JSON data type. ","You might consider setting the property's value to `null`, ","or using `delete` to remove it altogether."].join(""));default:throw new RangeError([`Cannot assign ${r} value at ${as(e)}. `,"All JSON primitive datatypes (object, array, string, number, boolean, null) ",`are supported in an Automerge document; ${r} values are not. `].join(""))}}function Cn(t,e){var n,r;return t instanceof Date?!1:!!(t&&((r=(n=t[In])===null||n===void 0?void 0:n.handle)===null||r===void 0?void 0:r.__wbg_ptr)===e.__wbg_ptr)}const mu={get(t,e){const{context:n,objectId:r,cache:s}=t;return e===Symbol.toStringTag?t[Symbol.toStringTag]:e===Ot?r:e===Ir?!0:e===Tt?t.trace:e===In?{handle:n}:(s[e]||(s[e]=pe(t,e)),s[e])},set(t,e,n){const{context:r,objectId:s,path:i}=t;if(t.cache={},Cn(n,r))throw new RangeError("Cannot create a reference to an existing document object");if(e===Tt)return t.trace=n,!0;if(e===yi)return!0;const[o,a]=cn(n,[...i,e],r);switch(a){case"list":{const c=r.putObject(s,e,[]),f=kn(r,c,[...i,e]);for(let g=0;g<o.length;g++)f[g]=o[g];break}case"text":{r.putObject(s,e,o);break}case"map":{const c=r.putObject(s,e,{}),f=Lt(r,c,[...i,e]);for(const g in o)f[g]=o[g];break}default:r.put(s,e,o,a)}return!0},deleteProperty(t,e){const{context:n,objectId:r}=t;return t.cache={},n.delete(r,e),!0},has(t,e){return this.get(t,e)!==void 0},getOwnPropertyDescriptor(t,e){const n=this.get(t,e);if(typeof n<"u")return{configurable:!0,enumerable:!0,value:n}},ownKeys(t){const{context:e,objectId:n}=t,r=e.keys(n);return[...new Set(r)]}},wu={get(t,e){const{context:n,objectId:r}=t;return e=Le(e),e===Symbol.hasInstance?s=>Array.isArray(s):e===Symbol.toStringTag?t[Symbol.toStringTag]:e===Ot?r:e===Ir?!0:e===Tt?t.trace:e===In?{handle:n}:e==="length"?n.length(r):typeof e=="number"?pe(t,e):xu(t)[e]},set(t,e,n){const{context:r,objectId:s,path:i}=t;if(e=Le(e),Cn(n,r))throw new RangeError("Cannot create a reference to an existing document object");if(e===yi)return!0;if(e===Tt)return t.trace=n,!0;if(typeof e=="string")throw new RangeError("list index must be a number");const[o,a]=cn(n,[...i,e],r);switch(a){case"list":{let c;e>=r.length(s)?c=r.insertObject(s,e,[]):c=r.putObject(s,e,[]),kn(r,c,[...i,e]).splice(0,0,...o);break}case"text":{e>=r.length(s)?r.insertObject(s,e,o):r.putObject(s,e,o);break}case"map":{let c;e>=r.length(s)?c=r.insertObject(s,e,{}):c=r.putObject(s,e,{});const f=Lt(r,c,[...i,e]);for(const g in o)f[g]=o[g];break}default:e>=r.length(s)?r.insert(s,e,o,a):r.put(s,e,o,a)}return!0},deleteProperty(t,e){const{context:n,objectId:r}=t;e=Le(e);const s=n.get(r,e);if(s!=null&&s[0]=="counter")throw new TypeError("Unsupported operation: deleting a counter from a list");return n.delete(r,e),!0},has(t,e){const{context:n,objectId:r}=t;return e=Le(e),typeof e=="number"?e<n.length(r):e==="length"},getOwnPropertyDescriptor(t,e){const{context:n,objectId:r}=t;return e==="length"?{writable:!0,value:n.length(r)}:e===Ot?{configurable:!1,enumerable:!1,value:r}:(e=Le(e),{configurable:!0,enumerable:!0,value:pe(t,e)})},getPrototypeOf(t){return Object.getPrototypeOf(t)},ownKeys(){const t=[];return t.push("length"),t}};function Lt(t,e,n){const r={context:t,objectId:e,path:n||[],cache:{}},s={};return Object.assign(s,r),new Proxy(s,mu)}function kn(t,e,n){const r={context:t,objectId:e,path:n||[],cache:{}},s=[];return Object.assign(s,r),new Proxy(s,wu)}function Su(t){return Lt(t,"_root",[])}function xu(t){const{context:e,objectId:n,path:r}=t;return{at(i){return pe(t,i)},deleteAt(i,o){return typeof o=="number"?e.splice(n,i,o):e.delete(n,i),this},fill(i,o,a){const[c,f]=cn(i,[...r,o],e),g=e.length(n);o=Le(o||0),a=Le(a||g);for(let l=o;l<Math.min(a,g);l++)f==="list"||f==="map"||f==="text"?e.putObject(n,l,c):e.put(n,l,c,f);return this},indexOf(i,o=0){const a=e.length(n);for(let c=o;c<a;c++){const f=e.getWithType(n,c);if(!f)continue;const[g,l]=f;if(!["map","list","text"].includes(g)){if(l===i)return c;continue}if(g==="text"&&typeof i=="string"&&i===pe(t,c)||i[Ot]===l)return c}return-1},insertAt(i,...o){return this.splice(i,0,...o),this},pop(){const i=e.length(n);if(i==0)return;const o=pe(t,i-1);return e.delete(n,i-1),o},push(...i){const o=e.length(n);return this.splice(o,0,...i),e.length(n)},shift(){if(e.length(n)==0)return;const i=pe(t,0);return e.delete(n,0),i},splice(i,o,...a){i=Le(i),typeof o!="number"&&(o=e.length(n)-i),o=Le(o);for(const g of a)if(Cn(g,e))throw new RangeError("Cannot create a reference to an existing document object");const c=[];for(let g=0;g<o;g++){const l=pe(t,i);l!==void 0&&c.push(l),e.delete(n,i)}const f=a.map((g,l)=>{try{return cn(g,[...r],e)}catch(u){throw u instanceof RangeError?new RangeError(`${u.message} (at index ${l} in the input)`):u}});for(const[g,l]of f){switch(l){case"list":{const u=e.insertObject(n,i,[]);kn(e,u,[...r,i]).splice(0,0,...g);break}case"text":{e.insertObject(n,i,g);break}case"map":{const u=e.insertObject(n,i,{}),d=Lt(e,u,[...r,i]);for(const h in g)d[h]=g[h];break}default:e.insert(n,i,g,l)}i+=1}return c},unshift(...i){return this.splice(0,0,...i),e.length(n)},entries(){let i=0;return{next:()=>{const a=pe(t,i);return a===void 0?{value:void 0,done:!0}:{value:[i++,a],done:!1}},[Symbol.iterator](){return this}}},keys(){let i=0;const o=e.length(n);return{next:()=>i<o?{value:i++,done:!1}:{value:void 0,done:!0},[Symbol.iterator](){return this}}},values(){let i=0;return{next:()=>{const a=pe(t,i++);return a===void 0?{value:void 0,done:!0}:{value:a,done:!1}},[Symbol.iterator](){return this}}},toArray(){const i=[];let o;do o=pe(t,i.length),o!==void 0&&i.push(o);while(o!==void 0);return i},map(i){return this.toArray().map(i)},toString(){return this.toArray().toString()},toLocaleString(){return this.toArray().toLocaleString()},forEach(i){return this.toArray().forEach(i)},concat(i){return this.toArray().concat(i)},every(i){return this.toArray().every(i)},filter(i){return this.toArray().filter(i)},find(i){let o=0;for(const a of this){if(i(a,o))return a;o+=1}},findIndex(i){let o=0;for(const a of this){if(i(a,o))return o;o+=1}return-1},includes(i){return this.find(o=>o===i)!==void 0},join(i){return this.toArray().join(i)},reduce(i,o){return this.toArray().reduce(i,o)},reduceRight(i,o){return this.toArray().reduceRight(i,o)},lastIndexOf(i,o=1/0){return this.toArray().lastIndexOf(i,o)},slice(i,o){return this.toArray().slice(i,o)},some(i){let o=0;for(const a of this){if(i(a,o))return!0;o+=1}return!1},[Symbol.iterator]:function*(){let i=0,o=pe(t,i);for(;o!==void 0;)yield o,i+=1,o=pe(t,i)}}}function as(t){const e=t.map(n=>{if(typeof n=="number")return n.toString();if(typeof n=="string")return n.replace(/~/g,"~0").replace(/\//g,"~1")});return t.length===0?"":"/"+e.join("/")}function xi(t){return typeof t=="object"&&t!==null&&Object.prototype.hasOwnProperty.call(t,mi)}let vi;const $n=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};$n.encodeInto;const vu=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&vu.decode();typeof FinalizationRegistry>"u"||new FinalizationRegistry(t=>vi.__wbg_automerge_free(t>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(t=>vi.__wbg_syncstate_free(t>>>0,1));let Au=[];function Eu(t){for(const e in t)ge[e]=t[e];for(const e of Au)e()}const ge={create(t){throw new RangeError("Automerge.use() not called")},load(t,e){throw new RangeError("Automerge.use() not called (load)")},encodeChange(t){throw new RangeError("Automerge.use() not called (encodeChange)")},decodeChange(t){throw new RangeError("Automerge.use() not called (decodeChange)")},initSyncState(){throw new RangeError("Automerge.use() not called (initSyncState)")},encodeSyncMessage(t){throw new RangeError("Automerge.use() not called (encodeSyncMessage)")},decodeSyncMessage(t){throw new RangeError("Automerge.use() not called (decodeSyncMessage)")},encodeSyncState(t){throw new RangeError("Automerge.use() not called (encodeSyncState)")},decodeSyncState(t){throw new RangeError("Automerge.use() not called (decodeSyncState)")},exportSyncState(t){throw new RangeError("Automerge.use() not called (exportSyncState)")},importSyncState(t){throw new RangeError("Automerge.use() not called (importSyncState)")}};function ie(t,e=!0){if(typeof t!="object")throw new RangeError("must be the document root");const n=Reflect.get(t,In);if(n===void 0||n==null||e&&Iu(t)!=="_root")throw new RangeError("must be the document root");return n}function Ai(t){return Reflect.get(t,Tt)}function Iu(t){return typeof t!="object"||t===null?null:Reflect.get(t,Ot)}function Tn(t){return!!Reflect.get(t,Ir)}var Cu=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};function Cr(t){return typeof t=="object"?t:{actor:t}}function Ce(t){const e=Cr(t),n=!!e.freeze,r=e.patchCallback,s=e.actor,i=ge.create({actor:s});return i.enableFreeze(!!e.freeze),Ti(i),i.materialize("/",void 0,{handle:i,heads:void 0,freeze:n,patchCallback:r})}function ku(t,e){const n=ie(t),r=n.handle;return n.handle.materialize("/",e,Object.assign(Object.assign({},n),{handle:r,heads:e}))}function un(t,e){const n=ie(t),r=n.heads,s=Cr(e),i=n.handle.fork(s.actor,r);i.updateDiffCursor();const{heads:o}=n,a=Cu(n,["heads"]);return a.patchCallback=s.patchCallback,i.applyPatches(t,Object.assign(Object.assign({},a),{handle:i}))}function Tu(t,e){return Ht(Ce(e),"from",{},n=>Object.assign(n,t)).newDoc}function Ou(t,e,n){if(typeof e=="function")return Ht(t,"change",{},e).newDoc;if(typeof n=="function")return typeof e=="string"&&(e={message:e}),Ht(t,"change",e,n).newDoc;throw RangeError("Invalid args for change")}function Hu(t,e,n,r){if(typeof n=="function")return Ht(t,"changeAt",{},n,e);if(typeof r=="function")return typeof n=="string"&&(n={message:n}),Ht(t,"changeAt",n,r,e);throw RangeError("Invalid args for changeAt")}function $t(t,e,n,r){if(n==null)return t;const s=ie(t),i=Object.assign(Object.assign({},s),{heads:void 0}),{value:o,patches:a}=s.handle.applyAndReturnPatches(t,i);if(a.length>0){r?.(a,{before:t,after:o,source:e});const c=ie(o);c.mostRecentPatch={before:ie(t).heads,after:c.handle.getHeads(),patches:a}}return s.heads=n,o}function Ht(t,e,n,r,s){if(typeof r!="function")throw new RangeError("invalid change function");const i=ie(t);if(t===void 0||i===void 0)throw new RangeError("must be the document root");if(i.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Tn(t))throw new RangeError("Calls to Automerge.change cannot be nested");let o=i.handle.getHeads();s&&Mu(s,o)&&(s=void 0),s&&(i.handle.isolate(s),o=s),"time"in n||(n.time=Math.floor(Date.now()/1e3));try{i.heads=o;const a=Su(i.handle);if(r(a),i.handle.pendingOps()===0)return i.heads=void 0,s&&i.handle.integrate(),{newDoc:t,newHeads:null};{const c=i.handle.commit(n.message,n.time);return i.handle.integrate(),{newDoc:$t(t,e,o,n.patchCallback||i.patchCallback),newHeads:c!=null?[c]:null}}}catch(a){throw i.heads=void 0,i.handle.rollback(),a}}function Du(t,e){e===void 0&&(e={}),typeof e=="string"&&(e={message:e}),"time"in e||(e.time=Math.floor(Date.now()/1e3));const n=ie(t);if(n.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Tn(t))throw new RangeError("Calls to Automerge.change cannot be nested");const r=n.handle.getHeads();return n.handle.emptyChange(e.message,e.time),$t(t,"emptyChange",r)}function Ru(t,e){const n=Cr(e);if(n.patchCallback)return Ei(Ce(n),t);const r=n.actor,s=n.patchCallback,i=n.unchecked||!1,o=n.allowMissingChanges||!1,a=n.convertImmutableStringsToText||!1,c=ge.load(t,{actor:r,unchecked:i,allowMissingDeps:o,convertImmutableStringsToText:a});return c.enableFreeze(!!n.freeze),Ti(c),c.materialize("/",void 0,{handle:c,heads:void 0,patchCallback:s})}function Ei(t,e,n){n||(n={});const r=ie(t);if(r.heads)throw new RangeError("Attempting to change an out of date document - set at: "+Ai(t));if(Tn(t))throw new RangeError("Calls to Automerge.change cannot be nested");const s=r.handle.getHeads();return r.handle.loadIncremental(e),$t(t,"loadIncremental",s,n.patchCallback||r.patchCallback)}function Ii(t){return ie(t).handle.save()}function cs(t,e){const n=ie(t);if(n.heads)throw new RangeError("Attempting to change an out of date document - set at: "+Ai(t));const r=n.handle.getHeads(),s=ie(e),i=n.handle.getChangesAdded(s.handle);return n.handle.applyChanges(i),$t(t,"merge",r,n.patchCallback)}function Pn(t,e,n){us(e,"before"),us(n,"after");const r=ie(t);return r.mostRecentPatch&&or(r.mostRecentPatch.before,e)&&or(r.mostRecentPatch.after,n)?r.mostRecentPatch.patches:r.handle.diff(e,n)}function Mu(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function us(t,e){if(!Array.isArray(t))throw new Error(`${e} must be an array`)}function or(t,e){if(!fs(t)||!fs(e))return t===e;const n=Object.keys(t).sort(),r=Object.keys(e).sort();if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!==r[s]||!or(t[n[s]],e[r[s]]))return!1;return!0}function Ci(t){const e=ge.importSyncState(t),n=ge.encodeSyncState(e);return e.free(),n}function ki(t){const e=ge.decodeSyncState(t),n=ge.exportSyncState(e);return e.free(),n}function Uu(t,e){const n=ie(t),r=ge.importSyncState(e),s=n.handle.generateSyncMessage(r);return[ge.exportSyncState(r),s]}function Bu(t,e,n,r){const s=ge.importSyncState(e);r||(r={});const i=ie(t);if(i.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Tn(t))throw new RangeError("Calls to Automerge.change cannot be nested");const o=i.handle.getHeads();i.handle.receiveSyncMessage(s,n);const a=ge.exportSyncState(s);return[$t(t,"receiveSyncMessage",o,r.patchCallback||i.patchCallback),a,null]}function ju(){return ge.exportSyncState(ge.initSyncState())}function Lu(t){return ge.decodeSyncMessage(t)}function $e(t){const e=ie(t);return e.heads||e.handle.getHeads()}function fs(t){return typeof t=="object"&&t!==null}function $u(t,e){return ie(t).handle.saveSince(e)}function Ti(t){t.registerDatatype("counter",e=>new ir(e),e=>{if(e instanceof ir)return e.value}),t.registerDatatype("str",e=>new Si(e),e=>{if(xi(e))return e.val})}function Pu(t){return ie(t).handle.topoHistoryTraversal()}function Fu(t,e){return ie(t).handle.getDecodedChangeByHash(e)}function kr(t){return ie(t).handle.stats()}function Tr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nt={exports:{}},Fn,ls;function zu(){if(ls)return Fn;ls=1;var t=1e3,e=t*60,n=e*60,r=n*24,s=r*7,i=r*365.25;Fn=function(g,l){l=l||{};var u=typeof g;if(u==="string"&&g.length>0)return o(g);if(u==="number"&&isFinite(g))return l.long?c(g):a(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function o(g){if(g=String(g),!(g.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(l){var u=parseFloat(l[1]),d=(l[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"weeks":case"week":case"w":return u*s;case"days":case"day":case"d":return u*r;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*e;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function a(g){var l=Math.abs(g);return l>=r?Math.round(g/r)+"d":l>=n?Math.round(g/n)+"h":l>=e?Math.round(g/e)+"m":l>=t?Math.round(g/t)+"s":g+"ms"}function c(g){var l=Math.abs(g);return l>=r?f(g,l,r,"day"):l>=n?f(g,l,n,"hour"):l>=e?f(g,l,e,"minute"):l>=t?f(g,l,t,"second"):g+" ms"}function f(g,l,u,d){var h=l>=u*1.5;return Math.round(g/u)+" "+d+(h?"s":"")}return Fn}var zn,hs;function Vu(){if(hs)return zn;hs=1;function t(e){r.debug=r,r.default=r,r.coerce=f,r.disable=a,r.enable=i,r.enabled=c,r.humanize=zu(),r.destroy=g,Object.keys(e).forEach(l=>{r[l]=e[l]}),r.names=[],r.skips=[],r.formatters={};function n(l){let u=0;for(let d=0;d<l.length;d++)u=(u<<5)-u+l.charCodeAt(d),u|=0;return r.colors[Math.abs(u)%r.colors.length]}r.selectColor=n;function r(l){let u,d=null,h,y;function b(...E){if(!b.enabled)return;const R=b,w=Number(new Date),$=w-(u||w);R.diff=$,R.prev=u,R.curr=w,u=w,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let I=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(M,P)=>{if(M==="%%")return"%";I++;const T=r.formatters[P];if(typeof T=="function"){const H=E[I];M=T.call(R,H),E.splice(I,1),I--}return M}),r.formatArgs.call(R,E),(R.log||r.log).apply(R,E)}return b.namespace=l,b.useColors=r.useColors(),b.color=r.selectColor(l),b.extend=s,b.destroy=r.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==r.namespaces&&(h=r.namespaces,y=r.enabled(l)),y),set:E=>{d=E}}),typeof r.init=="function"&&r.init(b),b}function s(l,u){const d=r(this.namespace+(typeof u>"u"?":":u)+l);return d.log=this.log,d}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];const u=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const d of u)d[0]==="-"?r.skips.push(d.slice(1)):r.names.push(d)}function o(l,u){let d=0,h=0,y=-1,b=0;for(;d<l.length;)if(h<u.length&&(u[h]===l[d]||u[h]==="*"))u[h]==="*"?(y=h,b=d,h++):(d++,h++);else if(y!==-1)h=y+1,b++,d=b;else return!1;for(;h<u.length&&u[h]==="*";)h++;return h===u.length}function a(){const l=[...r.names,...r.skips.map(u=>"-"+u)].join(",");return r.enable(""),l}function c(l){for(const u of r.skips)if(o(l,u))return!1;for(const u of r.names)if(o(l,u))return!0;return!1}function f(l){return l instanceof Error?l.stack||l.message:l}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return zn=t,zn}var ds;function Nu(){return ds||(ds=1,(function(t,e){var n={};e.formatArgs=s,e.save=i,e.load=o,e.useColors=r,e.storage=a(),e.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let f;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(f=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(f[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const g="color: "+this.color;f.splice(1,0,g,"color: inherit");let l=0,u=0;f[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(l++,d==="%c"&&(u=l))}),f.splice(u,0,g)}e.log=console.debug||console.log||(()=>{});function i(f){try{f?e.storage.setItem("debug",f):e.storage.removeItem("debug")}catch{}}function o(){let f;try{f=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=n.DEBUG),f}function a(){try{return localStorage}catch{}}t.exports=Vu()(e);const{formatters:c}=t.exports;c.j=function(f){try{return JSON.stringify(f)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}})(Nt,Nt.exports)),Nt.exports}var Wu=Nu();const tt=Tr(Wu);var Vn={exports:{}},gs;function qu(){return gs||(gs=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,f,g){this.fn=c,this.context=f,this.once=g||!1}function i(c,f,g,l,u){if(typeof g!="function")throw new TypeError("The listener must be a function");var d=new s(g,l||c,u),h=n?n+f:f;return c._events[h]?c._events[h].fn?c._events[h]=[c._events[h],d]:c._events[h].push(d):(c._events[h]=d,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new r:delete c._events[f]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var f=[],g,l;if(this._eventsCount===0)return f;for(l in g=this._events)e.call(g,l)&&f.push(n?l.slice(1):l);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(g)):f},a.prototype.listeners=function(f){var g=n?n+f:f,l=this._events[g];if(!l)return[];if(l.fn)return[l.fn];for(var u=0,d=l.length,h=new Array(d);u<d;u++)h[u]=l[u].fn;return h},a.prototype.listenerCount=function(f){var g=n?n+f:f,l=this._events[g];return l?l.fn?1:l.length:0},a.prototype.emit=function(f,g,l,u,d,h){var y=n?n+f:f;if(!this._events[y])return!1;var b=this._events[y],E=arguments.length,R,w;if(b.fn){switch(b.once&&this.removeListener(f,b.fn,void 0,!0),E){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,g),!0;case 3:return b.fn.call(b.context,g,l),!0;case 4:return b.fn.call(b.context,g,l,u),!0;case 5:return b.fn.call(b.context,g,l,u,d),!0;case 6:return b.fn.call(b.context,g,l,u,d,h),!0}for(w=1,R=new Array(E-1);w<E;w++)R[w-1]=arguments[w];b.fn.apply(b.context,R)}else{var $=b.length,I;for(w=0;w<$;w++)switch(b[w].once&&this.removeListener(f,b[w].fn,void 0,!0),E){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,g);break;case 3:b[w].fn.call(b[w].context,g,l);break;case 4:b[w].fn.call(b[w].context,g,l,u);break;default:if(!R)for(I=1,R=new Array(E-1);I<E;I++)R[I-1]=arguments[I];b[w].fn.apply(b[w].context,R)}}return!0},a.prototype.on=function(f,g,l){return i(this,f,g,l,!1)},a.prototype.once=function(f,g,l){return i(this,f,g,l,!0)},a.prototype.removeListener=function(f,g,l,u){var d=n?n+f:f;if(!this._events[d])return this;if(!g)return o(this,d),this;var h=this._events[d];if(h.fn)h.fn===g&&(!u||h.once)&&(!l||h.context===l)&&o(this,d);else{for(var y=0,b=[],E=h.length;y<E;y++)(h[y].fn!==g||u&&!h[y].once||l&&h[y].context!==l)&&b.push(h[y]);b.length?this._events[d]=b.length===1?b[0]:b:o(this,d)}return this},a.prototype.removeAllListeners=function(f){var g;return f?(g=n?n+f:f,this._events[g]&&o(this,g)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Vn)),Vn.exports}var Gu=qu();const bt=Tr(Gu);function Ku(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Ju(){const t=Ku();if(t.__xstate__)return t.__xstate__}const Yu=t=>{if(typeof window>"u")return;const e=Ju();e&&e.register(t)};class _s{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Oi=".",Xu="",Hi="",Zu="#",Qu="*",Di="xstate.init",ar="xstate.stop";function ef(t,e){return{type:`xstate.after.${t}.${e}`}}function cr(t,e){return{type:`xstate.done.state.${t}`,output:e}}function tf(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function nf(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function Ri(t){return{type:Di,input:t}}function Te(t){setTimeout(()=>{throw t})}const rf=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Mi(t,e){const n=ps(t),r=ps(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(s=>s in r?Mi(n[s],r[s]):!1)}function Or(t){if(Bi(t))return t;const e=[];let n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function ps(t){if(Lf(t))return t.value;if(typeof t!="string")return t;const e=Or(t);return sf(e)}function sf(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const s=n;n={},s[t[r]]=n}return e}function ys(t,e){const n={},r=Object.keys(t);for(let s=0;s<r.length;s++){const i=r[s];n[i]=e(t[i],i,t,s)}return n}function Ui(t){return Bi(t)?t:[t]}function Pe(t){return t===void 0?[]:Ui(t)}function ur(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function Bi(t){return Array.isArray(t)}function of(t){return t.type.startsWith("xstate.error.actor")}function ut(t){return Ui(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function ji(t){if(!(t===void 0||t===Xu))return Pe(t)}function fr(t,e,n){const r=typeof t=="object",s=r?t:void 0;return{next:(r?t.next:t)?.bind(s),error:(r?t.error:e)?.bind(s),complete:(r?t.complete:n)?.bind(s)}}function bs(t,e){return`${e}.${t}`}function Hr(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,s]=n,o=t.getStateNodeById(s).config.invoke;return(Array.isArray(o)?o[r]:o).src}function ms(t,e){return`${t.sessionId}.${e}`}let af=0;function cf(t,e){const n=new Map,r=new Map,s=new WeakMap,i=new Set,o={},{clock:a,logger:c}=e,f={schedule:(u,d,h,y,b=Math.random().toString(36).slice(2))=>{const E={source:u,target:d,event:h,delay:y,id:b,startedAt:Date.now()},R=ms(u,b);l._snapshot._scheduledEvents[R]=E;const w=a.setTimeout(()=>{delete o[R],delete l._snapshot._scheduledEvents[R],l._relay(u,d,h)},y);o[R]=w},cancel:(u,d)=>{const h=ms(u,d),y=o[h];delete o[h],delete l._snapshot._scheduledEvents[h],y!==void 0&&a.clearTimeout(y)},cancelAll:u=>{for(const d in l._snapshot._scheduledEvents){const h=l._snapshot._scheduledEvents[d];h.source===u&&f.cancel(u,h.id)}}},g=u=>{if(!i.size)return;const d={...u,rootId:t.sessionId};i.forEach(h=>h.next?.(d))},l={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${af++}`,_register:(u,d)=>(n.set(u,d),u),_unregister:u=>{n.delete(u.sessionId);const d=s.get(u);d!==void 0&&(r.delete(d),s.delete(u))},get:u=>r.get(u),_set:(u,d)=>{const h=r.get(u);if(h&&h!==d)throw new Error(`Actor with system ID '${u}' already exists.`);r.set(u,d),s.set(d,u)},inspect:u=>{const d=fr(u);return i.add(d),{unsubscribe(){i.delete(d)}}},_sendInspectionEvent:g,_relay:(u,d,h)=>{l._sendInspectionEvent({type:"@xstate.event",sourceRef:u,actorRef:d,event:h}),d._send(h)},scheduler:f,getSnapshot:()=>({_scheduledEvents:{...l._snapshot._scheduledEvents}}),start:()=>{const u=l._snapshot._scheduledEvents;l._snapshot._scheduledEvents={};for(const d in u){const{source:h,target:y,event:b,delay:E,id:R}=u[d];f.schedule(h,y,b,E,R)}},_clock:a,_logger:c};return l}let Nn=!1;const Dr=1;let he=(function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t})({});const uf={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class ff{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new _s(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=he.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...uf,...n},{clock:s,logger:i,parent:o,syncSnapshot:a,id:c,systemId:f,inspect:g}=r;this.system=o?o.system:cf(this,{clock:s,logger:i}),g&&!o&&this.system.inspect(fr(g)),this.sessionId=this.system._bookId(),this.id=c??this.sessionId,this.logger=n?.logger??this.system._logger,this.clock=n?.clock??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:l=>{this._deferred.push(l)},system:this.system,stopChild:l=>{if(l._parent!==this)throw new Error(`Cannot stop child actor ${l.id} of ${this.id} because it is not a child`);l._stop()},emit:l=>{const u=this.eventListeners.get(l.type),d=this.eventListeners.get("*");if(!u&&!d)return;const h=[...u?u.values():[],...d?d.values():[]];for(const y of h)try{y(l)}catch(b){Te(b)}},actionExecutor:l=>{const u=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:l.type,params:l.params}}),!l.exec)return;const d=Nn;try{Nn=!0,l.exec(l.info,l.params)}finally{Nn=d}};this._processingStatus===he.Running?u():this._deferred.push(u)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),f&&(this._systemId=f,this.system._set(f,this)),this._initState(n?.snapshot??n?.state),f&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(n){this._snapshot={status:"error",output:void 0,error:n}}}update(e,n){this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(s){this._deferred.length=0,this._snapshot={...e,status:"error",error:s}}switch(this._snapshot.status){case"active":for(const s of this.observers)try{s.next?.(e)}catch(i){Te(i)}break;case"done":for(const s of this.observers)try{s.next?.(e)}catch(i){Te(i)}this._stopProcedure(),this._complete(),this._doneEvent=tf(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){const s=fr(e,n,r);if(this._processingStatus!==he.Stopped)this.observers.add(s);else switch(this._snapshot.status){case"done":try{s.complete?.()}catch(i){Te(i)}break;case"error":{const i=this._snapshot.error;if(!s.error)Te(i);else try{s.error(i)}catch(o){Te(o)}break}}return{unsubscribe:()=>{this.observers.delete(s)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const s=n.bind(void 0);return r.add(s),{unsubscribe:()=>{r.delete(s)}}}start(){if(this._processingStatus===he.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=he.Running;const e=Ri(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(s){r={err:s}}if(r){const{err:s}=r;this._snapshot={...this._snapshot,status:"error",error:s},this._error(s);return}this.update(n,e),e.type===ar&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===he.Stopped?this:(this.mailbox.clear(),this._processingStatus===he.NotStarted?(this._processingStatus=he.Stopped,this):(this.mailbox.enqueue({type:ar}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const e of this.observers)try{e.complete?.()}catch(n){Te(n)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Te(e);return}let n=!1;for(const r of this.observers){const s=r.error;n||=!s;try{s?.(e)}catch(i){Te(i)}}this.observers.clear(),n&&Te(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,nf(this.id,e))}_stopProcedure(){return this._processingStatus!==he.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new _s(this._process.bind(this)),this._processingStatus=he.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==he.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:Yu)(this)}toJSON(){return{xstate$$type:Dr,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[rf](){return this}getSnapshot(){return this._snapshot}}function Dt(t,...[e]){return new ff(t,e)}function lf(t,e,n,r,{sendId:s}){const i=typeof s=="function"?s(n,r):s;return[e,{sendId:i},void 0]}function hf(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e.sendId)})}function df(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=lf,e.execute=hf,e}function gf(t,e,n,r,{id:s,systemId:i,src:o,input:a,syncSnapshot:c}){const f=typeof o=="string"?Hr(e.machine,o):o,g=typeof s=="function"?s(n):s;let l,u;return f&&(u=typeof a=="function"?a({context:e.context,event:n.event,self:t.self}):a,l=Dt(f,{id:g,src:o,parent:t.self,syncSnapshot:c,systemId:i,input:u})),[Qe(e,{children:{...e.children,[g]:l}}),{id:s,systemId:i,actorRef:l,src:o,input:u},void 0]}function _f(t,{actorRef:e}){e&&t.defer(()=>{e._processingStatus!==he.Stopped&&e.start()})}function pf(...[t,{id:e,systemId:n,input:r,syncSnapshot:s=!1}={}]){function i(o,a){}return i.type="xstate.spawnChild",i.id=e,i.systemId=n,i.src=t,i.input=r,i.syncSnapshot=s,i.resolve=gf,i.execute=_f,i}function yf(t,e,n,r,{actorRef:s}){const i=typeof s=="function"?s(n,r):s,o=typeof i=="string"?e.children[i]:i;let a=e.children;return o&&(a={...a},delete a[o.id]),[Qe(e,{children:a}),o,void 0]}function bf(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==he.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function Li(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=yf,e.execute=bf,e}function Rr(t,e,n,r){const{machine:s}=r,i=typeof t=="function",o=i?t:s.implementations.guards[typeof t=="string"?t:t.type];if(!i&&!o)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof o!="function")return Rr(o,e,n,r);const a={context:e,event:n},c=i||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in o?o.check(r,a,o):o(a,c)}const Mr=t=>t.type==="atomic"||t.type==="final";function _t(t){return Object.values(t.states).filter(e=>e.type!=="history")}function Pt(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function fn(t){const e=new Set(t),n=Pi(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))ws(r).forEach(s=>e.add(s));else if(r.type==="parallel"){for(const s of _t(r))if(s.type!=="history"&&!e.has(s)){const i=ws(s);for(const o of i)e.add(o)}}for(const r of e){let s=r.parent;for(;s;)e.add(s),s=s.parent}return e}function $i(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const s=n[0];if(s){if(Mr(s))return s.key}else return{}}const r={};for(const s of n)r[s.key]=$i(s,e);return r}function Pi(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function Fi(t,e){const n=fn(e);return $i(t,Pi(n))}function Ur(t,e){return e.type==="compound"?_t(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?_t(e).every(n=>Ur(t,n)):e.type==="final"}const On=t=>t[0]===Zu;function mf(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===Qu)return!0;if(!r.endsWith(".*"))return!1;const s=r.split("."),i=e.split(".");for(let o=0;o<s.length;o++){const a=s[o],c=i[o];if(a==="*")return o===s.length-1;if(a!==c)return!1}return!0}).sort((r,s)=>s.length-r.length).flatMap(r=>t.transitions.get(r))}function wf(t){const e=t.config.after;if(!e)return[];const n=s=>{const i=ef(s,t.id),o=i.type;return t.entry.push(Kf(i,{id:o,delay:s})),t.exit.push(df(o)),o};return Object.keys(e).flatMap(s=>{const i=e[s],o=typeof i=="string"?{target:i}:i,a=Number.isNaN(+s)?s:+s,c=n(a);return Pe(o).map(f=>({...f,event:c,delay:a}))}).map(s=>{const{delay:i}=s;return{...Ge(t,s.event,s),delay:i}})}function Ge(t,e,n){const r=ji(n.target),s=n.reenter??!1,i=vf(t,r),o={...n,actions:Pe(n.actions),guard:n.guard,target:i,source:t,reenter:s,eventType:e,toJSON:()=>({...o,source:`#${t.id}`,target:i?i.map(a=>`#${a.id}`):void 0})};return o}function Sf(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===Hi)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,ut(r).map(s=>Ge(t,n,s)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,ut(t.config.onDone).map(r=>Ge(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,ut(n.onDone).map(s=>Ge(t,r,s)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,ut(n.onError).map(s=>Ge(t,r,s)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,ut(n.onSnapshot).map(s=>Ge(t,r,s)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function xf(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:Pe(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function vf(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(On(n))return t.machine.getStateNodeById(n);const r=n[0]===Oi;if(r&&!t.parent)return ln(t,n.slice(1));const s=r?t.key+n:n;if(t.parent)try{return ln(t.parent,s)}catch(i){throw new Error(`Invalid transition definition for state node '${t.id}':
${i.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function zi(t){const e=ji(t.config.target);return e?{target:e.map(n=>typeof n=="string"?ln(t.parent,n):n)}:t.parent.initial}function Ye(t){return t.type==="history"}function ws(t){const e=Vi(t);for(const n of e)for(const r of Pt(n,t))e.add(r);return e}function Vi(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const s of _t(r))n(s)}}return n(t),e}function pt(t,e){if(On(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function ln(t,e){if(typeof e=="string"&&On(e))try{return t.machine.getStateNodeById(e)}catch{}const n=Or(e).slice();let r=t;for(;n.length;){const s=n.shift();if(!s.length)break;r=pt(r,s)}return r}function hn(t,e){if(typeof e=="string"){const s=t.states[e];if(!s)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,s]}const n=Object.keys(e),r=n.map(s=>pt(t,s)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((s,i)=>{const o=pt(t,i);if(!o)return s;const a=hn(o,e[i]);return s.concat(a)},[]))}function Af(t,e,n,r){const i=pt(t,e).next(n,r);return!i||!i.length?t.next(n,r):i}function Ef(t,e,n,r){const s=Object.keys(e),i=pt(t,s[0]),o=Br(i,e[s[0]],n,r);return!o||!o.length?t.next(n,r):o}function If(t,e,n,r){const s=[];for(const i of Object.keys(e)){const o=e[i];if(!o)continue;const a=pt(t,i),c=Br(a,o,n,r);c&&s.push(...c)}return s.length?s:t.next(n,r)}function Br(t,e,n,r){return typeof e=="string"?Af(t,e,n,r):Object.keys(e).length===1?Ef(t,e,n,r):If(t,e,n,r)}function Cf(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function Ne(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function kf(t,e){const n=new Set(t),r=new Set(e);for(const s of n)if(r.has(s))return!0;for(const s of r)if(n.has(s))return!0;return!1}function Ni(t,e,n){const r=new Set;for(const s of t){let i=!1;const o=new Set;for(const a of r)if(kf(lr([s],e,n),lr([a],e,n)))if(Ne(s.source,a.source))o.add(a);else{i=!0;break}if(!i){for(const a of o)r.delete(a);r.add(s)}}return Array.from(r)}function Tf(t){const[e,...n]=t;for(const r of Pt(e,void 0))if(n.every(s=>Ne(s,r)))return r}function jr(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(Ye(r))if(e[r.id])for(const s of e[r.id])n.add(s);else for(const s of jr(zi(r),e))n.add(s);else n.add(r);return[...n]}function Wi(t,e){const n=jr(t,e);if(!n)return;if(!t.reenter&&n.every(s=>s===t.source||Ne(s,t.source)))return t.source;const r=Tf(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function lr(t,e,n){const r=new Set;for(const s of t)if(s.target?.length){const i=Wi(s,n);s.reenter&&s.source===i&&r.add(i);for(const o of e)Ne(o,i)&&r.add(o)}return[...r]}function Of(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function hr(t,e,n,r,s,i){if(!t.length)return e;const o=new Set(e._nodes);let a=e.historyValue;const c=Ni(t,o,a);let f=e;s||([f,a]=Mf(f,r,n,c,o,a,i,n.actionExecutor)),f=yt(f,r,n,c.flatMap(l=>l.actions),i,void 0),f=Df(f,r,n,c,o,i,a,s);const g=[...o];f.status==="done"&&(f=yt(f,r,n,g.sort((l,u)=>u.order-l.order).flatMap(l=>l.exit),i,void 0));try{return a===e.historyValue&&Of(e._nodes,o)?f:Qe(f,{_nodes:g,historyValue:a})}catch(l){throw l}}function Hf(t,e,n,r,s){if(r.output===void 0)return;const i=cr(s.id,s.output!==void 0&&s.parent?ur(s.output,t.context,e,n.self):void 0);return ur(r.output,t.context,i,n.self)}function Df(t,e,n,r,s,i,o,a){let c=t;const f=new Set,g=new Set;Rf(r,o,g,f),a&&g.add(t.machine.root);const l=new Set;for(const u of[...f].sort((d,h)=>d.order-h.order)){s.add(u);const d=[];d.push(...u.entry);for(const h of u.invoke)d.push(pf(h.src,{...h,syncSnapshot:!!h.onSnapshot}));if(g.has(u)){const h=u.initial.actions;d.push(...h)}if(c=yt(c,e,n,d,i,u.invoke.map(h=>h.id)),u.type==="final"){const h=u.parent;let y=h?.type==="parallel"?h:h?.parent,b=y||u;for(h?.type==="compound"&&i.push(cr(h.id,u.output!==void 0?ur(u.output,c.context,e,n.self):void 0));y?.type==="parallel"&&!l.has(y)&&Ur(s,y);)l.add(y),i.push(cr(y.id)),b=y,y=y.parent;if(y)continue;c=Qe(c,{status:"done",output:Hf(c,e,n,c.machine.root,b)})}}return c}function Rf(t,e,n,r){for(const s of t){const i=Wi(s,e);for(const a of s.target||[])!Ye(a)&&(s.source!==a||s.source!==i||s.reenter)&&(r.add(a),n.add(a)),ft(a,e,n,r);const o=jr(s,e);for(const a of o){const c=Pt(a,i);i?.type==="parallel"&&c.push(i),qi(r,e,n,c,!s.source.parent&&s.reenter?void 0:i)}}}function ft(t,e,n,r){if(Ye(t))if(e[t.id]){const s=e[t.id];for(const i of s)r.add(i),ft(i,e,n,r);for(const i of s)Wn(i,t.parent,r,e,n)}else{const s=zi(t);for(const i of s.target)r.add(i),s===t.parent?.initial&&n.add(t.parent),ft(i,e,n,r);for(const i of s.target)Wn(i,t.parent,r,e,n)}else if(t.type==="compound"){const[s]=t.initial.target;Ye(s)||(r.add(s),n.add(s)),ft(s,e,n,r),Wn(s,t,r,e,n)}else if(t.type==="parallel")for(const s of _t(t).filter(i=>!Ye(i)))[...r].some(i=>Ne(i,s))||(Ye(s)||(r.add(s),n.add(s)),ft(s,e,n,r))}function qi(t,e,n,r,s){for(const i of r)if((!s||Ne(i,s))&&t.add(i),i.type==="parallel")for(const o of _t(i).filter(a=>!Ye(a)))[...t].some(a=>Ne(a,o))||(t.add(o),ft(o,e,n,t))}function Wn(t,e,n,r,s){qi(n,r,s,Pt(t,e))}function Mf(t,e,n,r,s,i,o,a){let c=t;const f=lr(r,s,i);f.sort((l,u)=>u.order-l.order);let g;for(const l of f)for(const u of Cf(l)){let d;u.history==="deep"?d=h=>Mr(h)&&Ne(h,l):d=h=>h.parent===l,g??={...i},g[u.id]=Array.from(s).filter(d)}for(const l of f)c=yt(c,e,n,[...l.exit,...l.invoke.map(u=>Li(u.id))],o,void 0),s.delete(l);return[c,g||i]}function Uf(t,e){return t.implementations.actions[e]}function Gi(t,e,n,r,s,i){const{machine:o}=t;let a=t;for(const c of r){const f=typeof c=="function",g=f?c:Uf(o,typeof c=="string"?c:c.type),l={context:a.context,event:e,self:n.self,system:n.system},u=f||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:a.context,event:e}):c.params:void 0;if(!g||!("resolve"in g)){n.actionExecutor({type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",info:l,params:u,exec:g});continue}const d=g,[h,y,b]=d.resolve(n,a,l,u,g,s);a=h,"retryResolve"in d&&i?.push([d,y]),"execute"in d&&n.actionExecutor({type:d.type,info:l,params:y,exec:d.execute.bind(null,n,y)}),b&&(a=Gi(a,e,n,b,s,i))}return a}function yt(t,e,n,r,s,i){const o=i?[]:void 0,a=Gi(t,e,n,r,{internalQueue:s,deferredActorIds:i},o);return o?.forEach(([c,f])=>{c.retryResolve(n,a,f)}),a}function qn(t,e,n,r){let s=t;const i=[];function o(f,g,l){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:g,snapshot:f,_transitions:l}),i.push(f)}if(e.type===ar)return s=Qe(Ss(s,e,n),{status:"stopped"}),o(s,e,[]),{snapshot:s,microstates:i};let a=e;if(a.type!==Di){const f=a,g=of(f),l=xs(f,s);if(g&&!l.length)return s=Qe(t,{status:"error",error:f.error}),o(s,f,[]),{snapshot:s,microstates:i};s=hr(l,t,n,a,!1,r),o(s,f,l)}let c=!0;for(;s.status==="active";){let f=c?Bf(s,a):[];const g=f.length?s:void 0;if(!f.length){if(!r.length)break;a=r.shift(),f=xs(a,s)}s=hr(f,s,n,a,!1,r),c=s!==g,o(s,a,f)}return s.status!=="active"&&Ss(s,a,n),{snapshot:s,microstates:i}}function Ss(t,e,n){return yt(t,e,n,Object.values(t.children).map(r=>Li(r)),[],void 0)}function xs(t,e){return e.machine.getTransitionData(e,t)}function Bf(t,e){const n=new Set,r=t._nodes.filter(Mr);for(const s of r)e:for(const i of[s].concat(Pt(s,void 0)))if(i.always){for(const o of i.always)if(o.guard===void 0||Rr(o.guard,t.context,e,t)){n.add(o);break e}}return Ni(Array.from(n),new Set(t._nodes),t.historyValue)}function jf(t,e){const n=fn(hn(t,e));return Fi(t,[...n])}function Lf(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const $f=function(e){return Mi(e,this.value)},Pf=function(e){return this.tags.has(e)},Ff=function(e){const n=this.machine.getTransitionData(this,e);return!!n?.length&&n.some(r=>r.target!==void 0||r.actions.length)},zf=function(){const{_nodes:e,tags:n,machine:r,getMeta:s,toJSON:i,can:o,hasTag:a,matches:c,...f}=this;return{...f,tags:Array.from(n)}},Vf=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function Qt(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:Fi(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:$f,hasTag:Pf,can:Ff,getMeta:Vf,toJSON:zf}}function Qe(t,e={}){return Qt({...t,...e},t.machine)}function Nf(t){if(typeof t!="object"||t===null)return{};const e={};for(const n in t){const r=t[n];Array.isArray(r)&&(e[n]=r.map(s=>({id:s.id})))}return e}function Wf(t,e){const{_nodes:n,tags:r,machine:s,children:i,context:o,can:a,hasTag:c,matches:f,getMeta:g,toJSON:l,...u}=t,d={};for(const y in i){const b=i[y];d[y]={snapshot:b.getPersistedSnapshot(e),src:b.src,systemId:b._systemId,syncSnapshot:b._syncSnapshot}}return{...u,context:Ki(o),children:d,historyValue:Nf(u.historyValue)}}function Ki(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??=Array.isArray(t)?t.slice():{...t},e[n]={xstate$$type:Dr,id:r.id};else{const s=Ki(r);s!==r&&(e??=Array.isArray(t)?t.slice():{...t},e[n]=s)}}return e??t}function qf(t,e,n,r,{event:s,id:i,delay:o},{internalQueue:a}){const c=e.machine.implementations.delays;if(typeof s=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${s}" }) instead`);const f=typeof s=="function"?s(n,r):s;let g;if(typeof o=="string"){const l=c&&c[o];g=typeof l=="function"?l(n,r):l}else g=typeof o=="function"?o(n,r):o;return typeof g!="number"&&a.push(f),[e,{event:f,id:i,delay:g},void 0]}function Gf(t,e){const{event:n,delay:r,id:s}=e;if(typeof r=="number"){t.defer(()=>{const i=t.self;t.system.scheduler.schedule(i,i,n,r,s)});return}}function Kf(t,e){function n(r,s){}return n.type="xstate.raise",n.event=t,n.id=e?.id,n.delay=e?.delay,n.resolve=qf,n.execute=Gf,n}function Jf(t,{machine:e,context:n},r,s){const i=(o,a)=>{if(typeof o=="string"){const c=Hr(e,o);if(!c)throw new Error(`Actor logic '${o}' not implemented in machine '${e.id}'`);const f=Dt(c,{id:a?.id,parent:t.self,syncSnapshot:a?.syncSnapshot,input:typeof a?.input=="function"?a.input({context:n,event:r,self:t.self}):a?.input,src:o,systemId:a?.systemId});return s[f.id]=f,f}else return Dt(o,{id:a?.id,parent:t.self,syncSnapshot:a?.syncSnapshot,input:a?.input,src:o,systemId:a?.systemId})};return(o,a)=>{const c=i(o,a);return s[c.id]=c,t.defer(()=>{c._processingStatus!==he.Stopped&&c.start()}),c}}function Yf(t,e,n,r,{assignment:s}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const i={},o={context:e.context,event:n.event,spawn:Jf(t,e,n.event,i),self:t.self,system:t.system};let a={};if(typeof s=="function")a=s(o,r);else for(const f of Object.keys(s)){const g=s[f];a[f]=typeof g=="function"?g(o,r):g}const c=Object.assign({},e.context,a);return[Qe(e,{context:c,children:Object.keys(i).length?{...e.children,...i}:e.children}),void 0,void 0]}function Et(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=Yf,e}const vs=new WeakMap;function it(t,e,n){let r=vs.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},vs.set(t,r)),r[e]}const Xf={},xt=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class dn{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Oi),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?ys(this.config.states,(r,s)=>new dn(r,{_parent:this,_key:s,_machine:this.machine})):Xf,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Pe(this.config.entry).slice(),this.exit=Pe(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Pe(e.tags).slice()}_initialize(){this.transitions=Sf(this),this.config.always&&(this.always=ut(this.config.always).map(e=>Ge(this,Hi,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(xt),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(xt),eventType:null})}:void 0,history:this.history,states:ys(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(xt)})),entry:this.entry.map(xt),exit:this.exit.map(xt),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return it(this,"invoke",()=>Pe(this.config.invoke).map((e,n)=>{const{src:r,systemId:s}=e,i=e.id??bs(this.id,n),o=typeof r=="string"?r:`xstate.invoke.${bs(this.id,n)}`;return{...e,src:o,id:i,systemId:s,toJSON(){const{onDone:a,onError:c,...f}=e;return{...f,type:"xstate.invoke",src:o,id:i}}}}))}get on(){return it(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(s=>[n,s])).reduce((n,[r,s])=>(n[r]=n[r]||[],n[r].push(s),n),{}))}get after(){return it(this,"delayedTransitions",()=>wf(this))}get initial(){return it(this,"initial",()=>xf(this,this.config.initial))}next(e,n){const r=n.type,s=[];let i;const o=it(this,`candidates-${r}`,()=>mf(this,r));for(const a of o){const{guard:c}=a,f=e.context;let g=!1;try{g=!c||Rr(c,f,n,e)}catch(l){const u=typeof c=="string"?c:typeof c=="object"?c.type:void 0;throw new Error(`Unable to evaluate guard ${u?`'${u}' `:""}in transition for event '${r}' in state node '${this.id}':
${l.message}`)}if(g){s.push(...a.actions),i=a;break}}return i?[i]:void 0}get events(){return it(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const s=e[r];if(s.states)for(const i of s.events)n.add(`${i}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const Zf="#";class Lr{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:n?.actors??{},actions:n?.actions??{},delays:n?.delays??{},guards:n?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new dn(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:s,delays:i}=this.implementations;return new Lr(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...s,...e.actors},delays:{...i,...e.delays}})}resolveState(e){const n=jf(this.root,e.value),r=fn(hn(this.root,n));return Qt({_nodes:[...r],context:e.context||{},children:{},status:Ur(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return qn(e,n,r,[]).snapshot}microstep(e,n,r){return qn(e,n,r,[]).microstates}getTransitionData(e,n){return Br(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:s}=this.config,i=Qt({context:typeof s!="function"&&s?s:{},_nodes:[this.root],children:{},status:"active"},this);return typeof s=="function"?yt(i,n,e,[Et(({spawn:a,event:c,self:f})=>s({spawn:a,input:c.input,self:f}))],r,void 0):i}getInitialSnapshot(e,n){const r=Ri(n),s=[],i=this.getPreInitialState(e,r,s),o=hr([{target:[...Vi(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],i,e,r,!0,s),{snapshot:a}=qn(o,r,e,s);return a}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=Or(e),r=n.slice(1),s=On(n[0])?n[0].slice(Zf.length):n[0],i=this.idMap.get(s);if(!i)throw new Error(`Child state node '#${s}' does not exist on machine '${this.id}'`);return ln(i,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return Wf(e,n)}restoreSnapshot(e,n){const r={},s=e.children;Object.keys(s).forEach(l=>{const u=s[l],d=u.snapshot,h=u.src,y=typeof h=="string"?Hr(this,h):h;if(!y)return;const b=Dt(y,{id:l,parent:n.self,syncSnapshot:u.syncSnapshot,snapshot:d,src:h,systemId:u.systemId});r[l]=b});function i(l,u){if(u instanceof dn)return u;try{return l.machine.getStateNodeById(u.id)}catch{}}function o(l,u){if(!u||typeof u!="object")return{};const d={};for(const h in u){const y=u[h];for(const b of y){const E=i(l,b);E&&(d[h]??=[],d[h].push(E))}}return d}const a=o(this.root,e.historyValue),c=Qt({...e,children:r,_nodes:Array.from(fn(hn(this.root,e.value))),historyValue:a},this),f=new Set;function g(l,u){if(!f.has(l)){f.add(l);for(const d in l){const h=l[d];if(h&&typeof h=="object"){if("xstate$$type"in h&&h.xstate$$type===Dr){l[d]=u[h.id];continue}g(h,u)}}}}return g(c.context,r),c}}function Qf(t,e){const n=Pe(e);if(!n.includes(t.type)){const r=n.length===1?`type "${n[0]}"`:`one of types "${n.join('", "')}"`;throw new Error(`Expected event ${JSON.stringify(t)} to have ${r}`)}}function el(t,e){return new Lr(t,e)}function tl({schemas:t,actors:e,actions:n,guards:r,delays:s}){return{createMachine:i=>el({...i,schemas:t},{actors:e,actions:n,guards:r,delays:s})}}const nl={timeout:1/0};function rl(t,e,n){const r={...nl,...n};return new Promise((s,i)=>{const{signal:o}=r;if(o?.aborted){i(o.reason);return}let a=!1;const c=r.timeout===1/0?void 0:setTimeout(()=>{f(),i(new Error(`Timeout of ${r.timeout} ms exceeded`))},r.timeout),f=()=>{clearTimeout(c),a=!0,u?.unsubscribe(),l&&o.removeEventListener("abort",l)};function g(d){e(d)&&(f(),s(d))}let l,u;g(t.getSnapshot()),!a&&(o&&(l=()=>{f(),i(o.reason)},o.addEventListener("abort",l)),u=t.subscribe({next:g,error:d=>{f(),i(d)},complete:()=>{f(),i(new Error("Actor terminated without satisfying predicate"))}}),a&&u.unsubscribe())})}let Wt;const sl=new Uint8Array(16);function il(){if(!Wt&&(Wt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Wt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wt(sl)}const ol=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Hn(t){return typeof t=="string"&&ol.test(t)}const ce=[];for(let t=0;t<256;++t)ce.push((t+256).toString(16).slice(1));function Ji(t,e=0){return ce[t[e+0]]+ce[t[e+1]]+ce[t[e+2]]+ce[t[e+3]]+"-"+ce[t[e+4]]+ce[t[e+5]]+"-"+ce[t[e+6]]+ce[t[e+7]]+"-"+ce[t[e+8]]+ce[t[e+9]]+"-"+ce[t[e+10]]+ce[t[e+11]]+ce[t[e+12]]+ce[t[e+13]]+ce[t[e+14]]+ce[t[e+15]]}function al(t,e=0){const n=Ji(t,e);if(!Hn(n))throw TypeError("Stringified UUID is invalid");return n}function cl(t){if(!Hn(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}const ul=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),As={randomUUID:ul};function Yi(t,e,n){if(As.randomUUID&&!e&&!t)return As.randomUUID();t=t||{};const r=t.random||(t.rng||il)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=r[s];return e}return Ji(r)}var Ie={},Y={},ue={},Gn={},vt={},Es;function fl(){return Es||(Es=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.crypto=void 0,vt.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),vt}var Is;function Xi(){return Is||(Is=1,(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=n,t.anumber=r,t.abytes=s,t.ahash=i,t.aexists=o,t.aoutput=a,t.u8=c,t.u32=f,t.clean=g,t.createView=l,t.rotr=u,t.rotl=d,t.byteSwap=h,t.byteSwap32=y,t.bytesToHex=R,t.hexToBytes=I,t.asyncLoop=M,t.utf8ToBytes=P,t.bytesToUtf8=T,t.toBytes=H,t.kdfInputToBytes=F,t.concatBytes=W,t.checkOpts=_,t.createHasher=A,t.createOptHasher=O,t.createXOFer=k,t.randomBytes=N;const e=fl();function n(m){return m instanceof Uint8Array||ArrayBuffer.isView(m)&&m.constructor.name==="Uint8Array"}function r(m){if(!Number.isSafeInteger(m)||m<0)throw new Error("positive integer expected, got "+m)}function s(m,...D){if(!n(m))throw new Error("Uint8Array expected");if(D.length>0&&!D.includes(m.length))throw new Error("Uint8Array expected of length "+D+", got length="+m.length)}function i(m){if(typeof m!="function"||typeof m.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");r(m.outputLen),r(m.blockLen)}function o(m,D=!0){if(m.destroyed)throw new Error("Hash instance has been destroyed");if(D&&m.finished)throw new Error("Hash#digest() has already been called")}function a(m,D){s(m);const L=D.outputLen;if(m.length<L)throw new Error("digestInto() expects output buffer of length at least "+L)}function c(m){return new Uint8Array(m.buffer,m.byteOffset,m.byteLength)}function f(m){return new Uint32Array(m.buffer,m.byteOffset,Math.floor(m.byteLength/4))}function g(...m){for(let D=0;D<m.length;D++)m[D].fill(0)}function l(m){return new DataView(m.buffer,m.byteOffset,m.byteLength)}function u(m,D){return m<<32-D|m>>>D}function d(m,D){return m<<D|m>>>32-D>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function h(m){return m<<24&4278190080|m<<8&16711680|m>>>8&65280|m>>>24&255}t.swap8IfBE=t.isLE?m=>m:m=>h(m),t.byteSwapIfBE=t.swap8IfBE;function y(m){for(let D=0;D<m.length;D++)m[D]=h(m[D]);return m}t.swap32IfBE=t.isLE?m=>m:y;const b=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",E=Array.from({length:256},(m,D)=>D.toString(16).padStart(2,"0"));function R(m){if(s(m),b)return m.toHex();let D="";for(let L=0;L<m.length;L++)D+=E[m[L]];return D}const w={_0:48,_9:57,A:65,F:70,a:97,f:102};function $(m){if(m>=w._0&&m<=w._9)return m-w._0;if(m>=w.A&&m<=w.F)return m-(w.A-10);if(m>=w.a&&m<=w.f)return m-(w.a-10)}function I(m){if(typeof m!="string")throw new Error("hex string expected, got "+typeof m);if(b)return Uint8Array.fromHex(m);const D=m.length,L=D/2;if(D%2)throw new Error("hex string expected, got unpadded hex of length "+D);const z=new Uint8Array(L);for(let J=0,ae=0;J<L;J++,ae+=2){const rt=$(m.charCodeAt(ae)),be=$(m.charCodeAt(ae+1));if(rt===void 0||be===void 0){const Ee=m[ae]+m[ae+1];throw new Error('hex string expected, got non-hex character "'+Ee+'" at index '+ae)}z[J]=rt*16+be}return z}const v=async()=>{};t.nextTick=v;async function M(m,D,L){let z=Date.now();for(let J=0;J<m;J++){L(J);const ae=Date.now()-z;ae>=0&&ae<D||(await(0,t.nextTick)(),z+=ae)}}function P(m){if(typeof m!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(m))}function T(m){return new TextDecoder().decode(m)}function H(m){return typeof m=="string"&&(m=P(m)),s(m),m}function F(m){return typeof m=="string"&&(m=P(m)),s(m),m}function W(...m){let D=0;for(let z=0;z<m.length;z++){const J=m[z];s(J),D+=J.length}const L=new Uint8Array(D);for(let z=0,J=0;z<m.length;z++){const ae=m[z];L.set(ae,J),J+=ae.length}return L}function _(m,D){if(D!==void 0&&{}.toString.call(D)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(m,D)}class U{}t.Hash=U;function A(m){const D=z=>m().update(H(z)).digest(),L=m();return D.outputLen=L.outputLen,D.blockLen=L.blockLen,D.create=()=>m(),D}function O(m){const D=(z,J)=>m(J).update(H(z)).digest(),L=m({});return D.outputLen=L.outputLen,D.blockLen=L.blockLen,D.create=z=>m(z),D}function k(m){const D=(z,J)=>m(J).update(H(z)).digest(),L=m({});return D.outputLen=L.outputLen,D.blockLen=L.blockLen,D.create=z=>m(z),D}t.wrapConstructor=A,t.wrapConstructorWithOpts=O,t.wrapXOFConstructorWithOpts=k;function N(m=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(m));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(m));throw new Error("crypto.getRandomValues must be defined")}})(Gn)),Gn}var Cs;function ll(){if(Cs)return ue;Cs=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.SHA512_IV=ue.SHA384_IV=ue.SHA224_IV=ue.SHA256_IV=ue.HashMD=void 0,ue.setBigUint64=e,ue.Chi=n,ue.Maj=r;const t=Xi();function e(i,o,a,c){if(typeof i.setBigUint64=="function")return i.setBigUint64(o,a,c);const f=BigInt(32),g=BigInt(4294967295),l=Number(a>>f&g),u=Number(a&g),d=c?4:0,h=c?0:4;i.setUint32(o+d,l,c),i.setUint32(o+h,u,c)}function n(i,o,a){return i&o^~i&a}function r(i,o,a){return i&o^i&a^o&a}class s extends t.Hash{constructor(o,a,c,f){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=o,this.outputLen=a,this.padOffset=c,this.isLE=f,this.buffer=new Uint8Array(o),this.view=(0,t.createView)(this.buffer)}update(o){(0,t.aexists)(this),o=(0,t.toBytes)(o),(0,t.abytes)(o);const{view:a,buffer:c,blockLen:f}=this,g=o.length;for(let l=0;l<g;){const u=Math.min(f-this.pos,g-l);if(u===f){const d=(0,t.createView)(o);for(;f<=g-l;l+=f)this.process(d,l);continue}c.set(o.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===f&&(this.process(a,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){(0,t.aexists)(this),(0,t.aoutput)(o,this),this.finished=!0;const{buffer:a,view:c,blockLen:f,isLE:g}=this;let{pos:l}=this;a[l++]=128,(0,t.clean)(this.buffer.subarray(l)),this.padOffset>f-l&&(this.process(c,0),l=0);for(let b=l;b<f;b++)a[b]=0;e(c,f-8,BigInt(this.length*8),g),this.process(c,0);const u=(0,t.createView)(o),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=d/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)u.setUint32(4*b,y[b],g)}digest(){const{buffer:o,outputLen:a}=this;this.digestInto(o);const c=o.slice(0,a);return this.destroy(),c}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:a,buffer:c,length:f,finished:g,destroyed:l,pos:u}=this;return o.destroyed=l,o.finished=g,o.length=f,o.pos=u,f%a&&o.buffer.set(c),o}clone(){return this._cloneInto()}}return ue.HashMD=s,ue.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ue.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),ue.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ue.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ue}var q={},ks;function hl(){if(ks)return q;ks=1,Object.defineProperty(q,"__esModule",{value:!0}),q.toBig=q.shrSL=q.shrSH=q.rotrSL=q.rotrSH=q.rotrBL=q.rotrBH=q.rotr32L=q.rotr32H=q.rotlSL=q.rotlSH=q.rotlBL=q.rotlBH=q.add5L=q.add5H=q.add4L=q.add4H=q.add3L=q.add3H=void 0,q.add=E,q.fromBig=n,q.split=r;const t=BigInt(2**32-1),e=BigInt(32);function n(T,H=!1){return H?{h:Number(T&t),l:Number(T>>e&t)}:{h:Number(T>>e&t)|0,l:Number(T&t)|0}}function r(T,H=!1){const F=T.length;let W=new Uint32Array(F),_=new Uint32Array(F);for(let U=0;U<F;U++){const{h:A,l:O}=n(T[U],H);[W[U],_[U]]=[A,O]}return[W,_]}const s=(T,H)=>BigInt(T>>>0)<<e|BigInt(H>>>0);q.toBig=s;const i=(T,H,F)=>T>>>F;q.shrSH=i;const o=(T,H,F)=>T<<32-F|H>>>F;q.shrSL=o;const a=(T,H,F)=>T>>>F|H<<32-F;q.rotrSH=a;const c=(T,H,F)=>T<<32-F|H>>>F;q.rotrSL=c;const f=(T,H,F)=>T<<64-F|H>>>F-32;q.rotrBH=f;const g=(T,H,F)=>T>>>F-32|H<<64-F;q.rotrBL=g;const l=(T,H)=>H;q.rotr32H=l;const u=(T,H)=>T;q.rotr32L=u;const d=(T,H,F)=>T<<F|H>>>32-F;q.rotlSH=d;const h=(T,H,F)=>H<<F|T>>>32-F;q.rotlSL=h;const y=(T,H,F)=>H<<F-32|T>>>64-F;q.rotlBH=y;const b=(T,H,F)=>T<<F-32|H>>>64-F;q.rotlBL=b;function E(T,H,F,W){const _=(H>>>0)+(W>>>0);return{h:T+F+(_/2**32|0)|0,l:_|0}}const R=(T,H,F)=>(T>>>0)+(H>>>0)+(F>>>0);q.add3L=R;const w=(T,H,F,W)=>H+F+W+(T/2**32|0)|0;q.add3H=w;const $=(T,H,F,W)=>(T>>>0)+(H>>>0)+(F>>>0)+(W>>>0);q.add4L=$;const I=(T,H,F,W,_)=>H+F+W+_+(T/2**32|0)|0;q.add4H=I;const v=(T,H,F,W,_)=>(T>>>0)+(H>>>0)+(F>>>0)+(W>>>0)+(_>>>0);q.add5L=v;const M=(T,H,F,W,_,U)=>H+F+W+_+U+(T/2**32|0)|0;q.add5H=M;const P={fromBig:n,split:r,toBig:s,shrSH:i,shrSL:o,rotrSH:a,rotrSL:c,rotrBH:f,rotrBL:g,rotr32H:l,rotr32L:u,rotlSH:d,rotlSL:h,rotlBH:y,rotlBL:b,add:E,add3L:R,add3H:w,add4L:$,add4H:I,add5H:M,add5L:v};return q.default=P,q}var Ts;function dl(){if(Ts)return Y;Ts=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.sha512_224=Y.sha512_256=Y.sha384=Y.sha512=Y.sha224=Y.sha256=Y.SHA512_256=Y.SHA512_224=Y.SHA384=Y.SHA512=Y.SHA224=Y.SHA256=void 0;const t=ll(),e=hl(),n=Xi(),r=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array(64);class i extends t.HashMD{constructor(w=32){super(64,w,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:w,B:$,C:I,D:v,E:M,F:P,G:T,H}=this;return[w,$,I,v,M,P,T,H]}set(w,$,I,v,M,P,T,H){this.A=w|0,this.B=$|0,this.C=I|0,this.D=v|0,this.E=M|0,this.F=P|0,this.G=T|0,this.H=H|0}process(w,$){for(let _=0;_<16;_++,$+=4)s[_]=w.getUint32($,!1);for(let _=16;_<64;_++){const U=s[_-15],A=s[_-2],O=(0,n.rotr)(U,7)^(0,n.rotr)(U,18)^U>>>3,k=(0,n.rotr)(A,17)^(0,n.rotr)(A,19)^A>>>10;s[_]=k+s[_-7]+O+s[_-16]|0}let{A:I,B:v,C:M,D:P,E:T,F:H,G:F,H:W}=this;for(let _=0;_<64;_++){const U=(0,n.rotr)(T,6)^(0,n.rotr)(T,11)^(0,n.rotr)(T,25),A=W+U+(0,t.Chi)(T,H,F)+r[_]+s[_]|0,k=((0,n.rotr)(I,2)^(0,n.rotr)(I,13)^(0,n.rotr)(I,22))+(0,t.Maj)(I,v,M)|0;W=F,F=H,H=T,T=P+A|0,P=M,M=v,v=I,I=A+k|0}I=I+this.A|0,v=v+this.B|0,M=M+this.C|0,P=P+this.D|0,T=T+this.E|0,H=H+this.F|0,F=F+this.G|0,W=W+this.H|0,this.set(I,v,M,P,T,H,F,W)}roundClean(){(0,n.clean)(s)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,n.clean)(this.buffer)}}Y.SHA256=i;class o extends i{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}Y.SHA224=o;const a=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(R=>BigInt(R))),c=a[0],f=a[1],g=new Uint32Array(80),l=new Uint32Array(80);class u extends t.HashMD{constructor(w=64){super(128,w,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:w,Al:$,Bh:I,Bl:v,Ch:M,Cl:P,Dh:T,Dl:H,Eh:F,El:W,Fh:_,Fl:U,Gh:A,Gl:O,Hh:k,Hl:N}=this;return[w,$,I,v,M,P,T,H,F,W,_,U,A,O,k,N]}set(w,$,I,v,M,P,T,H,F,W,_,U,A,O,k,N){this.Ah=w|0,this.Al=$|0,this.Bh=I|0,this.Bl=v|0,this.Ch=M|0,this.Cl=P|0,this.Dh=T|0,this.Dl=H|0,this.Eh=F|0,this.El=W|0,this.Fh=_|0,this.Fl=U|0,this.Gh=A|0,this.Gl=O|0,this.Hh=k|0,this.Hl=N|0}process(w,$){for(let L=0;L<16;L++,$+=4)g[L]=w.getUint32($),l[L]=w.getUint32($+=4);for(let L=16;L<80;L++){const z=g[L-15]|0,J=l[L-15]|0,ae=e.rotrSH(z,J,1)^e.rotrSH(z,J,8)^e.shrSH(z,J,7),rt=e.rotrSL(z,J,1)^e.rotrSL(z,J,8)^e.shrSL(z,J,7),be=g[L-2]|0,Ee=l[L-2]|0,zt=e.rotrSH(be,Ee,19)^e.rotrBH(be,Ee,61)^e.shrSH(be,Ee,6),Rn=e.rotrSL(be,Ee,19)^e.rotrBL(be,Ee,61)^e.shrSL(be,Ee,6),Vt=e.add4L(rt,Rn,l[L-7],l[L-16]),Mn=e.add4H(Vt,ae,zt,g[L-7],g[L-16]);g[L]=Mn|0,l[L]=Vt|0}let{Ah:I,Al:v,Bh:M,Bl:P,Ch:T,Cl:H,Dh:F,Dl:W,Eh:_,El:U,Fh:A,Fl:O,Gh:k,Gl:N,Hh:m,Hl:D}=this;for(let L=0;L<80;L++){const z=e.rotrSH(_,U,14)^e.rotrSH(_,U,18)^e.rotrBH(_,U,41),J=e.rotrSL(_,U,14)^e.rotrSL(_,U,18)^e.rotrBL(_,U,41),ae=_&A^~_&k,rt=U&O^~U&N,be=e.add5L(D,J,rt,f[L],l[L]),Ee=e.add5H(be,m,z,ae,c[L],g[L]),zt=be|0,Rn=e.rotrSH(I,v,28)^e.rotrBH(I,v,34)^e.rotrBH(I,v,39),Vt=e.rotrSL(I,v,28)^e.rotrBL(I,v,34)^e.rotrBL(I,v,39),Mn=I&M^I&T^M&T,Ya=v&P^v&H^P&H;m=k|0,D=N|0,k=A|0,N=O|0,A=_|0,O=U|0,{h:_,l:U}=e.add(F|0,W|0,Ee|0,zt|0),F=T|0,W=H|0,T=M|0,H=P|0,M=I|0,P=v|0;const Gr=e.add3L(zt,Vt,Ya);I=e.add3H(Gr,Ee,Rn,Mn),v=Gr|0}({h:I,l:v}=e.add(this.Ah|0,this.Al|0,I|0,v|0)),{h:M,l:P}=e.add(this.Bh|0,this.Bl|0,M|0,P|0),{h:T,l:H}=e.add(this.Ch|0,this.Cl|0,T|0,H|0),{h:F,l:W}=e.add(this.Dh|0,this.Dl|0,F|0,W|0),{h:_,l:U}=e.add(this.Eh|0,this.El|0,_|0,U|0),{h:A,l:O}=e.add(this.Fh|0,this.Fl|0,A|0,O|0),{h:k,l:N}=e.add(this.Gh|0,this.Gl|0,k|0,N|0),{h:m,l:D}=e.add(this.Hh|0,this.Hl|0,m|0,D|0),this.set(I,v,M,P,T,H,F,W,_,U,A,O,k,N,m,D)}roundClean(){(0,n.clean)(g,l)}destroy(){(0,n.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Y.SHA512=u;class d extends u{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}Y.SHA384=d;const h=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),y=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class b extends u{constructor(){super(28),this.Ah=h[0]|0,this.Al=h[1]|0,this.Bh=h[2]|0,this.Bl=h[3]|0,this.Ch=h[4]|0,this.Cl=h[5]|0,this.Dh=h[6]|0,this.Dl=h[7]|0,this.Eh=h[8]|0,this.El=h[9]|0,this.Fh=h[10]|0,this.Fl=h[11]|0,this.Gh=h[12]|0,this.Gl=h[13]|0,this.Hh=h[14]|0,this.Hl=h[15]|0}}Y.SHA512_224=b;class E extends u{constructor(){super(32),this.Ah=y[0]|0,this.Al=y[1]|0,this.Bh=y[2]|0,this.Bl=y[3]|0,this.Ch=y[4]|0,this.Cl=y[5]|0,this.Dh=y[6]|0,this.Dl=y[7]|0,this.Eh=y[8]|0,this.El=y[9]|0,this.Fh=y[10]|0,this.Fl=y[11]|0,this.Gh=y[12]|0,this.Gl=y[13]|0,this.Hh=y[14]|0,this.Hl=y[15]|0}}return Y.SHA512_256=E,Y.sha256=(0,n.createHasher)(()=>new i),Y.sha224=(0,n.createHasher)(()=>new o),Y.sha512=(0,n.createHasher)(()=>new u),Y.sha384=(0,n.createHasher)(()=>new d),Y.sha512_256=(0,n.createHasher)(()=>new E),Y.sha512_224=(0,n.createHasher)(()=>new b),Y}var Os;function gl(){if(Os)return Ie;Os=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.sha224=Ie.SHA224=Ie.sha256=Ie.SHA256=void 0;const t=dl();return Ie.SHA256=t.SHA256,Ie.sha256=t.sha256,Ie.SHA224=t.SHA224,Ie.sha224=t.sha224,Ie}var Kn,Hs;function _l(){if(Hs)return Kn;Hs=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=e.length,c=e.charAt(0),f=Math.log(a)/Math.log(256),g=Math.log(256)/Math.log(a);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var y=0,b=0,E=0,R=h.length;E!==R&&h[E]===0;)E++,y++;for(var w=(R-E)*g+1>>>0,$=new Uint8Array(w);E!==R;){for(var I=h[E],v=0,M=w-1;(I!==0||v<b)&&M!==-1;M--,v++)I+=256*$[M]>>>0,$[M]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");b=v,E++}for(var P=w-b;P!==w&&$[P]===0;)P++;for(var T=c.repeat(y);P<w;++P)T+=e.charAt($[P]);return T}function u(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;for(var y=0,b=0,E=0;h[y]===c;)b++,y++;for(var R=(h.length-y)*f+1>>>0,w=new Uint8Array(R);h[y];){var $=h.charCodeAt(y);if($>255)return;var I=n[$];if(I===255)return;for(var v=0,M=R-1;(I!==0||v<E)&&M!==-1;M--,v++)I+=a*w[M]>>>0,w[M]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");E=v,y++}for(var P=R-E;P!==R&&w[P]===0;)P++;for(var T=new Uint8Array(b+(R-P)),H=b;P!==R;)T[H++]=w[P++];return T}function d(h){var y=u(h);if(y)return y;throw new Error("Non-base"+a+" character")}return{encode:l,decodeUnsafe:u,decode:d}}return Kn=t,Kn}var Jn,Ds;function pl(){return Ds||(Ds=1,Jn=_l()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),Jn}var Yn,Rs;function yl(){if(Rs)return Yn;Rs=1;var t=pl();return Yn=function(e){function n(o){var a=Uint8Array.from(o),c=e(a),f=a.length+4,g=new Uint8Array(f);return g.set(a,0),g.set(c.subarray(0,4),a.length),t.encode(g,f)}function r(o){var a=o.slice(0,-4),c=o.slice(-4),f=e(a);if(!(c[0]^f[0]|c[1]^f[1]|c[2]^f[2]|c[3]^f[3]))return a}function s(o){var a=t.decodeUnsafe(o);if(a)return r(a)}function i(o){var a=t.decode(o),c=r(a);if(!c)throw new Error("Invalid checksum");return c}return{encode:n,decode:i,decodeUnsafe:s}},Yn}var Xn,Ms;function bl(){if(Ms)return Xn;Ms=1;var{sha256:t}=gl(),e=yl();function n(r){return t(t(r))}return Xn=e(n),Xn}var ml=bl();const nt=Tr(ml),wl=t=>{if(t.length%2!==0)throw new Error("Hex string must have an even length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n>>1]=parseInt(t.slice(n,n+2),16);return e},Zi=t=>Array.from(t,e=>e.toString(16).padStart(2,"0")).join(""),gn="automerge:",Rt=t=>{const[e,n,...r]=t.split("#");if(r.length>0)throw new Error("Invalid URL: contains multiple heads sections");const s=new RegExp(`^${gn}(\\w+)$`),[,i]=e.match(s)||[],o=i,a=no(o);if(!a)throw new Error("Invalid document URL: "+t);if(n===void 0)return{binaryDocumentId:a,documentId:o};const c=n===""?[]:n.split("|"),f=c.map(g=>{try{return Zi(nt.decode(g))}catch{throw new Error(`Invalid head in URL: ${g}`)}});return{binaryDocumentId:a,hexHeads:f,documentId:o,heads:c}},Qi=t=>{if(t instanceof Uint8Array||typeof t=="string")return gn+(t instanceof Uint8Array?_n(t):t);const{documentId:e,heads:n=void 0}=t;if(e===void 0)throw new Error("Invalid documentId: "+e);const r=e instanceof Uint8Array?_n(e):e;let s=`${gn}${r}`;return n!==void 0&&(n.forEach(i=>{try{nt.decode(i)}catch{throw new Error(`Invalid head: ${i}`)}}),s+="#"+n.join("|")),s},eo=t=>{if(typeof t!="string"||!t||!t.startsWith(gn))return!1;try{const{documentId:e,heads:n}=Rt(t);return!(!to(e)||n&&!n.every(r=>{try{return nt.decode(r),!0}catch{return!1}}))}catch{return!1}},to=t=>{if(typeof t!="string")return!1;const e=no(t);if(e===void 0)return!1;const n=al(e);return Hn(n)},Sl=t=>typeof t=="string"&&Hn(t),xl=()=>{const t=Yi(null,new Uint8Array(16));return Qi({documentId:t})},no=t=>nt.decodeUnsafe(t),_n=t=>nt.encode(t),Ue=t=>t.map(e=>nt.encode(wl(e))),We=t=>t.map(e=>Zi(nt.decode(e))),qt=t=>{if(t instanceof Uint8Array)return _n(t);if(eo(t))return Rt(t).documentId;if(to(t))return t;if(Sl(t)){console.warn("Future versions will not support UUIDs as document IDs; use Automerge URLs instead.");const e=cl(t);return _n(e)}throw new Error(`Invalid AutomergeUrl: '${t}'`)};let dr;try{dr=new TextDecoder}catch{}let V,Ze,C=0;const vl=105,Al=57342,El=57343,Us=57337,Bs=6,ot={};let At=11281e4,je=1681e4,G={},ee,pn,yn=0,Mt=0,se,me,ne=[],gr=[],de,le,It,js={useRecords:!1,mapsAsObjects:!0},Ut=!1,ro=2;try{new Function("")}catch{ro=1/0}class Bt{constructor(e){if(e&&((e.keyMap||e._keyMap)&&!e.useRecords&&(e.useRecords=!1,e.mapsAsObjects=!0),e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[n,r]of Object.entries(e.keyMap))this.mapKey.set(r,n)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let n=new Map;for(let[r,s]of Object.entries(e))n.set(this._keyMap.hasOwnProperty(r)?this._keyMap[r]:r,s);return n}decodeKeys(e){if(!this._keyMap||e.constructor.name!="Map")return e;if(!this._mapKey){this._mapKey=new Map;for(let[r,s]of Object.entries(this._keyMap))this._mapKey.set(s,r)}let n={};return e.forEach((r,s)=>n[we(this._mapKey.has(s)?this._mapKey.get(s):s)]=r),n}mapDecode(e,n){let r=this.decode(e);if(this._keyMap)switch(r.constructor.name){case"Array":return r.map(s=>this.decodeKeys(s))}return r}decode(e,n){if(V)return ao(()=>(br(),this?this.decode(e,n):Bt.prototype.decode.call(js,e,n)));Ze=n>-1?n:e.length,C=0,Mt=0,pn=null,se=null,V=e;try{le=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw V=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof Bt){if(G=this,de=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return ee=this.structures,Gt();(!ee||ee.length>0)&&(ee=[])}else G=js,(!ee||ee.length>0)&&(ee=[]),de=null;return Gt()}decodeMultiple(e,n){let r,s=0;try{let i=e.length;Ut=!0;let o=this?this.decode(e,i):Fr.decode(e,i);if(n){if(n(o)===!1)return;for(;C<i;)if(s=C,n(Gt())===!1)return}else{for(r=[o];C<i;)s=C,r.push(Gt());return r}}catch(i){throw i.lastPosition=s,i.values=r,i}finally{Ut=!1,br()}}}function Gt(){try{let t=K();if(se){if(C>=se.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}C=se.postBundlePosition,se=null}if(C==Ze)ee=null,V=null,me&&(me=null);else if(C>Ze){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}else if(!Ut)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw br(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function K(){let t=V[C++],e=t>>5;if(t=t&31,t>23)switch(t){case 24:t=V[C++];break;case 25:if(e==7)return Tl();t=le.getUint16(C),C+=2;break;case 26:if(e==7){let n=le.getFloat32(C);if(G.useFloat32>2){let r=Pr[(V[C]&127)<<1|V[C+1]>>7];return C+=4,(r*n+(n>0?.5:-.5)>>0)/r}return C+=4,n}t=le.getUint32(C),C+=4;break;case 27:if(e==7){let n=le.getFloat64(C);return C+=8,n}if(e>1){if(le.getUint32(C)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");t=le.getUint32(C+4)}else G.int64AsNumber?(t=le.getUint32(C)*4294967296,t+=le.getUint32(C+4)):t=le.getBigUint64(C);C+=8;break;case 31:switch(e){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let n=[],r,s=0;for(;(r=K())!=ot;){if(s>=At)throw new Error(`Array length exceeds ${At}`);n[s++]=r}return e==4?n:e==3?n.join(""):Buffer.concat(n);case 5:let i;if(G.mapsAsObjects){let o={},a=0;if(G.keyMap)for(;(i=K())!=ot;){if(a++>=je)throw new Error(`Property count exceeds ${je}`);o[we(G.decodeKey(i))]=K()}else for(;(i=K())!=ot;){if(a++>=je)throw new Error(`Property count exceeds ${je}`);o[we(i)]=K()}return o}else{It&&(G.mapsAsObjects=!0,It=!1);let o=new Map;if(G.keyMap){let a=0;for(;(i=K())!=ot;){if(a++>=je)throw new Error(`Map size exceeds ${je}`);o.set(G.decodeKey(i),K())}}else{let a=0;for(;(i=K())!=ot;){if(a++>=je)throw new Error(`Map size exceeds ${je}`);o.set(i,K())}}return o}case 7:return ot;default:throw new Error("Invalid major type for indefinite length "+e)}default:throw new Error("Unknown token "+t)}switch(e){case 0:return t;case 1:return~t;case 2:return kl(t);case 3:if(Mt>=C)return pn.slice(C-yn,(C+=t)-yn);if(Mt==0&&Ze<140&&t<32){let s=t<16?so(t):Cl(t);if(s!=null)return s}return Il(t);case 4:if(t>=At)throw new Error(`Array length exceeds ${At}`);let n=new Array(t);for(let s=0;s<t;s++)n[s]=K();return n;case 5:if(t>=je)throw new Error(`Map size exceeds ${At}`);if(G.mapsAsObjects){let s={};if(G.keyMap)for(let i=0;i<t;i++)s[we(G.decodeKey(K()))]=K();else for(let i=0;i<t;i++)s[we(K())]=K();return s}else{It&&(G.mapsAsObjects=!0,It=!1);let s=new Map;if(G.keyMap)for(let i=0;i<t;i++)s.set(G.decodeKey(K()),K());else for(let i=0;i<t;i++)s.set(K(),K());return s}case 6:if(t>=Us){let s=ee[t&8191];if(s)return s.read||(s.read=_r(s)),s.read();if(t<65536){if(t==El){let i=lt(),o=K(),a=K();yr(o,a);let c={};if(G.keyMap)for(let f=2;f<i;f++){let g=G.decodeKey(a[f-2]);c[we(g)]=K()}else for(let f=2;f<i;f++){let g=a[f-2];c[we(g)]=K()}return c}else if(t==Al){let i=lt(),o=K();for(let a=2;a<i;a++)yr(o++,K());return K()}else if(t==Us)return Ul();if(G.getShared&&($r(),s=ee[t&8191],s))return s.read||(s.read=_r(s)),s.read()}}let r=ne[t];if(r)return r.handlesRead?r(K):r(K());{let s=K();for(let i=0;i<gr.length;i++){let o=gr[i](t,s);if(o!==void 0)return o}return new et(s,t)}case 7:switch(t){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let s=(de||qe())[t];if(s!==void 0)return s;throw new Error("Unknown token "+t)}default:if(isNaN(t)){let s=new Error("Unexpected end of CBOR data");throw s.incomplete=!0,s}throw new Error("Unknown CBOR token "+t)}}const Ls=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function _r(t){if(!t)throw new Error("Structure is required in record definition");function e(){let n=V[C++];if(n=n&31,n>23)switch(n){case 24:n=V[C++];break;case 25:n=le.getUint16(C),C+=2;break;case 26:n=le.getUint32(C),C+=4;break;default:throw new Error("Expected array header, but got "+V[C-1])}let r=this.compiledReader;for(;r;){if(r.propertyCount===n)return r(K);r=r.next}if(this.slowReads++>=ro){let i=this.length==n?this:this.slice(0,n);return r=G.keyMap?new Function("r","return {"+i.map(o=>G.decodeKey(o)).map(o=>Ls.test(o)?we(o)+":r()":"["+JSON.stringify(o)+"]:r()").join(",")+"}"):new Function("r","return {"+i.map(o=>Ls.test(o)?we(o)+":r()":"["+JSON.stringify(o)+"]:r()").join(",")+"}"),this.compiledReader&&(r.next=this.compiledReader),r.propertyCount=n,this.compiledReader=r,r(K)}let s={};if(G.keyMap)for(let i=0;i<n;i++)s[we(G.decodeKey(this[i]))]=K();else for(let i=0;i<n;i++)s[we(this[i])]=K();return s}return t.slowReads=0,e}function we(t){if(typeof t=="string")return t==="__proto__"?"__proto_":t;if(typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t.toString();if(t==null)return t+"";throw new Error("Invalid property name type "+typeof t)}let Il=pr;function pr(t){let e;if(t<16&&(e=so(t)))return e;if(t>64&&dr)return dr.decode(V.subarray(C,C+=t));const n=C+t,r=[];for(e="";C<n;){const s=V[C++];if((s&128)===0)r.push(s);else if((s&224)===192){const i=V[C++]&63;r.push((s&31)<<6|i)}else if((s&240)===224){const i=V[C++]&63,o=V[C++]&63;r.push((s&31)<<12|i<<6|o)}else if((s&248)===240){const i=V[C++]&63,o=V[C++]&63,a=V[C++]&63;let c=(s&7)<<18|i<<12|o<<6|a;c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|c&1023),r.push(c)}else r.push(s);r.length>=4096&&(e+=oe.apply(String,r),r.length=0)}return r.length>0&&(e+=oe.apply(String,r)),e}let oe=String.fromCharCode;function Cl(t){let e=C,n=new Array(t);for(let r=0;r<t;r++){const s=V[C++];if((s&128)>0){C=e;return}n[r]=s}return oe.apply(String,n)}function so(t){if(t<4)if(t<2){if(t===0)return"";{let e=V[C++];if((e&128)>1){C-=1;return}return oe(e)}}else{let e=V[C++],n=V[C++];if((e&128)>0||(n&128)>0){C-=2;return}if(t<3)return oe(e,n);let r=V[C++];if((r&128)>0){C-=3;return}return oe(e,n,r)}else{let e=V[C++],n=V[C++],r=V[C++],s=V[C++];if((e&128)>0||(n&128)>0||(r&128)>0||(s&128)>0){C-=4;return}if(t<6){if(t===4)return oe(e,n,r,s);{let i=V[C++];if((i&128)>0){C-=5;return}return oe(e,n,r,s,i)}}else if(t<8){let i=V[C++],o=V[C++];if((i&128)>0||(o&128)>0){C-=6;return}if(t<7)return oe(e,n,r,s,i,o);let a=V[C++];if((a&128)>0){C-=7;return}return oe(e,n,r,s,i,o,a)}else{let i=V[C++],o=V[C++],a=V[C++],c=V[C++];if((i&128)>0||(o&128)>0||(a&128)>0||(c&128)>0){C-=8;return}if(t<10){if(t===8)return oe(e,n,r,s,i,o,a,c);{let f=V[C++];if((f&128)>0){C-=9;return}return oe(e,n,r,s,i,o,a,c,f)}}else if(t<12){let f=V[C++],g=V[C++];if((f&128)>0||(g&128)>0){C-=10;return}if(t<11)return oe(e,n,r,s,i,o,a,c,f,g);let l=V[C++];if((l&128)>0){C-=11;return}return oe(e,n,r,s,i,o,a,c,f,g,l)}else{let f=V[C++],g=V[C++],l=V[C++],u=V[C++];if((f&128)>0||(g&128)>0||(l&128)>0||(u&128)>0){C-=12;return}if(t<14){if(t===12)return oe(e,n,r,s,i,o,a,c,f,g,l,u);{let d=V[C++];if((d&128)>0){C-=13;return}return oe(e,n,r,s,i,o,a,c,f,g,l,u,d)}}else{let d=V[C++],h=V[C++];if((d&128)>0||(h&128)>0){C-=14;return}if(t<15)return oe(e,n,r,s,i,o,a,c,f,g,l,u,d,h);let y=V[C++];if((y&128)>0){C-=15;return}return oe(e,n,r,s,i,o,a,c,f,g,l,u,d,h,y)}}}}}function kl(t){return G.copyBuffers?Uint8Array.prototype.slice.call(V,C,C+=t):V.subarray(C,C+=t)}let io=new Float32Array(1),Kt=new Uint8Array(io.buffer,0,4);function Tl(){let t=V[C++],e=V[C++],n=(t&127)>>2;if(n===31)return e||t&3?NaN:t&128?-1/0:1/0;if(n===0){let r=((t&3)<<8|e)/16777216;return t&128?-r:r}return Kt[3]=t&128|(n>>1)+56,Kt[2]=(t&7)<<5|e>>3,Kt[1]=e<<5,Kt[0]=0,io[0]}new Array(4096);class et{constructor(e,n){this.value=e,this.tag=n}}ne[0]=t=>new Date(t);ne[1]=t=>new Date(Math.round(t*1e3));ne[2]=t=>{let e=BigInt(0);for(let n=0,r=t.byteLength;n<r;n++)e=BigInt(t[n])+(e<<BigInt(8));return e};ne[3]=t=>BigInt(-1)-ne[2](t);ne[4]=t=>+(t[1]+"e"+t[0]);ne[5]=t=>t[1]*Math.exp(t[0]*Math.log(2));const yr=(t,e)=>{t=t-57344;let n=ee[t];n&&n.isShared&&((ee.restoreStructures||(ee.restoreStructures=[]))[t]=n),ee[t]=e,e.read=_r(e)};ne[vl]=t=>{let e=t.length,n=t[1];yr(t[0],n);let r={};for(let s=2;s<e;s++){let i=n[s-2];r[we(i)]=t[s]}return r};ne[14]=t=>se?se[0].slice(se.position0,se.position0+=t):new et(t,14);ne[15]=t=>se?se[1].slice(se.position1,se.position1+=t):new et(t,15);let Ol={Error,RegExp};ne[27]=t=>(Ol[t[0]]||Error)(t[1],t[2]);const oo=t=>{if(V[C++]!=132){let n=new Error("Packed values structure must be followed by a 4 element array");throw V.length<C&&(n.incomplete=!0),n}let e=t();if(!e||!e.length){let n=new Error("Packed values structure must be followed by a 4 element array");throw n.incomplete=!0,n}return de=de?e.concat(de.slice(e.length)):e,de.prefixes=t(),de.suffixes=t(),t()};oo.handlesRead=!0;ne[51]=oo;ne[Bs]=t=>{if(!de)if(G.getShared)$r();else return new et(t,Bs);if(typeof t=="number")return de[16+(t>=0?2*t:-2*t-1)];let e=new Error("No support for non-integer packed references yet");throw t===void 0&&(e.incomplete=!0),e};ne[28]=t=>{me||(me=new Map,me.id=0);let e=me.id++,n=C,r=V[C],s;r>>5==4?s=[]:s={};let i={target:s};me.set(e,i);let o=t();return i.used?(Object.getPrototypeOf(s)!==Object.getPrototypeOf(o)&&(C=n,s=o,me.set(e,{target:s}),o=t()),Object.assign(s,o)):(i.target=o,o)};ne[28].handlesRead=!0;ne[29]=t=>{let e=me.get(t);return e.used=!0,e.target};ne[258]=t=>new Set(t);(ne[259]=t=>(G.mapsAsObjects&&(G.mapsAsObjects=!1,It=!0),t())).handlesRead=!0;function at(t,e){return typeof t=="string"?t+e:t instanceof Array?t.concat(e):Object.assign({},t,e)}function qe(){if(!de)if(G.getShared)$r();else throw new Error("No packed values available");return de}const Hl=1399353956;gr.push((t,e)=>{if(t>=225&&t<=255)return at(qe().prefixes[t-224],e);if(t>=28704&&t<=32767)return at(qe().prefixes[t-28672],e);if(t>=1879052288&&t<=2147483647)return at(qe().prefixes[t-1879048192],e);if(t>=216&&t<=223)return at(e,qe().suffixes[t-216]);if(t>=27647&&t<=28671)return at(e,qe().suffixes[t-27639]);if(t>=1811940352&&t<=1879048191)return at(e,qe().suffixes[t-1811939328]);if(t==Hl)return{packedValues:de,structures:ee.slice(0),version:e};if(t==55799)return e});const Dl=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,$s=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],Rl=[64,68,69,70,71,72,77,78,79,85,86];for(let t=0;t<$s.length;t++)Ml($s[t],Rl[t]);function Ml(t,e){let n="get"+t.name.slice(0,-5),r;typeof t=="function"?r=t.BYTES_PER_ELEMENT:t=null;for(let s=0;s<2;s++){if(!s&&r==1)continue;let i=r==2?1:r==4?2:r==8?3:0;ne[s?e:e-4]=r==1||s==Dl?o=>{if(!t)throw new Error("Could not find typed array for code "+e);return!G.copyBuffers&&(r===1||r===2&&!(o.byteOffset&1)||r===4&&!(o.byteOffset&3)||r===8&&!(o.byteOffset&7))?new t(o.buffer,o.byteOffset,o.byteLength>>i):new t(Uint8Array.prototype.slice.call(o,0).buffer)}:o=>{if(!t)throw new Error("Could not find typed array for code "+e);let a=new DataView(o.buffer,o.byteOffset,o.byteLength),c=o.length>>i,f=new t(c),g=a[n];for(let l=0;l<c;l++)f[l]=g.call(a,l<<i,s);return f}}}function Ul(){let t=lt(),e=C+K();for(let r=2;r<t;r++){let s=lt();C+=s}let n=C;return C=e,se=[pr(lt()),pr(lt())],se.position0=0,se.position1=0,se.postBundlePosition=C,C=n,K()}function lt(){let t=V[C++]&31;if(t>23)switch(t){case 24:t=V[C++];break;case 25:t=le.getUint16(C),C+=2;break;case 26:t=le.getUint32(C),C+=4;break}return t}function $r(){if(G.getShared){let t=ao(()=>(V=null,G.getShared()))||{},e=t.structures||[];G.sharedVersion=t.version,de=G.sharedValues=t.packedValues,ee===!0?G.structures=ee=e:ee.splice.apply(ee,[0,e.length].concat(e))}}function ao(t){let e=Ze,n=C,r=yn,s=Mt,i=pn,o=me,a=se,c=new Uint8Array(V.slice(0,Ze)),f=ee,g=G,l=Ut,u=t();return Ze=e,C=n,yn=r,Mt=s,pn=i,me=o,se=a,V=c,Ut=l,ee=f,G=g,le=new DataView(V.buffer,V.byteOffset,V.byteLength),u}function br(){V=null,me=null,ee=null}const Pr=new Array(147);for(let t=0;t<256;t++)Pr[t]=+("1e"+Math.floor(45.15-t*.30103));let Fr=new Bt({useRecords:!1});const Bl=Fr.decode;Fr.decodeMultiple;let en;try{en=new TextEncoder}catch{}let mr,co;const Dn=typeof globalThis=="object"&&globalThis.Buffer,Ft=typeof Dn<"u",Zn=Ft?Dn.allocUnsafeSlow:Uint8Array,Ps=Ft?Dn:Uint8Array,Fs=256,zs=Ft?4294967296:2144337920;let Qn,S,Z,p=0,ze,re=null;const jl=61440,Ll=/[\u0080-\uFFFF]/,_e=Symbol("record-id");class uo extends Bt{constructor(e){super(e),this.offset=0;let n,r,s,i,o;e=e||{};let a=Ps.prototype.utf8Write?function(_,U,A){return S.utf8Write(_,U,A)}:en&&en.encodeInto?function(_,U){return en.encodeInto(_,S.subarray(U)).written}:!1,c=this,f=e.structures||e.saveStructures,g=e.maxSharedStructures;if(g==null&&(g=f?128:0),g>8190)throw new Error("Maximum maxSharedStructure is 8190");let l=e.sequential;l&&(g=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let u,d,h=e.sharedValues,y;if(h){y=Object.create(null);for(let _=0,U=h.length;_<U;_++)y[h[_]]=_}let b=[],E=0,R=0;this.mapEncode=function(_,U){if(this._keyMap&&!this._mapped)switch(_.constructor.name){case"Array":_=_.map(A=>this.encodeKeys(A));break}return this.encode(_,U)},this.encode=function(_,U){if(S||(S=new Zn(8192),Z=new DataView(S.buffer,0,8192),p=0),ze=S.length-10,ze-p<2048?(S=new Zn(S.length),Z=new DataView(S.buffer,0,S.length),ze=S.length-10,p=0):U===Ws&&(p=p+7&2147483640),n=p,c.useSelfDescribedHeader&&(Z.setUint32(p,3654940416),p+=3),o=c.structuredClone?new Map:null,c.bundleStrings&&typeof _!="string"?(re=[],re.size=1/0):re=null,r=c.structures,r){if(r.uninitialized){let O=c.getShared()||{};c.structures=r=O.structures||[],c.sharedVersion=O.version;let k=c.sharedValues=O.packedValues;if(k){y={};for(let N=0,m=k.length;N<m;N++)y[k[N]]=N}}let A=r.length;if(A>g&&!l&&(A=g),!r.transitions){r.transitions=Object.create(null);for(let O=0;O<A;O++){let k=r[O];if(!k)continue;let N,m=r.transitions;for(let D=0,L=k.length;D<L;D++){m[_e]===void 0&&(m[_e]=O);let z=k[D];N=m[z],N||(N=m[z]=Object.create(null)),m=N}m[_e]=O|1048576}}l||(r.nextId=A)}if(s&&(s=!1),i=r||[],d=y,e.pack){let A=new Map;if(A.values=[],A.encoder=c,A.maxValues=e.maxPrivatePackedValues||(y?16:1/0),A.objectMap=y||!1,A.samplingPackedValues=u,tn(_,A),A.values.length>0){S[p++]=216,S[p++]=51,De(4);let O=A.values;w(O),De(0),De(0),d=Object.create(y||null);for(let k=0,N=O.length;k<N;k++)d[O[k]]=k}}Qn=U&tr;try{if(Qn)return;if(w(_),re&&Ns(n,w),c.offset=p,o&&o.idsToInsert){p+=o.idsToInsert.length*2,p>ze&&I(p),c.offset=p;let A=Fl(S.subarray(n,p),o.idsToInsert);return o=null,A}return U&Ws?(S.start=n,S.end=p,S):S.subarray(n,p)}finally{if(r){if(R<10&&R++,r.length>g&&(r.length=g),E>1e4)r.transitions=null,R=0,E=0,b.length>0&&(b=[]);else if(b.length>0&&!l){for(let A=0,O=b.length;A<O;A++)b[A][_e]=void 0;b=[]}}if(s&&c.saveShared){c.structures.length>g&&(c.structures=c.structures.slice(0,g));let A=S.subarray(n,p);return c.updateSharedData()===!1?c.encode(_):A}U&zl&&(p=n)}},this.findCommonStringsToPack=()=>(u=new Map,y||(y=Object.create(null)),_=>{let U=_&&_.threshold||4,A=this.pack?_.maxPrivatePackedValues||16:0;h||(h=this.sharedValues=[]);for(let[O,k]of u)k.count>U&&(y[O]=A++,h.push(O),s=!0);for(;this.saveShared&&this.updateSharedData()===!1;);u=null});const w=_=>{p>ze&&(S=I(p));var U=typeof _,A;if(U==="string"){if(d){let m=d[_];if(m>=0){m<16?S[p++]=m+224:(S[p++]=198,m&1?w(15-m>>1):w(m-16>>1));return}else if(u&&!e.pack){let D=u.get(_);D?D.count++:u.set(_,{count:1})}}let O=_.length;if(re&&O>=4&&O<1024){if((re.size+=O)>jl){let D,L=(re[0]?re[0].length*3+re[1].length:0)+10;p+L>ze&&(S=I(p+L)),S[p++]=217,S[p++]=223,S[p++]=249,S[p++]=re.position?132:130,S[p++]=26,D=p-n,p+=4,re.position&&Ns(n,w),re=["",""],re.size=0,re.position=D}let m=Ll.test(_);re[m?0:1]+=_,S[p++]=m?206:207,w(O);return}let k;O<32?k=1:O<256?k=2:O<65536?k=3:k=5;let N=O*3;if(p+N>ze&&(S=I(p+N)),O<64||!a){let m,D,L,z=p+k;for(m=0;m<O;m++)D=_.charCodeAt(m),D<128?S[z++]=D:D<2048?(S[z++]=D>>6|192,S[z++]=D&63|128):(D&64512)===55296&&((L=_.charCodeAt(m+1))&64512)===56320?(D=65536+((D&1023)<<10)+(L&1023),m++,S[z++]=D>>18|240,S[z++]=D>>12&63|128,S[z++]=D>>6&63|128,S[z++]=D&63|128):(S[z++]=D>>12|224,S[z++]=D>>6&63|128,S[z++]=D&63|128);A=z-p-k}else A=a(_,p+k,N);A<24?S[p++]=96|A:A<256?(k<2&&S.copyWithin(p+2,p+1,p+1+A),S[p++]=120,S[p++]=A):A<65536?(k<3&&S.copyWithin(p+3,p+2,p+2+A),S[p++]=121,S[p++]=A>>8,S[p++]=A&255):(k<5&&S.copyWithin(p+5,p+3,p+3+A),S[p++]=122,Z.setUint32(p,A),p+=4),p+=A}else if(U==="number")if(!this.alwaysUseFloat&&_>>>0===_)_<24?S[p++]=_:_<256?(S[p++]=24,S[p++]=_):_<65536?(S[p++]=25,S[p++]=_>>8,S[p++]=_&255):(S[p++]=26,Z.setUint32(p,_),p+=4);else if(!this.alwaysUseFloat&&_>>0===_)_>=-24?S[p++]=31-_:_>=-256?(S[p++]=56,S[p++]=~_):_>=-65536?(S[p++]=57,Z.setUint16(p,~_),p+=2):(S[p++]=58,Z.setUint32(p,~_),p+=4);else{let O;if((O=this.useFloat32)>0&&_<4294967296&&_>=-2147483648){S[p++]=250,Z.setFloat32(p,_);let k;if(O<4||(k=_*Pr[(S[p]&127)<<1|S[p+1]>>7])>>0===k){p+=4;return}else p--}S[p++]=251,Z.setFloat64(p,_),p+=8}else if(U==="object")if(!_)S[p++]=246;else{if(o){let k=o.get(_);if(k){if(S[p++]=216,S[p++]=29,S[p++]=25,!k.references){let N=o.idsToInsert||(o.idsToInsert=[]);k.references=[],N.push(k)}k.references.push(p-n),p+=2;return}else o.set(_,{offset:p-n})}let O=_.constructor;if(O===Object)$(_);else if(O===Array){A=_.length,A<24?S[p++]=128|A:De(A);for(let k=0;k<A;k++)w(_[k])}else if(O===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(S[p++]=217,S[p++]=1,S[p++]=3),A=_.size,A<24?S[p++]=160|A:A<256?(S[p++]=184,S[p++]=A):A<65536?(S[p++]=185,S[p++]=A>>8,S[p++]=A&255):(S[p++]=186,Z.setUint32(p,A),p+=4),c.keyMap)for(let[k,N]of _)w(c.encodeKey(k)),w(N);else for(let[k,N]of _)w(k),w(N);else{for(let k=0,N=mr.length;k<N;k++){let m=co[k];if(_ instanceof m){let D=mr[k],L=D.tag;L==null&&(L=D.getTag&&D.getTag.call(this,_)),L<24?S[p++]=192|L:L<256?(S[p++]=216,S[p++]=L):L<65536?(S[p++]=217,S[p++]=L>>8,S[p++]=L&255):L>-1&&(S[p++]=218,Z.setUint32(p,L),p+=4),D.encode.call(this,_,w,I);return}}if(_[Symbol.iterator]){if(Qn){let k=new Error("Iterable should be serialized as iterator");throw k.iteratorNotHandled=!0,k}S[p++]=159;for(let k of _)w(k);S[p++]=255;return}if(_[Symbol.asyncIterator]||er(_)){let k=new Error("Iterable/blob should be serialized as iterator");throw k.iteratorNotHandled=!0,k}if(this.useToJSON&&_.toJSON){const k=_.toJSON();if(k!==_)return w(k)}$(_)}}else if(U==="boolean")S[p++]=_?245:244;else if(U==="bigint"){if(_<BigInt(1)<<BigInt(64)&&_>=0)S[p++]=27,Z.setBigUint64(p,_);else if(_>-(BigInt(1)<<BigInt(64))&&_<0)S[p++]=59,Z.setBigUint64(p,-_-BigInt(1));else if(this.largeBigIntToFloat)S[p++]=251,Z.setFloat64(p,Number(_));else{_>=BigInt(0)?S[p++]=194:(S[p++]=195,_=BigInt(-1)-_);let O=[];for(;_;)O.push(Number(_&BigInt(255))),_>>=BigInt(8);wr(new Uint8Array(O.reverse()),I);return}p+=8}else if(U==="undefined")S[p++]=247;else throw new Error("Unknown type: "+U)},$=this.useRecords===!1?this.variableMapSize?_=>{let U=Object.keys(_),A=Object.values(_),O=U.length;if(O<24?S[p++]=160|O:O<256?(S[p++]=184,S[p++]=O):O<65536?(S[p++]=185,S[p++]=O>>8,S[p++]=O&255):(S[p++]=186,Z.setUint32(p,O),p+=4),c.keyMap)for(let k=0;k<O;k++)w(c.encodeKey(U[k])),w(A[k]);else for(let k=0;k<O;k++)w(U[k]),w(A[k])}:_=>{S[p++]=185;let U=p-n;p+=2;let A=0;if(c.keyMap)for(let O in _)(typeof _.hasOwnProperty!="function"||_.hasOwnProperty(O))&&(w(c.encodeKey(O)),w(_[O]),A++);else for(let O in _)(typeof _.hasOwnProperty!="function"||_.hasOwnProperty(O))&&(w(O),w(_[O]),A++);S[U+++n]=A>>8,S[U+n]=A&255}:(_,U)=>{let A,O=i.transitions||(i.transitions=Object.create(null)),k=0,N=0,m,D;if(this.keyMap){D=Object.keys(_).map(z=>this.encodeKey(z)),N=D.length;for(let z=0;z<N;z++){let J=D[z];A=O[J],A||(A=O[J]=Object.create(null),k++),O=A}}else for(let z in _)(typeof _.hasOwnProperty!="function"||_.hasOwnProperty(z))&&(A=O[z],A||(O[_e]&1048576&&(m=O[_e]&65535),A=O[z]=Object.create(null),k++),O=A,N++);let L=O[_e];if(L!==void 0)L&=65535,S[p++]=217,S[p++]=L>>8|224,S[p++]=L&255;else if(D||(D=O.__keys__||(O.__keys__=Object.keys(_))),m===void 0?(L=i.nextId++,L||(L=0,i.nextId=1),L>=Fs&&(i.nextId=(L=g)+1)):L=m,i[L]=D,L<g){S[p++]=217,S[p++]=L>>8|224,S[p++]=L&255,O=i.transitions;for(let z=0;z<N;z++)(O[_e]===void 0||O[_e]&1048576)&&(O[_e]=L),O=O[D[z]];O[_e]=L|1048576,s=!0}else{if(O[_e]=L,Z.setUint32(p,3655335680),p+=3,k&&(E+=R*k),b.length>=Fs-g&&(b.shift()[_e]=void 0),b.push(O),De(N+2),w(57344+L),w(D),U)return;for(let z in _)(typeof _.hasOwnProperty!="function"||_.hasOwnProperty(z))&&w(_[z]);return}if(N<24?S[p++]=128|N:De(N),!U)for(let z in _)(typeof _.hasOwnProperty!="function"||_.hasOwnProperty(z))&&w(_[z])},I=_=>{let U;if(_>16777216){if(_-n>zs)throw new Error("Encoded buffer would be larger than maximum buffer size");U=Math.min(zs,Math.round(Math.max((_-n)*(_>67108864?1.25:2),4194304)/4096)*4096)}else U=(Math.max(_-n<<2,S.length-1)>>12)+1<<12;let A=new Zn(U);return Z=new DataView(A.buffer,0,U),S.copy?S.copy(A,0,n,_):A.set(S.slice(n,_)),p-=n,n=0,ze=A.length-10,S=A};let v=100,M=1e3;this.encodeAsIterable=function(_,U){return F(_,U,P)},this.encodeAsAsyncIterable=function(_,U){return F(_,U,W)};function*P(_,U,A){let O=_.constructor;if(O===Object){let k=c.useRecords!==!1;k?$(_,!0):Vs(Object.keys(_).length,160);for(let N in _){let m=_[N];k||w(N),m&&typeof m=="object"?U[N]?yield*P(m,U[N]):yield*T(m,U,N):w(m)}}else if(O===Array){let k=_.length;De(k);for(let N=0;N<k;N++){let m=_[N];m&&(typeof m=="object"||p-n>v)?U.element?yield*P(m,U.element):yield*T(m,U,"element"):w(m)}}else if(_[Symbol.iterator]&&!_.buffer){S[p++]=159;for(let k of _)k&&(typeof k=="object"||p-n>v)?U.element?yield*P(k,U.element):yield*T(k,U,"element"):w(k);S[p++]=255}else er(_)?(Vs(_.size,64),yield S.subarray(n,p),yield _,H()):_[Symbol.asyncIterator]?(S[p++]=159,yield S.subarray(n,p),yield _,H(),S[p++]=255):w(_);A&&p>n?yield S.subarray(n,p):p-n>v&&(yield S.subarray(n,p),H())}function*T(_,U,A){let O=p-n;try{w(_),p-n>v&&(yield S.subarray(n,p),H())}catch(k){if(k.iteratorNotHandled)U[A]={},p=n+O,yield*P.call(this,_,U[A]);else throw k}}function H(){v=M,c.encode(null,tr)}function F(_,U,A){return U&&U.chunkThreshold?v=M=U.chunkThreshold:v=100,_&&typeof _=="object"?(c.encode(null,tr),A(_,c.iterateProperties||(c.iterateProperties={}),!0)):[c.encode(_)]}async function*W(_,U){for(let A of P(_,U,!0)){let O=A.constructor;if(O===Ps||O===Uint8Array)yield A;else if(er(A)){let k=A.stream().getReader(),N;for(;!(N=await k.read()).done;)yield N.value}else if(A[Symbol.asyncIterator])for await(let k of A)H(),k?yield*W(k,U.async||(U.async={})):yield c.encode(k);else yield A}}}useBuffer(e){S=e,Z=new DataView(S.buffer,S.byteOffset,S.byteLength),p=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let n=this.structures.slice(0),r=new fo(n,this.sharedValues,this.sharedVersion),s=this.saveShared(r,i=>(i&&i.version||0)==e);return s===!1?(r=this.getShared()||{},this.structures=r.structures||[],this.sharedValues=r.packedValues,this.sharedVersion=r.version,this.structures.nextId=this.structures.length):n.forEach((i,o)=>this.structures[o]=i),s}}function Vs(t,e){t<24?S[p++]=e|t:t<256?(S[p++]=e|24,S[p++]=t):t<65536?(S[p++]=e|25,S[p++]=t>>8,S[p++]=t&255):(S[p++]=e|26,Z.setUint32(p,t),p+=4)}class fo{constructor(e,n,r){this.structures=e,this.packedValues=n,this.version=r}}function De(t){t<24?S[p++]=128|t:t<256?(S[p++]=152,S[p++]=t):t<65536?(S[p++]=153,S[p++]=t>>8,S[p++]=t&255):(S[p++]=154,Z.setUint32(p,t),p+=4)}const $l=typeof Blob>"u"?function(){}:Blob;function er(t){if(t instanceof $l)return!0;let e=t[Symbol.toStringTag];return e==="Blob"||e==="File"}function tn(t,e){switch(typeof t){case"string":if(t.length>3){if(e.objectMap[t]>-1||e.values.length>=e.maxValues)return;let r=e.get(t);if(r)++r.count==2&&e.values.push(t);else if(e.set(t,{count:1}),e.samplingPackedValues){let s=e.samplingPackedValues.get(t);s?s.count++:e.samplingPackedValues.set(t,{count:1})}}break;case"object":if(t)if(t instanceof Array)for(let r=0,s=t.length;r<s;r++)tn(t[r],e);else{let r=!e.encoder.useRecords;for(var n in t)t.hasOwnProperty(n)&&(r&&tn(n,e),tn(t[n],e))}break;case"function":console.log(t)}}const Pl=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;co=[Date,Set,Error,RegExp,et,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,fo];mr=[{tag:1,encode(t,e){let n=t.getTime()/1e3;(this.useTimestamp32||t.getMilliseconds()===0)&&n>=0&&n<4294967296?(S[p++]=26,Z.setUint32(p,n),p+=4):(S[p++]=251,Z.setFloat64(p,n),p+=8)}},{tag:258,encode(t,e){let n=Array.from(t);e(n)}},{tag:27,encode(t,e){e([t.name,t.message])}},{tag:27,encode(t,e){e(["RegExp",t.source,t.flags])}},{getTag(t){return t.tag},encode(t,e){e(t.value)}},{encode(t,e,n){wr(t,n)}},{getTag(t){if(t.constructor===Uint8Array&&(this.tagUint8Array||Ft&&this.tagUint8Array!==!1))return 64},encode(t,e,n){wr(t,n)}},Oe(68,1),Oe(69,2),Oe(70,4),Oe(71,8),Oe(72,1),Oe(77,2),Oe(78,4),Oe(79,8),Oe(85,4),Oe(86,8),{encode(t,e){let n=t.packedValues||[],r=t.structures||[];if(n.values.length>0){S[p++]=216,S[p++]=51,De(4);let s=n.values;e(s),De(0),De(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let i=0,o=s.length;i<o;i++)packedObjectMap[s[i]]=i}if(r){Z.setUint32(p,3655335424),p+=3;let s=r.slice(0);s.unshift(57344),s.push(new et(t.version,1399353956)),e(s)}else e(new et(t.version,1399353956))}}];function Oe(t,e){return!Pl&&e>1&&(t-=4),{tag:t,encode:function(r,s){let i=r.byteLength,o=r.byteOffset||0,a=r.buffer||r;s(Ft?Dn.from(a,o,i):new Uint8Array(a,o,i))}}}function wr(t,e){let n=t.byteLength;n<24?S[p++]=64+n:n<256?(S[p++]=88,S[p++]=n):n<65536?(S[p++]=89,S[p++]=n>>8,S[p++]=n&255):(S[p++]=90,Z.setUint32(p,n),p+=4),p+n>=S.length&&e(p+n),S.set(t.buffer?t:new Uint8Array(t),p),p+=n}function Fl(t,e){let n,r=e.length*2,s=t.length-r;e.sort((i,o)=>i.offset>o.offset?1:-1);for(let i=0;i<e.length;i++){let o=e[i];o.id=i;for(let a of o.references)t[a++]=i>>8,t[a]=i&255}for(;n=e.pop();){let i=n.offset;t.copyWithin(i+r,i,s),r-=2;let o=i+r;t[o++]=216,t[o++]=28,s=i}return t}function Ns(t,e){Z.setUint32(re.position+t,p-re.position-t+1);let n=re;re=null,e(n[0]),e(n[1])}let zr=new uo({useRecords:!1});zr.encode;zr.encodeAsIterable;zr.encodeAsAsyncIterable;const Ws=512,zl=1024,tr=2048;function Vl(t){return new uo({tagUint8Array:!1,useRecords:!1}).encode(t)}const Nl=(t,e)=>t.length===e.length&&t.every((n,r)=>n===e[r]),Vr=(t,e)=>Nl(t,e),Wl=async(t,e)=>{let n;const r=new Promise((s,i)=>{n=setTimeout(()=>i(new ql(`withTimeout: timed out after ${e}ms`)),e)});try{return await Promise.race([t,r])}finally{clearTimeout(n)}};class ql extends Error{constructor(e){super(e),this.name="TimeoutError"}}class bn extends bt{documentId;#t;#e;#r;#n=Ce();#s=6e4;#o={};#c=new Map;constructor(e,n={}){super(),this.documentId=e,"timeoutDelay"in n&&n.timeoutDelay&&(this.#s=n.timeoutDelay),"heads"in n&&(this.#r=n.heads);const r=Ce();this.#t=tt(`automerge-repo:dochandle:${this.documentId.slice(0,5)}`);const s=this.#s,i=tl({actions:{onUpdate:Et(({context:o,event:a})=>{const c=o.doc;Qf(a,Gs);const{callback:f}=a.payload;return{doc:f(c)}}),onDelete:Et(()=>(this.emit("delete",{handle:this}),{doc:Ce()})),onUnavailable:Et(()=>({doc:Ce()})),onUnload:Et(()=>({doc:Ce()}))}}).createMachine({initial:"idle",context:{documentId:e,doc:r},on:{UPDATE:{actions:"onUpdate"},UNLOAD:".unloaded",DELETE:".deleted"},states:{idle:{on:{BEGIN:"loading"}},loading:{on:{REQUEST:"requesting",DOC_READY:"ready"},after:{[s]:"unavailable"}},requesting:{on:{DOC_UNAVAILABLE:"unavailable",DOC_READY:"ready"},after:{[s]:"unavailable"}},unavailable:{entry:"onUnavailable",on:{DOC_READY:"ready"}},ready:{},unloaded:{entry:"onUnload",on:{RELOAD:"loading"}},deleted:{entry:"onDelete",type:"final"}}});this.#e=Dt(i),this.#e.subscribe(o=>{const a=this.#n,c=o.context.doc;this.#t(`â ${o.value} %o`,c),this.#u(a,c)}),this.#e.start(),this.begin()}get#a(){return this.#e?.getSnapshot().context.doc}get#i(){return this.#e?.getSnapshot().value}#f(e){const n=Array.isArray(e)?e:[e];return rl(this.#e,r=>n.some(s=>r.matches(s)),{timeout:this.#s*2})}#l(e){let n=null;if(this.#e.send({type:Gs,payload:{callback:r=>{try{return e(r)}catch(s){return n=s,r}}}}),n)throw n}#u(e,n){const r=$e(e),s=$e(n);if(!Vr(Ue(s),Ue(r))){this.emit("heads-changed",{handle:this,doc:n});const o=Pn(n,r,s);o.length>0&&this.emit("change",{handle:this,doc:n,patches:o,patchInfo:{before:e,after:n,source:"change"}}),this.isReady()||this.#e.send({type:qs})}this.#n=n}get url(){return Qi({documentId:this.documentId,heads:this.#r})}isReady=()=>this.inState(["ready"]);isUnloaded=()=>this.inState(["unloaded"]);isDeleted=()=>this.inState(["deleted"]);isUnavailable=()=>this.inState(["unavailable"]);inState=e=>e.some(n=>this.#e.getSnapshot().matches(n));get state(){return this.#e.getSnapshot().value}async whenReady(e=["ready"]){await Wl(this.#f(e),this.#s)}doc(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#r?ku(this.#a,We(this.#r)):this.#a}docSync(){return console.warn("docSync is deprecated. Use doc() instead. This function will be removed as part of the 2.0 release."),this.doc()}heads(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#r?this.#r:Ue($e(this.#a))}begin(){this.#e.send({type:Jl})}history(){if(this.isReady())return Pu(this.#a).map(e=>Ue([e]))}view(e){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling view().`);const n=JSON.stringify(e),r=this.#c.get(n);if(r)return r;const s=new bn(this.documentId,{heads:e,timeoutDelay:this.#s});return s.update(()=>un(this.#a)),s.doneLoading(),this.#c.set(n,s),s}diff(e,n){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling diff().`);const r=this.#a;if(!r)throw new Error("Document not available");if(e instanceof bn){if(!e.isReady())throw new Error("Cannot diff against a handle that isn't ready");const o=e.heads();if(!o)throw new Error("Other document's heads not available");const a=cs(un(r),e.doc());return Pn(a,We(this.heads()),We(o))}const s=n?e:this.heads()||[],i=n||e;return Pn(r,We(s),We(i))}metadata(e){if(this.isReady())return e||(e=this.heads()[0]),Fu(this.#a,We([e])[0])||void 0}update(e){this.#l(e)}doneLoading(){this.#e.send({type:qs})}setSyncInfo(e,n){this.#o[e]=n,this.emit("remote-heads",{storageId:e,heads:n.lastHeads,timestamp:n.lastSyncTimestamp})}getRemoteHeads(e){return this.#o[e]?.lastHeads}getSyncInfo(e){return this.#o[e]}change(e,n={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is in ${this.state} and not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#r)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);this.#l(r=>Ou(r,n,e))}changeAt(e,n,r={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#r)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);let s;return this.#l(i=>{const o=Hu(i,We(e),r,n);return s=o.newHeads?Ue(o.newHeads):void 0,o.newDoc}),s}isReadOnly(){return!!this.#r}merge(e){if(!this.isReady()||!e.isReady())throw new Error("Both handles must be ready to merge");if(this.#r)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);const n=e.doc();this.update(r=>cs(r,n))}unavailable(){this.#e.send({type:eh})}request(){this.#i==="loading"&&this.#e.send({type:Yl})}unload(){this.#e.send({type:Xl})}reload(){this.#e.send({type:Zl})}delete(){this.#e.send({type:Ql})}broadcast(e){this.emit("ephemeral-message-outbound",{handle:this,data:new Uint8Array(Vl(e))})}metrics(){return kr(this.#a)}}const Gl={REQUESTING:"requesting",READY:"ready",UNLOADED:"unloaded",DELETED:"deleted",UNAVAILABLE:"unavailable"},{REQUESTING:Jt,READY:Re,UNLOADED:Kl,DELETED:Yt,UNAVAILABLE:ye}=Gl,Jl="BEGIN",Yl="REQUEST",qs="DOC_READY",Gs="UPDATE",Xl="UNLOAD",Zl="RELOAD",Ql="DELETE",eh="DOC_UNAVAILABLE";class th extends bt{#t=new Map;#e=new Set;#r=new Map;#n=new Set;#s=new Map;#o=tt("automerge-repo:remote-heads-subscriptions");subscribeToRemotes(e){this.#o("subscribeToRemotes",e);const n=[];for(const r of e)this.#e.has(r)||(this.#e.add(r),n.push(r));n.length>0&&this.emit("change-remote-subs",{add:n,peers:Array.from(this.#n)})}unsubscribeFromRemotes(e){this.#o("subscribeToRemotes",e);const n=[];for(const r of e)this.#e.has(r)&&(this.#e.delete(r),this.#r.has(r)||n.push(r));n.length>0&&this.emit("change-remote-subs",{remove:n,peers:Array.from(this.#n)})}handleControlMessage(e){const n=[],r=[],s=[];if(this.#o("handleControlMessage",e),e.add)for(const i of e.add){let o=this.#r.get(i);(this.#e.has(i)||o)&&s.push(i),o||(o=new Set,this.#r.set(i,o),this.#e.has(i)||n.push(i)),o.add(e.senderId)}if(e.remove)for(const i of e.remove){const o=this.#r.get(i);o&&(o.delete(e.senderId),o.size==0&&!this.#e.has(i)&&r.push(i))}(n.length>0||r.length>0)&&this.emit("change-remote-subs",{peers:Array.from(this.#n),add:n,remove:r});for(const i of s){const o=this.#s.get(e.senderId);if(o)for(const a of o){const c=this.#t.get(a);if(!c)continue;const f=c.get(i);f&&this.emit("notify-remote-heads",{targetId:e.senderId,documentId:a,heads:f.lastHeads,timestamp:f.lastSyncTimestamp,storageId:i})}}}handleRemoteHeads(e){this.#o("handleRemoteHeads",e);const n=this.#a(e);for(const r of n)this.#e.has(r.storageId)&&this.emit("remote-heads-changed",r);for(const r of n)for(const s of this.#n)s!==e.senderId&&this.emit("notify-remote-heads",{targetId:s,documentId:r.documentId,heads:r.remoteHeads,timestamp:r.timestamp,storageId:r.storageId});for(const r of n){const s=this.#r.get(r.storageId);if(s)for(const i of s)this.#c(i,r.documentId)&&this.emit("notify-remote-heads",{targetId:i,documentId:r.documentId,heads:r.remoteHeads,timestamp:r.timestamp,storageId:r.storageId})}}handleImmediateRemoteHeadsChanged(e,n,r){this.#o("handleLocalHeadsChanged",e,n,r);const s=this.#t.get(e),i=Date.now();if(!s)this.#t.set(e,new Map([[n,{lastSyncTimestamp:i,lastHeads:r}]]));else{const a=s.get(n);(!a||a.lastSyncTimestamp<Date.now())&&s.set(n,{lastSyncTimestamp:Date.now(),lastHeads:r})}const o=this.#r.get(n);if(o)for(const a of o)this.#c(a,e)&&this.emit("notify-remote-heads",{targetId:a,documentId:e,heads:r,timestamp:i,storageId:n})}addGenerousPeer(e){this.#o("addGenerousPeer",e),this.#n.add(e),this.#e.size>0&&this.emit("change-remote-subs",{add:Array.from(this.#e),peers:[e]});for(const[n,r]of this.#t)for(const[s,{lastHeads:i,lastSyncTimestamp:o}]of r)this.emit("notify-remote-heads",{targetId:e,documentId:n,heads:i,timestamp:o,storageId:s})}removePeer(e){this.#o("removePeer",e);const n=[];this.#n.delete(e),this.#s.delete(e);for(const[r,s]of this.#r)s.has(e)&&(s.delete(e),s.size==0&&(n.push(r),this.#r.delete(r)));n.length>0&&this.emit("change-remote-subs",{remove:n,peers:Array.from(this.#n)})}subscribePeerToDoc(e,n){let r=this.#s.get(e);r||(r=new Set,this.#s.set(e,r)),r.add(n);const s=this.#t.get(n);if(s)for(const[i,o]of s){const a=this.#r.get(i);a&&a.has(e)&&this.emit("notify-remote-heads",{targetId:e,documentId:n,heads:o.lastHeads,timestamp:o.lastSyncTimestamp,storageId:i})}}#c(e,n){const r=this.#s.get(e);return r&&r.has(n)}#a(e){const n=[],{documentId:r,newHeads:s}=e;for(const[i,{heads:o,timestamp:a}]of Object.entries(s)){if(!this.#e.has(i)&&!this.#r.has(i))continue;let c=this.#t.get(r);c||(c=new Map,this.#t.set(r,c));const f=c.get(i);f&&f.lastSyncTimestamp>=a||(c.set(i,{lastSyncTimestamp:a,lastHeads:o}),n.push({documentId:r,storageId:i,remoteHeads:o,timestamp:a}))}return n}}const Sr=(t,e)=>{let n=Date.now(),r,s;return function(...i){r=n+e-Date.now(),clearTimeout(s),s=setTimeout(()=>{t(...i),n=Date.now()},r)}},nh=t=>sh(t)||ho(t)||lo(t)||rh(t)||ih(t)||oh(t),rh=t=>t.type==="doc-unavailable",lo=t=>t.type==="request",sh=t=>t.type==="sync",ho=t=>t.type==="ephemeral",ih=t=>t.type==="remote-subscription-change",oh=t=>t.type==="remote-heads-changed",ah=t=>`${t.senderId}:${t.sessionId}`;class ch extends bt{peerId;peerMetadata;#t;#e={};#r=0;#n=Math.random().toString(36).slice(2);#s={};adapters=[];constructor(e,n,r){super(),this.peerId=n,this.peerMetadata=r,this.#t=tt(`automerge-repo:network:${this.peerId}`),e.forEach(s=>this.addNetworkAdapter(s))}disconnect(){this.adapters.forEach(e=>e.disconnect())}reconnect(){this.adapters.forEach(e=>e.connect(this.peerId))}addNetworkAdapter(e){this.adapters.push(e),e.on("peer-candidate",({peerId:n,peerMetadata:r})=>{this.#t(`peer candidate: ${n} `),this.#e[n]||(this.#e[n]=e),this.emit("peer",{peerId:n,peerMetadata:r})}),e.on("peer-disconnected",({peerId:n})=>{this.#t(`peer disconnected: ${n} `),delete this.#e[n],this.emit("peer-disconnected",{peerId:n})}),e.on("message",n=>{if(!nh(n)){this.#t(`invalid message: ${JSON.stringify(n)}`);return}if(this.#t(`message from ${n.senderId}`),ho(n)){const r=ah(n);(this.#s[r]===void 0||n.count>this.#s[r])&&(this.#s[r]=n.count,this.emit("message",n));return}this.emit("message",n)}),e.on("close",()=>{this.#t("adapter closed"),Object.entries(this.#e).forEach(([n,r])=>{r===e&&delete this.#e[n]}),this.adapters=this.adapters.filter(n=>n!==e)}),this.peerMetadata.then(n=>{e.connect(this.peerId,n)}).catch(n=>{this.#t("error connecting to network",n)})}removeNetworkAdapter(e){this.adapters=this.adapters.filter(n=>n!==e),e.disconnect()}send(e){const n=this.#e[e.targetId];if(!n){this.#t(`Tried to send message but peer not found: ${e.targetId}`);return}const s=(i=>i.type==="ephemeral"?"count"in i?i:{...i,count:++this.#r,sessionId:this.#n,senderId:this.peerId}:{...i,senderId:this.peerId})(e);this.#t("sending message %o",s),n.send(s)}isReady=()=>this.adapters.every(e=>e.isReady());whenReady=async()=>Promise.all(this.adapters.map(e=>e.whenReady()))}function go(t){let e=0;t.forEach(s=>{e+=s.length});const n=new Uint8Array(e);let r=0;return t.forEach(s=>{n.set(s,r),r+=s.length}),n}var nn={exports:{}},uh=nn.exports,Ks;function fh(){return Ks||(Ks=1,(function(t){(function(e,n){var r={};n(r);var s=r.default;for(var i in r)s[i]=r[i];t.exports=s})(uh,function(e){e.__esModule=!0,e.digestLength=32,e.blockSize=64;var n=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(u,d,h,y,b){for(var E,R,w,$,I,v,M,P,T,H,F,W,_;b>=64;){for(E=d[0],R=d[1],w=d[2],$=d[3],I=d[4],v=d[5],M=d[6],P=d[7],H=0;H<16;H++)F=y+H*4,u[H]=(h[F]&255)<<24|(h[F+1]&255)<<16|(h[F+2]&255)<<8|h[F+3]&255;for(H=16;H<64;H++)T=u[H-2],W=(T>>>17|T<<15)^(T>>>19|T<<13)^T>>>10,T=u[H-15],_=(T>>>7|T<<25)^(T>>>18|T<<14)^T>>>3,u[H]=(W+u[H-7]|0)+(_+u[H-16]|0);for(H=0;H<64;H++)W=(((I>>>6|I<<26)^(I>>>11|I<<21)^(I>>>25|I<<7))+(I&v^~I&M)|0)+(P+(n[H]+u[H]|0)|0)|0,_=((E>>>2|E<<30)^(E>>>13|E<<19)^(E>>>22|E<<10))+(E&R^E&w^R&w)|0,P=M,M=v,v=I,I=$+W|0,$=w,w=R,R=E,E=W+_|0;d[0]+=E,d[1]+=R,d[2]+=w,d[3]+=$,d[4]+=I,d[5]+=v,d[6]+=M,d[7]+=P,y+=64,b-=64}return y}var s=(function(){function u(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return u.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},u.prototype.clean=function(){for(var d=0;d<this.buffer.length;d++)this.buffer[d]=0;for(var d=0;d<this.temp.length;d++)this.temp[d]=0;this.reset()},u.prototype.update=function(d,h){if(h===void 0&&(h=d.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var y=0;if(this.bytesHashed+=h,this.bufferLength>0){for(;this.bufferLength<64&&h>0;)this.buffer[this.bufferLength++]=d[y++],h--;this.bufferLength===64&&(r(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(h>=64&&(y=r(this.temp,this.state,d,y,h),h%=64);h>0;)this.buffer[this.bufferLength++]=d[y++],h--;return this},u.prototype.finish=function(d){if(!this.finished){var h=this.bytesHashed,y=this.bufferLength,b=h/536870912|0,E=h<<3,R=h%64<56?64:128;this.buffer[y]=128;for(var w=y+1;w<R-8;w++)this.buffer[w]=0;this.buffer[R-8]=b>>>24&255,this.buffer[R-7]=b>>>16&255,this.buffer[R-6]=b>>>8&255,this.buffer[R-5]=b>>>0&255,this.buffer[R-4]=E>>>24&255,this.buffer[R-3]=E>>>16&255,this.buffer[R-2]=E>>>8&255,this.buffer[R-1]=E>>>0&255,r(this.temp,this.state,this.buffer,0,R),this.finished=!0}for(var w=0;w<8;w++)d[w*4+0]=this.state[w]>>>24&255,d[w*4+1]=this.state[w]>>>16&255,d[w*4+2]=this.state[w]>>>8&255,d[w*4+3]=this.state[w]>>>0&255;return this},u.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},u.prototype._saveState=function(d){for(var h=0;h<this.state.length;h++)d[h]=this.state[h]},u.prototype._restoreState=function(d,h){for(var y=0;y<this.state.length;y++)this.state[y]=d[y];this.bytesHashed=h,this.finished=!1,this.bufferLength=0},u})();e.Hash=s;var i=(function(){function u(d){this.inner=new s,this.outer=new s,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var h=new Uint8Array(this.blockSize);if(d.length>this.blockSize)new s().update(d).finish(h).clean();else for(var y=0;y<d.length;y++)h[y]=d[y];for(var y=0;y<h.length;y++)h[y]^=54;this.inner.update(h);for(var y=0;y<h.length;y++)h[y]^=106;this.outer.update(h),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var y=0;y<h.length;y++)h[y]=0}return u.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},u.prototype.clean=function(){for(var d=0;d<this.istate.length;d++)this.ostate[d]=this.istate[d]=0;this.inner.clean(),this.outer.clean()},u.prototype.update=function(d){return this.inner.update(d),this},u.prototype.finish=function(d){return this.outer.finished?this.outer.finish(d):(this.inner.finish(d),this.outer.update(d,this.digestLength).finish(d)),this},u.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},u})();e.HMAC=i;function o(u){var d=new s().update(u),h=d.digest();return d.clean(),h}e.hash=o,e.default=o;function a(u,d){var h=new i(u).update(d),y=h.digest();return h.clean(),y}e.hmac=a;function c(u,d,h,y){var b=y[0];if(b===0)throw new Error("hkdf: cannot expand more");d.reset(),b>1&&d.update(u),h&&d.update(h),d.update(y),d.finish(u),y[0]++}var f=new Uint8Array(e.digestLength);function g(u,d,h,y){d===void 0&&(d=f),y===void 0&&(y=32);for(var b=new Uint8Array([1]),E=a(d,u),R=new i(E),w=new Uint8Array(R.digestLength),$=w.length,I=new Uint8Array(y),v=0;v<y;v++)$===w.length&&(c(w,R,h,b),$=0),I[v]=w[$++];return R.clean(),w.fill(0),b.fill(0),I}e.hkdf=g;function l(u,d,h,y){for(var b=new i(u),E=b.digestLength,R=new Uint8Array(4),w=new Uint8Array(E),$=new Uint8Array(E),I=new Uint8Array(y),v=0;v*E<y;v++){var M=v+1;R[0]=M>>>24&255,R[1]=M>>>16&255,R[2]=M>>>8&255,R[3]=M>>>0&255,b.reset(),b.update(d),b.update(R),b.finish($);for(var P=0;P<E;P++)w[P]=$[P];for(var P=2;P<=h;P++){b.reset(),b.update($).finish($);for(var T=0;T<E;T++)w[T]^=$[T]}for(var P=0;P<E&&v*E+P<y;P++)I[v*E+P]=w[P]}for(var v=0;v<E;v++)w[v]=$[v]=0;for(var v=0;v<4;v++)R[v]=0;return b.clean(),I}e.pbkdf2=l})})(nn)),nn.exports}var lh=fh();function _o(t){const e=lh.hash(t);return dh(e)}function hh(t){const e=new TextEncoder,n=go(t.map(r=>e.encode(r)));return _o(n)}function dh(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class gh extends bt{#t;#e=new Map;#r=new Map;#n=!1;#s=tt("automerge-repo:storage-subsystem");constructor(e){super(),this.#t=e}async id(){const e=await this.#t.load(["storage-adapter-id"]);let n;return e?n=new TextDecoder().decode(e):(n=Yi(),await this.#t.save(["storage-adapter-id"],new TextEncoder().encode(n))),n}async load(e,n){const r=[e,n];return await this.#t.load(r)}async save(e,n,r){const s=[e,n];await this.#t.save(s,r)}async remove(e,n){const r=[e,n];await this.#t.remove(r)}async loadDocData(e){const n=await this.#t.loadRange([e,"snapshot"]),r=await this.#t.loadRange([e,"incremental"]),s=[],i=[];for(const o of n)o.data!==void 0&&(i.push({key:o.key,type:"snapshot",size:o.data.length}),s.push(o.data));for(const o of r)o.data!==void 0&&(i.push({key:o.key,type:"incremental",size:o.data.length}),s.push(o.data));return this.#r.set(e,i),s.length===0?null:go(s)}async loadDoc(e){const n=await this.loadDocData(e);if(!n)return null;const r=performance.now(),s=Ei(Ce(),n),i=performance.now();return this.emit("document-loaded",{documentId:e,durationMillis:i-r,...kr(s)}),this.#e.set(e,$e(s)),s}async saveDoc(e,n){if(!this.#a(e,n))return;const r=this.#r.get(e)??[];this.#i(r)?await this.#c(e,n,r):await this.#o(e,n),this.#e.set(e,$e(n))}async removeDoc(e){await this.#t.removeRange([e,"snapshot"]),await this.#t.removeRange([e,"incremental"]),await this.#t.removeRange([e,"sync-state"])}async#o(e,n){const r=$u(n,this.#e.get(e)??[]);if(r&&r.length>0){const s=[e,"incremental",_o(r)];this.#s(`Saving incremental ${s} for document ${e}`),await this.#t.save(s,r),this.#r.has(e)||this.#r.set(e,[]),this.#r.get(e).push({key:s,type:"incremental",size:r.length}),this.#e.set(e,$e(n))}else return Promise.resolve()}async#c(e,n,r){this.#n=!0;const s=Ii(n),i=hh($e(n)),o=[e,"snapshot",i],a=new Set(r.map(f=>f.key).filter(f=>f[2]!==i));this.#s(`Saving snapshot ${o} for document ${e}`),this.#s(`deleting old chunks ${Array.from(a)}`),await this.#t.save(o,s);for(const f of a)await this.#t.remove(f);const c=this.#r.get(e)?.filter(f=>!a.has(f.key))??[];c.push({key:o,type:"snapshot",size:s.length}),this.#r.set(e,c),this.#n=!1}async loadSyncState(e,n){const r=[e,"sync-state",n];try{const s=await this.#t.load(r);return s?ki(s):void 0}catch{this.#s(`Error loading sync state for ${e} from ${n}`);return}}async saveSyncState(e,n,r){const s=[e,"sync-state",n];await this.#t.save(s,Ci(r))}#a(e,n){const r=this.#e.get(e);if(!r)return!0;const s=$e(n);return!Vr(Ue(s),Ue(r))}#i(e){if(this.#n)return!1;let n=0,r=0;for(const s of e)s.type==="snapshot"?n+=s.size:r+=s.size;return n<1024||r>=n}}class po extends bt{}class _h extends po{#t;syncDebounceRate=100;#e=[];#r={};#n={};#s={};#o=[];#c;#a=!1;#i;#f;constructor({handle:e,peerId:n,onLoadSyncState:r}){super(),this.#c=n,this.#i=e,this.#f=r??(()=>Promise.resolve(void 0));const s=e.documentId.slice(0,5);this.#t=tt(`automerge-repo:docsync:${s}`),e.on("change",Sr(()=>this.#l(),this.syncDebounceRate)),e.on("ephemeral-message-outbound",i=>this.#u(i)),(async()=>this.#b())()}get peerStates(){return this.#n}get documentId(){return this.#i.documentId}async#l(){try{await this.#i.whenReady();const e=this.#i.doc();this.#e.forEach(n=>this.#p(n,e))}catch{console.log("sync with peers threw an exception")}}async#u({data:e}){this.#t("broadcastToPeers",this.#e),this.#e.forEach(n=>this.#g(n,e))}#g(e,n){this.#t(`sendEphemeralMessage ->${e}`);const r={type:"ephemeral",targetId:e,documentId:this.#i.documentId,data:n};this.emit("message",r)}#d(e,n){this.#m(e),e in this.#n||(this.#n[e]="unknown");const r=this.#s[e];if(r){n(r);return}let s=this.#r[e];s||(this.#f(e).then(i=>{this.#w(e,i??ju())}).catch(i=>{this.#t(`Error loading sync state for ${e}: ${i}`)}),s=this.#r[e]=[]),s.push(n)}#m(e){this.#e.includes(e)||(this.#e.push(e),this.emit("open-doc",{documentId:this.documentId,peerId:e}))}#w(e,n){const r=this.#r[e];if(r)for(const s of r)s(n);delete this.#r[e],this.#s[e]=n}#_(e,n){this.#s[e]=n,this.emit("sync-state",{peerId:e,syncState:n,documentId:this.#i.documentId})}#p(e,n){this.#t(`sendSyncMessage ->${e}`),this.#d(e,r=>{const[s,i]=Uu(n,r);if(i){this.#_(e,s);const o=$e(n).length===0;!this.#i.isReady()&&o&&s.sharedHeads.length===0&&!Object.values(this.#n).includes("has")&&this.#n[e]==="unknown"?this.emit("message",{type:"request",targetId:e,documentId:this.#i.documentId,data:i}):this.emit("message",{type:"sync",targetId:e,data:i,documentId:this.#i.documentId}),o||(this.#n[e]="has")}})}hasPeer(e){return this.#e.includes(e)}async beginSync(e){this.#i.whenReady([Re,Jt,ye]).then(()=>{this.#a=!0,this.#h()}).catch(r=>{console.log("caught whenready",r),this.#a=!0,this.#h()}),this.#e.some(r=>this.#n[r]=="has")&&await this.#i.whenReady(),e.forEach(r=>{this.#d(r,s=>{const i=ki(Ci(s));this.#_(r,i),this.#i.whenReady([Re,Jt,ye]).then(()=>{const o=this.#i.isReady()?this.#i.doc():Ce(),a=e.every(f=>this.#n[f]in["unavailable","wants"]);o===void 0&&a||this.#p(r,o??Ce())}).catch(o=>{this.#t(`Error loading doc for ${r}: ${o}`)})})})}endSync(e){this.#t(`removing peer ${e}`),this.#e=this.#e.filter(n=>n!==e),delete this.#n[e],this.#h()}receiveMessage(e){switch(e.type){case"sync":case"request":this.receiveSyncMessage(e);break;case"ephemeral":this.receiveEphemeralMessage(e);break;case"doc-unavailable":this.#n[e.senderId]="unavailable",this.#h();break;default:throw new Error(`unknown message type: ${e}`)}}receiveEphemeralMessage(e){if(e.documentId!==this.#i.documentId)throw new Error("channelId doesn't match documentId");const{senderId:n,data:r}=e,s=Bl(new Uint8Array(r));this.#i.emit("ephemeral-message",{handle:this.#i,senderId:n,message:s}),this.#e.forEach(i=>{i!==n&&this.emit("message",{...e,targetId:i})})}receiveSyncMessage(e){if(e.documentId!==this.#i.documentId)throw new Error("channelId doesn't match documentId");if(!this.#i.inState([Re,Jt,ye])){this.#o.push({message:e,received:new Date});return}this.#b(),this.#y(e)}#y(e){lo(e)&&(this.#n[e.senderId]="wants"),this.#h(),Lu(e.data).heads.length>0&&(this.#n[e.senderId]="has"),this.#d(e.senderId,n=>{this.#i.update(r=>{const s=performance.now(),[i,o]=Bu(r,n,e.data),a=performance.now();return this.emit("metrics",{type:"receive-sync-message",documentId:this.#i.documentId,durationMillis:a-s,...kr(r)}),this.#_(e.senderId,o),this.#p(e.senderId,r),i}),this.#h()})}#h(){this.#a&&this.#i.inState([Jt,ye])&&this.#e.every(e=>this.#n[e]==="unavailable"||this.#n[e]==="wants")&&(this.#e.filter(e=>this.#n[e]==="wants").forEach(e=>{this.#n[e]="unavailable";const n={type:"doc-unavailable",documentId:this.#i.documentId,targetId:e};this.emit("message",n)}),this.#i.unavailable())}#b(){for(const e of this.#o)this.#y(e.message);this.#o=[]}metrics(){return{peers:this.#e,size:this.#i.metrics()}}}const Xt=tt("automerge-repo:collectionsync");class ph extends po{repo;#t=new Set;docSynchronizers={};#e={};#r;constructor(e,n=[]){super(),this.repo=e,this.#r=n.map(r=>Rt(r).documentId)}#n(e){return this.docSynchronizers[e.documentId]||(this.docSynchronizers[e.documentId]=this.#s(e)),this.docSynchronizers[e.documentId]}#s(e){const n=new _h({handle:e,peerId:this.repo.networkSubsystem.peerId,onLoadSyncState:async r=>{if(!this.repo.storageSubsystem)return;const{storageId:s,isEphemeral:i}=this.repo.peerMetadataByPeerId[r]||{};if(!(!s||i))return this.repo.storageSubsystem.loadSyncState(e.documentId,s)}});return n.on("message",r=>this.emit("message",r)),n.on("open-doc",r=>this.emit("open-doc",r)),n.on("sync-state",r=>this.emit("sync-state",r)),n.on("metrics",r=>this.emit("metrics",r)),n}async#o(e){const n=Array.from(this.#t),r=[];for(const s of n)await this.repo.sharePolicy(s,e)&&r.push(s);return r}async receiveMessage(e){Xt(`onSyncMessage: ${e.senderId}, ${e.documentId}, ${"data"in e?e.data.byteLength+"bytes":""}`);const n=e.documentId;if(!n)throw new Error("received a message with an invalid documentId");if(this.#r.includes(n)){this.emit("metrics",{type:"doc-denied",documentId:n}),this.emit("message",{type:"doc-unavailable",documentId:n,targetId:e.senderId});return}this.#e[n]=!0;const r=await this.repo.find(n,{allowableStates:["ready","unavailable","requesting"]}),s=this.#n(r);s.receiveMessage(e);const i=await this.#o(n);s.beginSync(i.filter(o=>!s.hasPeer(o)))}addDocument(e){if(this.#e[e.documentId])return;const n=this.#n(e);this.#o(e.documentId).then(r=>{n.beginSync(r)})}removeDocument(e){Xt(`removing document ${e}`);const n=this.docSynchronizers[e];n!==void 0&&this.peers.forEach(r=>n.endSync(r)),delete this.docSynchronizers[e],delete this.#e[e]}addPeer(e){if(Xt(`adding ${e} & synchronizing with them`),!this.#t.has(e)){this.#t.add(e);for(const n of Object.values(this.docSynchronizers)){const{documentId:r}=n;this.repo.sharePolicy(e,r).then(s=>{s&&n.beginSync([e])})}}}removePeer(e){Xt(`removing peer ${e}`),this.#t.delete(e);for(const n of Object.values(this.docSynchronizers))n.endSync(e)}get peers(){return Array.from(this.#t)}metrics(){return Object.fromEntries(Object.entries(this.docSynchronizers).map(([e,n])=>[e,n.metrics()]))}}function Js(t,e){let n=!1;return new Promise((r,s)=>{e?.addEventListener("abort",()=>{n||s(new DOMException("Operation aborted","AbortError"))},{once:!0}),t.then(i=>{r(i)}).catch(i=>{s(i)}).finally(()=>{n=!0})})}function yh(){return"peer-"+Math.random().toString(36).slice(4)}class bh extends bt{#t;networkSubsystem;storageSubsystem;#e;#r;#n={};synchronizer;sharePolicy=async()=>!0;peerMetadataByPeerId={};#s=new th;#o=!1;#c={};constructor({storage:e,network:n=[],peerId:r=yh(),sharePolicy:s,isEphemeral:i=e===void 0,enableRemoteHeadsGossiping:o=!1,denylist:a=[],saveDebounceRate:c=100}={}){super(),this.#o=o,this.#t=tt("automerge-repo:repo"),this.sharePolicy=s??this.sharePolicy,this.on("delete-document",({documentId:u})=>{this.synchronizer.removeDocument(u),f&&f.removeDoc(u).catch(d=>{this.#t("error deleting document",{documentId:u,err:d})})}),this.synchronizer=new ph(this,a),this.synchronizer.on("message",u=>{this.#t(`sending ${u.type} message to ${u.targetId}`),l.send(u)}),this.synchronizer.on("metrics",u=>this.emit("doc-metrics",u)),this.#o&&this.synchronizer.on("open-doc",({peerId:u,documentId:d})=>{this.#s.subscribePeerToDoc(u,d)});const f=e?new gh(e):void 0;if(f&&f.on("document-loaded",u=>this.emit("doc-metrics",{type:"doc-loaded",...u})),this.storageSubsystem=f,this.#e=c,this.storageSubsystem){const u=({handle:d,doc:h})=>{this.storageSubsystem.saveDoc(d.documentId,h)};this.#r=Sr(u,this.#e)}else this.#r=()=>{};const g=(async()=>({storageId:await f?.id(),isEphemeral:i}))(),l=new ch(n,r,g);this.networkSubsystem=l,l.on("peer",async({peerId:u,peerMetadata:d})=>{this.#t("peer connected",{peerId:u}),d&&(this.peerMetadataByPeerId[u]={...d}),this.sharePolicy(u).then(h=>{h&&this.#o&&this.#s.addGenerousPeer(u)}).catch(h=>{console.log("error in share policy",{err:h})}),this.synchronizer.addPeer(u)}),l.on("peer-disconnected",({peerId:u})=>{this.synchronizer.removePeer(u),this.#s.removePeer(u)}),l.on("message",async u=>{this.#i(u)}),this.synchronizer.on("sync-state",u=>{this.#l(u);const d=this.#n[u.documentId],{storageId:h}=this.peerMetadataByPeerId[u.peerId]||{};if(!h)return;const y=d.getSyncInfo(h)?.lastHeads;u.syncState.theirHeads&&(!y||!Vr(y,Ue(u.syncState.theirHeads)))&&u.syncState.theirHeads&&(d.setSyncInfo(h,{lastHeads:Ue(u.syncState.theirHeads),lastSyncTimestamp:Date.now()}),h&&this.#o&&this.#s.handleImmediateRemoteHeadsChanged(u.documentId,h,Ue(u.syncState.theirHeads)))}),this.#o&&(this.#s.on("notify-remote-heads",u=>{this.networkSubsystem.send({type:"remote-heads-changed",targetId:u.targetId,documentId:u.documentId,newHeads:{[u.storageId]:{heads:u.heads,timestamp:u.timestamp}}})}),this.#s.on("change-remote-subs",u=>{this.#t("change-remote-subs",u);for(const d of u.peers)this.networkSubsystem.send({type:"remote-subscription-change",targetId:d,add:u.add,remove:u.remove})}),this.#s.on("remote-heads-changed",({documentId:u,storageId:d,remoteHeads:h,timestamp:y})=>{this.#n[u].setSyncInfo(d,{lastHeads:h,lastSyncTimestamp:y})}))}#a(e){this.storageSubsystem&&(e.listeners("heads-changed").some(r=>r===this.#r)||e.on("heads-changed",this.#r)),this.synchronizer.addDocument(e)}#i(e){switch(e.type){case"remote-subscription-change":this.#o&&this.#s.handleControlMessage(e);break;case"remote-heads-changed":this.#o&&this.#s.handleRemoteHeads(e);break;case"sync":case"request":case"ephemeral":case"doc-unavailable":this.synchronizer.receiveMessage(e).catch(n=>{console.log("error receiving message",{err:n,message:e})})}}#f={};#l(e){if(!this.storageSubsystem)return;const{storageId:n,isEphemeral:r}=this.peerMetadataByPeerId[e.peerId]||{};if(!n||r)return;let s=this.#f[n];s||(s=this.#f[n]=Sr(({documentId:i,syncState:o})=>{this.storageSubsystem.saveSyncState(i,n,o)},this.#e)),s(e)}#u({documentId:e}){if(this.#n[e])return this.#n[e];if(!e)throw new Error(`Invalid documentId ${e}`);const n=new bn(e);return this.#n[e]=n,n}get handles(){return this.#n}get peers(){return this.synchronizer.peers}getStorageIdOfPeer(e){return this.peerMetadataByPeerId[e]?.storageId}create(e){const{documentId:n}=Rt(xl()),r=this.#u({documentId:n});return this.#a(r),r.update(()=>{let s;return e?s=Tu(e):s=Du(Ce()),s}),r.doneLoading(),r}clone(e){if(!e.isReady())throw new Error(`Cloned handle is not yet in ready state.
        (Try await handle.whenReady() first.)`);const n=e.doc(),r=this.create();return r.update(()=>un(n)),r}findWithProgress(e,n={}){const{signal:r}=n,{documentId:s,heads:i}=eo(e)?Rt(e):{documentId:qt(e),heads:void 0};if(this.#n[s]){const l=this.#n[s];if(l.state===ye)return{state:"unavailable",error:new Error(`Document ${e} is unavailable`),handle:l};if(l.state===Yt)return{state:"failed",error:new Error(`Document ${e} was deleted`),handle:l};if(l.state===Re)return{state:"ready",handle:i?l.view(i):l}}const o=this.#c[s];if(o){const l=this.#n[s];if(l&&(l.state===Re||l.state===ye||l.state===Yt||l.state==="loading"))return o}const a=this.#u({documentId:s}),c={state:"loading",progress:0,handle:a},f={subscribers:new Set,currentProgress:void 0,notify:l=>{f.currentProgress=l,f.subscribers.forEach(u=>u(l)),this.#c[s]=l},peek:()=>f.currentProgress||c,subscribe:l=>(f.subscribers.add(l),()=>f.subscribers.delete(l))};f.notify(c),this.#g(e,s,a,f,r?Js(new Promise(()=>{}),r):new Promise(()=>{}));const g={...c,peek:f.peek,subscribe:f.subscribe};return this.#c[s]=g,g}async#g(e,n,r,s,i){try{s.notify({state:"loading",progress:25,handle:r});const o=await(this.storageSubsystem?this.storageSubsystem.loadDoc(r.documentId):Promise.resolve(null)),a=await Promise.race([o,i]);if(a?(r.update(()=>a),r.doneLoading(),s.notify({state:"loading",progress:50,handle:r})):(await Promise.race([this.networkSubsystem.whenReady(),i]),r.request(),s.notify({state:"loading",progress:75,handle:r})),this.#a(r),await Promise.race([r.whenReady([Re,ye]),i]),r.state===ye){const c={state:"unavailable",handle:r};s.notify(c);return}if(r.state===Yt)throw new Error(`Document ${e} was deleted`);s.notify({state:"ready",handle:r})}catch(o){s.notify({state:"failed",error:o instanceof Error?o:new Error(String(o)),handle:this.#u({documentId:n})})}}async find(e,n={}){const{allowableStates:r=["ready"],signal:s}=n;if(s?.aborted)throw new Error("Operation aborted");const i=this.findWithProgress(e,{signal:s});if("subscribe"in i)return this.#a(i.handle),new Promise((o,a)=>{const c=i.subscribe(f=>{r.includes(f.handle.state)?(c(),o(f.handle)):f.state==="unavailable"?(c(),a(new Error(`Document ${e} is unavailable`))):f.state==="failed"&&(c(),a(f.error))})});if(i.handle.state===Re)return i.handle;if(await i.handle.whenReady([Re,ye]),i.handle.state==="unavailable"&&!r.includes(ye))throw new Error(`Document ${e} is unavailable`);return i.handle}async#d(e){if(this.#n[e])return this.#n[e];const n=this.#u({documentId:e}),r=await(this.storageSubsystem?this.storageSubsystem.loadDoc(n.documentId):Promise.resolve(null));return r?(n.update(()=>r),n.doneLoading()):(await this.networkSubsystem.whenReady(),n.request()),this.#a(n),n}async findClassic(e,n={}){const r=qt(e),{allowableStates:s,signal:i}=n;return Js((async()=>{const o=await this.#d(r);if(!s&&(await o.whenReady([Re,ye]),o.state===ye&&!i?.aborted))throw new Error(`Document ${e} is unavailable`);return o})(),i)}delete(e){const n=qt(e);this.#u({documentId:n}).delete(),delete this.#n[n],delete this.#c[n],this.emit("delete-document",{documentId:n})}async export(e){const n=qt(e),s=this.#u({documentId:n}).doc();return Ii(s)}import(e){const n=Ru(e),r=this.create();return r.update(()=>un(n)),r}subscribeToRemotes=e=>{this.#o?(this.#t("subscribeToRemotes",{remotes:e}),this.#s.subscribeToRemotes(e)):this.#t("WARN: subscribeToRemotes called but remote heads gossiping is not enabled")};storageId=async()=>{if(this.storageSubsystem)return this.storageSubsystem.id()};async flush(e){if(!this.storageSubsystem)return;const n=e?e.map(r=>this.#n[r]):Object.values(this.#n);await Promise.all(n.map(async r=>this.storageSubsystem.saveDoc(r.documentId,r.doc())))}async removeFromCache(e){if(!this.#n[e]){this.#t(`WARN: removeFromCache called but handle not found in handleCache for documentId: ${e}`);return}const n=this.#u({documentId:e});await n.whenReady([Re,Kl,Yt,ye]),n.doc()?(n.isReady()?n.unload():this.#t(`WARN: removeFromCache called but handle for documentId: ${e} in unexpected state: ${n.state}`),delete this.#n[e],delete this.#c[e],this.synchronizer.removeDocument(e)):this.#t(`WARN: removeFromCache called but doc undefined for documentId: ${e}`)}shutdown(){return this.networkSubsystem.adapters.forEach(e=>{e.disconnect()}),this.flush()}metrics(){return{documents:this.synchronizer.metrics()}}}const mh=""+new URL("../assets/automerge_wasm_bg.B-hOHGcu.wasm",import.meta.url).href,wh=async(t={},e)=>{let n;if(e.startsWith("data:")){const r=e.replace(/^data:.*?base64,/,"");let s;if(typeof Buffer=="function"&&typeof Buffer.from=="function")s=Buffer.from(r,"base64");else if(typeof atob=="function"){const i=atob(r);s=new Uint8Array(i.length);for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(s,t)}else{const r=await fetch(e),s=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&s.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(r,t);else{const i=await r.arrayBuffer();n=await WebAssembly.instantiate(i,t)}}return n.instance.exports};let x;function yo(t){x=t}let Se=0,Zt=null;function kt(){return(Zt===null||Zt.byteLength===0)&&(Zt=new Uint8Array(x.memory.buffer)),Zt}const Sh=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let rn=new Sh("utf-8");const xh=typeof rn.encodeInto=="function"?function(t,e){return rn.encodeInto(t,e)}:function(t,e){const n=rn.encode(t);return e.set(n),{read:t.length,written:n.length}};function Be(t,e,n){if(n===void 0){const a=rn.encode(t),c=e(a.length,1)>>>0;return kt().subarray(c,c+a.length).set(a),Se=a.length,c}let r=t.length,s=e(r,1)>>>0;const i=kt();let o=0;for(;o<r;o++){const a=t.charCodeAt(o);if(a>127)break;i[s+o]=a}if(o!==r){o!==0&&(t=t.slice(o)),s=n(s,r,r=o+t.length*3,1)>>>0;const a=kt().subarray(s+o,s+r),c=xh(t,a);o+=c.written,s=n(s,r,o,1)>>>0}return Se=o,s}let ct=null;function Ae(){return(ct===null||ct.buffer.detached===!0||ct.buffer.detached===void 0&&ct.buffer!==x.memory.buffer)&&(ct=new DataView(x.memory.buffer)),ct}function fe(t){const e=x.__externref_table_alloc();return x.__wbindgen_export_4.set(e,t),e}function Fe(t,e){try{return t.apply(this,e)}catch(n){const r=fe(n);x.__wbindgen_exn_store(r)}}const vh=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let bo=new vh("utf-8",{ignoreBOM:!0,fatal:!0});bo.decode();function xe(t,e){return t=t>>>0,bo.decode(kt().subarray(t,t+e))}function Ah(t,e){return t=t>>>0,kt().subarray(t/1,t/1+e)}function xr(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const s=t.description;return s==null?"Symbol":`Symbol(${s})`}if(e=="function"){const s=t.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(t)){const s=t.length;let i="[";s>0&&(i+=xr(t[0]));for(let o=1;o<s;o++)i+=", "+xr(t[o]);return i+="]",i}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n&&n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function X(t){return t==null}function j(t){const e=x.__wbindgen_export_4.get(t);return x.__externref_table_dealloc(t),e}function Ke(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`)}function Eh(t){const e=x.create(t);if(e[2])throw j(e[1]);return Me.__wrap(e[0])}function Ih(t,e){const n=x.load(t,e);if(n[2])throw j(n[1]);return Me.__wrap(n[0])}function Ch(t){const e=x.encodeChange(t);if(e[2])throw j(e[1]);return j(e[0])}function kh(t){const e=x.decodeChange(t);if(e[2])throw j(e[1]);return j(e[0])}function Th(){const t=x.initSyncState();return ve.__wrap(t)}function Oh(t){const e=x.importSyncState(t);if(e[2])throw j(e[1]);return ve.__wrap(e[0])}function Hh(t){return Ke(t,ve),x.exportSyncState(t.__wbg_ptr)}function Dh(t){const e=x.encodeSyncMessage(t);if(e[2])throw j(e[1]);return j(e[0])}function Rh(t){const e=x.decodeSyncMessage(t);if(e[2])throw j(e[1]);return j(e[0])}function Mh(t){return Ke(t,ve),x.encodeSyncState(t.__wbg_ptr)}function Uh(t){const e=x.decodeSyncState(t);if(e[2])throw j(e[1]);return ve.__wrap(e[0])}const Ys=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>x.__wbg_automerge_free(t>>>0,1));class Me{static __wrap(e){e=e>>>0;const n=Object.create(Me.prototype);return n.__wbg_ptr=e,Ys.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Ys.unregister(this),e}free(){const e=this.__destroy_into_raw();x.__wbg_automerge_free(e,0)}static new(e){var n=X(e)?0:Be(e,x.__wbindgen_malloc,x.__wbindgen_realloc),r=Se;const s=x.automerge_new(n,r);if(s[2])throw j(s[1]);return Me.__wrap(s[0])}clone(e){var n=X(e)?0:Be(e,x.__wbindgen_malloc,x.__wbindgen_realloc),r=Se;const s=x.automerge_clone(this.__wbg_ptr,n,r);if(s[2])throw j(s[1]);return Me.__wrap(s[0])}fork(e,n){var r=X(e)?0:Be(e,x.__wbindgen_malloc,x.__wbindgen_realloc),s=Se;const i=x.automerge_fork(this.__wbg_ptr,r,s,n);if(i[2])throw j(i[1]);return Me.__wrap(i[0])}pendingOps(){return x.automerge_pendingOps(this.__wbg_ptr)}commit(e,n){var r=X(e)?0:Be(e,x.__wbindgen_malloc,x.__wbindgen_realloc),s=Se;return x.automerge_commit(this.__wbg_ptr,r,s,!X(n),X(n)?0:n)}merge(e){Ke(e,Me);const n=x.automerge_merge(this.__wbg_ptr,e.__wbg_ptr);if(n[2])throw j(n[1]);return j(n[0])}rollback(){return x.automerge_rollback(this.__wbg_ptr)}keys(e,n){const r=x.automerge_keys(this.__wbg_ptr,e,X(n)?0:fe(n));if(r[2])throw j(r[1]);return j(r[0])}text(e,n){let r,s;try{const a=x.automerge_text(this.__wbg_ptr,e,X(n)?0:fe(n));var i=a[0],o=a[1];if(a[3])throw i=0,o=0,j(a[2]);return r=i,s=o,xe(i,o)}finally{x.__wbindgen_free(r,s,1)}}spans(e,n){const r=x.automerge_spans(this.__wbg_ptr,e,X(n)?0:fe(n));if(r[2])throw j(r[1]);return j(r[0])}splice(e,n,r,s){const i=x.automerge_splice(this.__wbg_ptr,e,n,r,s);if(i[1])throw j(i[0])}updateText(e,n){const r=x.automerge_updateText(this.__wbg_ptr,e,n);if(r[1])throw j(r[0])}updateSpans(e,n,r){const s=x.automerge_updateSpans(this.__wbg_ptr,e,n,r);if(s[1])throw j(s[0])}push(e,n,r){const s=x.automerge_push(this.__wbg_ptr,e,n,r);if(s[1])throw j(s[0])}pushObject(e,n){let r,s;try{const a=x.automerge_pushObject(this.__wbg_ptr,e,n);var i=a[0],o=a[1];if(a[3])throw i=0,o=0,j(a[2]);return r=i,s=o,xe(i,o)}finally{x.__wbindgen_free(r,s,1)}}insert(e,n,r,s){const i=x.automerge_insert(this.__wbg_ptr,e,n,r,s);if(i[1])throw j(i[0])}splitBlock(e,n,r){const s=x.automerge_splitBlock(this.__wbg_ptr,e,n,r);if(s[1])throw j(s[0])}joinBlock(e,n){const r=x.automerge_joinBlock(this.__wbg_ptr,e,n);if(r[1])throw j(r[0])}updateBlock(e,n,r){const s=x.automerge_updateBlock(this.__wbg_ptr,e,n,r);if(s[1])throw j(s[0])}getBlock(e,n,r){const s=x.automerge_getBlock(this.__wbg_ptr,e,n,X(r)?0:fe(r));if(s[2])throw j(s[1]);return j(s[0])}insertObject(e,n,r){let s,i;try{const c=x.automerge_insertObject(this.__wbg_ptr,e,n,r);var o=c[0],a=c[1];if(c[3])throw o=0,a=0,j(c[2]);return s=o,i=a,xe(o,a)}finally{x.__wbindgen_free(s,i,1)}}put(e,n,r,s){const i=x.automerge_put(this.__wbg_ptr,e,n,r,s);if(i[1])throw j(i[0])}putObject(e,n,r){const s=x.automerge_putObject(this.__wbg_ptr,e,n,r);if(s[2])throw j(s[1]);return j(s[0])}increment(e,n,r){const s=x.automerge_increment(this.__wbg_ptr,e,n,r);if(s[1])throw j(s[0])}get(e,n,r){const s=x.automerge_get(this.__wbg_ptr,e,n,X(r)?0:fe(r));if(s[2])throw j(s[1]);return j(s[0])}getWithType(e,n,r){const s=x.automerge_getWithType(this.__wbg_ptr,e,n,X(r)?0:fe(r));if(s[2])throw j(s[1]);return j(s[0])}objInfo(e,n){const r=x.automerge_objInfo(this.__wbg_ptr,e,X(n)?0:fe(n));if(r[2])throw j(r[1]);return j(r[0])}getAll(e,n,r){const s=x.automerge_getAll(this.__wbg_ptr,e,n,X(r)?0:fe(r));if(s[2])throw j(s[1]);return j(s[0])}enableFreeze(e){const n=x.automerge_enableFreeze(this.__wbg_ptr,e);if(n[2])throw j(n[1]);return n[0]!==0}registerDatatype(e,n,r){const s=x.automerge_registerDatatype(this.__wbg_ptr,e,n,r);if(s[1])throw j(s[0])}applyPatches(e,n){const r=x.automerge_applyPatches(this.__wbg_ptr,e,n);if(r[2])throw j(r[1]);return j(r[0])}applyAndReturnPatches(e,n){const r=x.automerge_applyAndReturnPatches(this.__wbg_ptr,e,n);if(r[2])throw j(r[1]);return j(r[0])}diffIncremental(){const e=x.automerge_diffIncremental(this.__wbg_ptr);if(e[2])throw j(e[1]);return j(e[0])}updateDiffCursor(){x.automerge_updateDiffCursor(this.__wbg_ptr)}resetDiffCursor(){x.automerge_resetDiffCursor(this.__wbg_ptr)}diff(e,n){const r=x.automerge_diff(this.__wbg_ptr,e,n);if(r[2])throw j(r[1]);return j(r[0])}isolate(e){const n=x.automerge_isolate(this.__wbg_ptr,e);if(n[1])throw j(n[0])}integrate(){x.automerge_integrate(this.__wbg_ptr)}length(e,n){const r=x.automerge_length(this.__wbg_ptr,e,X(n)?0:fe(n));if(r[2])throw j(r[1]);return r[0]}delete(e,n){const r=x.automerge_delete(this.__wbg_ptr,e,n);if(r[1])throw j(r[0])}save(){return x.automerge_save(this.__wbg_ptr)}saveIncremental(){return x.automerge_saveIncremental(this.__wbg_ptr)}saveSince(e){const n=x.automerge_saveSince(this.__wbg_ptr,e);if(n[2])throw j(n[1]);return j(n[0])}saveNoCompress(){return x.automerge_saveNoCompress(this.__wbg_ptr)}saveAndVerify(){const e=x.automerge_saveAndVerify(this.__wbg_ptr);if(e[2])throw j(e[1]);return j(e[0])}loadIncremental(e){const n=x.automerge_loadIncremental(this.__wbg_ptr,e);if(n[2])throw j(n[1]);return n[0]}applyChanges(e){const n=x.automerge_applyChanges(this.__wbg_ptr,e);if(n[1])throw j(n[0])}getChanges(e){const n=x.automerge_getChanges(this.__wbg_ptr,e);if(n[2])throw j(n[1]);return j(n[0])}getChangesMeta(e){const n=x.automerge_getChangesMeta(this.__wbg_ptr,e);if(n[2])throw j(n[1]);return j(n[0])}getChangeByHash(e){const n=x.automerge_getChangeByHash(this.__wbg_ptr,e);if(n[2])throw j(n[1]);return j(n[0])}getChangeMetaByHash(e){const n=x.automerge_getChangeMetaByHash(this.__wbg_ptr,e);if(n[2])throw j(n[1]);return j(n[0])}getDecodedChangeByHash(e){const n=x.automerge_getDecodedChangeByHash(this.__wbg_ptr,e);if(n[2])throw j(n[1]);return j(n[0])}getChangesAdded(e){return Ke(e,Me),x.automerge_getChangesAdded(this.__wbg_ptr,e.__wbg_ptr)}getHeads(){return x.automerge_getHeads(this.__wbg_ptr)}getActorId(){let e,n;try{const r=x.automerge_getActorId(this.__wbg_ptr);return e=r[0],n=r[1],xe(r[0],r[1])}finally{x.__wbindgen_free(e,n,1)}}getLastLocalChange(){return x.automerge_getLastLocalChange(this.__wbg_ptr)}dump(){x.automerge_dump(this.__wbg_ptr)}getMissingDeps(e){const n=x.automerge_getMissingDeps(this.__wbg_ptr,X(e)?0:fe(e));if(n[2])throw j(n[1]);return j(n[0])}receiveSyncMessage(e,n){Ke(e,ve);const r=x.automerge_receiveSyncMessage(this.__wbg_ptr,e.__wbg_ptr,n);if(r[1])throw j(r[0])}generateSyncMessage(e){return Ke(e,ve),x.automerge_generateSyncMessage(this.__wbg_ptr,e.__wbg_ptr)}toJS(e){const n=x.automerge_toJS(this.__wbg_ptr,e);if(n[2])throw j(n[1]);return j(n[0])}materialize(e,n,r){const s=x.automerge_materialize(this.__wbg_ptr,e,X(n)?0:fe(n),r);if(s[2])throw j(s[1]);return j(s[0])}getCursor(e,n,r,s){let i,o;try{const f=x.automerge_getCursor(this.__wbg_ptr,e,n,X(r)?0:fe(r),s);var a=f[0],c=f[1];if(f[3])throw a=0,c=0,j(f[2]);return i=a,o=c,xe(a,c)}finally{x.__wbindgen_free(i,o,1)}}getCursorPosition(e,n,r){const s=x.automerge_getCursorPosition(this.__wbg_ptr,e,n,X(r)?0:fe(r));if(s[2])throw j(s[1]);return s[0]}emptyChange(e,n){var r=X(e)?0:Be(e,x.__wbindgen_malloc,x.__wbindgen_realloc),s=Se;return x.automerge_emptyChange(this.__wbg_ptr,r,s,!X(n),X(n)?0:n)}mark(e,n,r,s,i){const o=x.automerge_mark(this.__wbg_ptr,e,n,r,s,i);if(o[1])throw j(o[0])}unmark(e,n,r){const s=x.automerge_unmark(this.__wbg_ptr,e,n,r);if(s[1])throw j(s[0])}marks(e,n){const r=x.automerge_marks(this.__wbg_ptr,e,X(n)?0:fe(n));if(r[2])throw j(r[1]);return j(r[0])}marksAt(e,n,r){const s=x.automerge_marksAt(this.__wbg_ptr,e,n,X(r)?0:fe(r));if(s[2])throw j(s[1]);return j(s[0])}hasOurChanges(e){return Ke(e,ve),x.automerge_hasOurChanges(this.__wbg_ptr,e.__wbg_ptr)!==0}topoHistoryTraversal(){return x.automerge_topoHistoryTraversal(this.__wbg_ptr)}stats(){return x.automerge_stats(this.__wbg_ptr)}}const Xs=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>x.__wbg_syncstate_free(t>>>0,1));class ve{static __wrap(e){e=e>>>0;const n=Object.create(ve.prototype);return n.__wbg_ptr=e,Xs.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Xs.unregister(this),e}free(){const e=this.__destroy_into_raw();x.__wbg_syncstate_free(e,0)}get sharedHeads(){return x.syncstate_sharedHeads(this.__wbg_ptr)}get lastSentHeads(){return x.syncstate_lastSentHeads(this.__wbg_ptr)}set lastSentHeads(e){const n=x.syncstate_set_lastSentHeads(this.__wbg_ptr,e);if(n[1])throw j(n[0])}set sentHashes(e){const n=x.syncstate_set_sentHashes(this.__wbg_ptr,e);if(n[1])throw j(n[0])}clone(){const e=x.syncstate_clone(this.__wbg_ptr);return ve.__wrap(e)}}function mo(t,e){const n=String(e),r=Be(n,x.__wbindgen_malloc,x.__wbindgen_realloc),s=Se;Ae().setInt32(t+4,s,!0),Ae().setInt32(t+0,r,!0)}function wo(){return Fe(function(t,e,n){return Reflect.apply(t,e,n)},arguments)}function So(t,e){return Object.assign(t,e)}function xo(t){return t.buffer}function vo(){return Fe(function(t,e){return t.call(e)},arguments)}function Ao(){return Fe(function(t,e,n){return t.call(e,n)},arguments)}function Eo(t,e){return t.concat(e)}function Io(t,e,n){return Object.defineProperty(t,e,n)}function Co(){return Fe(function(t,e){return Reflect.deleteProperty(t,e)},arguments)}function ko(t){return t.done}function To(t){return Object.entries(t)}function Oo(t,e){let n,r;try{n=t,r=e,console.error(xe(t,e))}finally{x.__wbindgen_free(n,r,1)}}function Ho(t,e){return Symbol.for(xe(t,e))}function Do(t){return Object.freeze(t)}function Ro(t){return Array.from(t)}function Mo(){return Fe(function(t,e){globalThis.crypto.getRandomValues(Ah(t,e))},arguments)}function Uo(t){return t.getTime()}function Bo(){return Fe(function(t,e){return Reflect.get(t,e)},arguments)}function jo(t,e){return t[e>>>0]}function Lo(t){let e;try{e=t instanceof ArrayBuffer}catch{e=!1}return e}function $o(t){let e;try{e=t instanceof Date}catch{e=!1}return e}function Po(t){let e;try{e=t instanceof Object}catch{e=!1}return e}function Fo(t){let e;try{e=t instanceof Uint8Array}catch{e=!1}return e}function zo(t){return Array.isArray(t)}function Vo(){return Symbol.iterator}function No(t){return Object.keys(t)}function Wo(t){return t.length}function qo(t){return t.length}function Go(t){return t.length}function Ko(t,e){console.log(t,e)}function Jo(t){console.log(t)}function Yo(t,e){return new RangeError(xe(t,e))}function Xo(t){return new Date(t)}function Zo(){return new Object}function Qo(){return new Array}function ea(){return new Error}function ta(t){return new Uint8Array(t)}function na(t,e){return new Error(xe(t,e))}function ra(t,e,n){return new Uint8Array(t,e>>>0,n>>>0)}function sa(t){return t.next}function ia(){return Fe(function(t){return t.next()},arguments)}function oa(){return Fe(function(t){return Reflect.ownKeys(t)},arguments)}function aa(t,e){return t.push(e)}function ca(t,e,n){t[e>>>0]=n}function ua(t,e,n){t[e]=n}function fa(t,e,n){t.set(e,n>>>0)}function la(){return Fe(function(t,e,n){return Reflect.set(t,e,n)},arguments)}function ha(t,e,n){return t.slice(e>>>0,n>>>0)}function da(t,e){const n=e.stack,r=Be(n,x.__wbindgen_malloc,x.__wbindgen_realloc),s=Se;Ae().setInt32(t+4,s,!0),Ae().setInt32(t+0,r,!0)}function ga(t){return t.toString()}function _a(t,e){return t.unshift(e)}function pa(t){return t.value}function ya(t){return Object.values(t)}function ba(t){return t}function ma(t){return BigInt.asUintN(64,t)}function wa(t){const e=t;return typeof e=="boolean"?e?1:0:2}function Sa(t,e){const n=xr(e),r=Be(n,x.__wbindgen_malloc,x.__wbindgen_realloc),s=Se;Ae().setInt32(t+4,s,!0),Ae().setInt32(t+0,r,!0)}function xa(t,e){return new Error(xe(t,e))}function va(){const t=x.__wbindgen_export_4,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)}function Aa(t){return Array.isArray(t)}function Ea(t){return typeof t=="function"}function Ia(t){return t===null}function Ca(t){const e=t;return typeof e=="object"&&e!==null}function ka(t){return typeof t=="string"}function Ta(t){return t===void 0}function Oa(t,e){const n=e,r=JSON.stringify(n===void 0?null:n),s=Be(r,x.__wbindgen_malloc,x.__wbindgen_realloc),i=Se;Ae().setInt32(t+4,i,!0),Ae().setInt32(t+0,s,!0)}function Ha(t,e){return t==e}function Da(){return x.memory}function Ra(t,e){const n=e,r=typeof n=="number"?n:void 0;Ae().setFloat64(t+8,X(r)?0:r,!0),Ae().setInt32(t+0,!X(r),!0)}function Ma(t){return t}function Ua(t,e){const n=e,r=typeof n=="string"?n:void 0;var s=X(r)?0:Be(r,x.__wbindgen_malloc,x.__wbindgen_realloc),i=Se;Ae().setInt32(t+4,i,!0),Ae().setInt32(t+0,s,!0)}function Ba(t,e){return xe(t,e)}function ja(t,e){throw new Error(xe(t,e))}URL=globalThis.URL;const B=await wh({"./automerge_wasm_bg.js":{__wbindgen_string_get:Ua,__wbindgen_error_new:xa,__wbindgen_string_new:Ba,__wbindgen_number_new:Ma,__wbindgen_number_get:Ra,__wbindgen_is_undefined:Ta,__wbindgen_boolean_get:wa,__wbindgen_is_null:Ia,__wbindgen_is_string:ka,__wbindgen_is_function:Ea,__wbindgen_is_object:Ca,__wbindgen_is_array:Aa,__wbindgen_json_serialize:Oa,__wbg_new_8a6f238a6ece86ea:ea,__wbg_stack_0ed75d68575b0f3c:da,__wbg_error_7534b8e9a36f1ab4:Oo,__wbindgen_jsval_loose_eq:Ha,__wbg_String_8f0eb39a4a4c2f66:mo,__wbindgen_bigint_from_i64:ba,__wbindgen_bigint_from_u64:ma,__wbg_set_3f1d0b984ed272ed:ua,__wbg_getRandomValues_3c9c0d586e575a16:Mo,__wbg_log_c222819a41e063d3:Jo,__wbg_log_1ae1e9f741096e91:Ko,__wbg_get_b9b93047fe3cf45b:jo,__wbg_length_e2d2a49132c1b256:Go,__wbg_new_78feb108b6472713:Qo,__wbg_next_25feadfc0913fea9:sa,__wbg_next_6574e1a8a62d1055:ia,__wbg_done_769e5ede4b31c67b:ko,__wbg_value_cd1ffa7b1ab794f1:pa,__wbg_iterator_9a24c88df860dc65:Vo,__wbg_get_67b2ba62fc30de12:Bo,__wbg_call_672a4d21634d4a24:vo,__wbg_new_405e22f390576ce2:Zo,__wbg_length_d56737991078581b:qo,__wbg_set_37837023f3d740e8:ca,__wbg_from_2a5d3e218e67aa85:Ro,__wbg_isArray_a1eab7e0d067391b:zo,__wbg_push_737cfc8c1432c2c6:aa,__wbg_unshift_c290010f73f04fb1:_a,__wbg_instanceof_ArrayBuffer_e14585432e3737fc:Lo,__wbg_new_c68d7209be747379:na,__wbg_call_7cccdd69e0791ae2:Ao,__wbg_instanceof_Date_e9a9be8b9cea7890:$o,__wbg_getTime_46267b1c24877e30:Uo,__wbg_new_31a97dac4f10fab7:Xo,__wbg_instanceof_Object_7f2dcef8f78644a4:Po,__wbg_assign_3627b8559449930a:So,__wbg_defineProperty_a3ddad9901e2d29e:Io,__wbg_entries_3265d4158b33e5dc:To,__wbg_freeze_ef6d70cf38e8d948:Do,__wbg_keys_5c77a08ddc2fb8a6:No,__wbg_values_fcb8ba8c0aad8b58:ya,__wbg_new_1ab78df5e132f715:Yo,__wbg_apply_eb9e9b97497f91e4:wo,__wbg_deleteProperty_96363d4a1d977c97:Co,__wbg_ownKeys_3930041068756f1f:oa,__wbg_set_bb8cecf6a62b9f46:la,__wbg_buffer_609cc3eee51ed158:xo,__wbg_concat_9de968491c4340cf:Eo,__wbg_slice_972c243648c9fd2e:ha,__wbg_for_4ff07bddd743c5e7:Ho,__wbg_toString_66ab719c2a98bdf1:ga,__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a:ra,__wbg_new_a12002a7f91c75be:ta,__wbg_set_65595bdd868b3009:fa,__wbg_length_a446193dc22c12f8:Wo,__wbg_instanceof_Uint8Array_17156bcf118086a9:Fo,__wbindgen_debug_string:Sa,__wbindgen_throw:ja,__wbindgen_memory:Da,__wbindgen_init_externref_table:va}},mh),Bh=B.memory,jh=B.__wbg_syncstate_free,Lh=B.syncstate_sharedHeads,$h=B.syncstate_lastSentHeads,Ph=B.syncstate_set_lastSentHeads,Fh=B.syncstate_set_sentHashes,zh=B.syncstate_clone,Vh=B.__wbg_automerge_free,Nh=B.automerge_new,Wh=B.automerge_clone,qh=B.automerge_fork,Gh=B.automerge_pendingOps,Kh=B.automerge_commit,Jh=B.automerge_merge,Yh=B.automerge_rollback,Xh=B.automerge_keys,Zh=B.automerge_text,Qh=B.automerge_spans,ed=B.automerge_splice,td=B.automerge_updateText,nd=B.automerge_updateSpans,rd=B.automerge_push,sd=B.automerge_pushObject,id=B.automerge_insert,od=B.automerge_splitBlock,ad=B.automerge_joinBlock,cd=B.automerge_updateBlock,ud=B.automerge_getBlock,fd=B.automerge_insertObject,ld=B.automerge_put,hd=B.automerge_putObject,dd=B.automerge_increment,gd=B.automerge_get,_d=B.automerge_getWithType,pd=B.automerge_objInfo,yd=B.automerge_getAll,bd=B.automerge_enableFreeze,md=B.automerge_registerDatatype,wd=B.automerge_applyPatches,Sd=B.automerge_applyAndReturnPatches,xd=B.automerge_diffIncremental,vd=B.automerge_updateDiffCursor,Ad=B.automerge_resetDiffCursor,Ed=B.automerge_diff,Id=B.automerge_isolate,Cd=B.automerge_integrate,kd=B.automerge_length,Td=B.automerge_delete,Od=B.automerge_save,Hd=B.automerge_saveIncremental,Dd=B.automerge_saveSince,Rd=B.automerge_saveNoCompress,Md=B.automerge_saveAndVerify,Ud=B.automerge_loadIncremental,Bd=B.automerge_applyChanges,jd=B.automerge_getChanges,Ld=B.automerge_getChangesMeta,$d=B.automerge_getChangeByHash,Pd=B.automerge_getChangeMetaByHash,Fd=B.automerge_getDecodedChangeByHash,zd=B.automerge_getChangesAdded,Vd=B.automerge_getHeads,Nd=B.automerge_getActorId,Wd=B.automerge_getLastLocalChange,qd=B.automerge_dump,Gd=B.automerge_getMissingDeps,Kd=B.automerge_receiveSyncMessage,Jd=B.automerge_generateSyncMessage,Yd=B.automerge_toJS,Xd=B.automerge_materialize,Zd=B.automerge_getCursor,Qd=B.automerge_getCursorPosition,e0=B.automerge_emptyChange,t0=B.automerge_mark,n0=B.automerge_unmark,r0=B.automerge_marks,s0=B.automerge_marksAt,i0=B.automerge_hasOurChanges,o0=B.automerge_topoHistoryTraversal,a0=B.automerge_stats,c0=B.create,u0=B.load,f0=B.encodeChange,l0=B.decodeChange,h0=B.initSyncState,d0=B.importSyncState,g0=B.exportSyncState,_0=B.encodeSyncMessage,p0=B.decodeSyncMessage,y0=B.encodeSyncState,b0=B.decodeSyncState,m0=B.__wbindgen_malloc,w0=B.__wbindgen_realloc,S0=B.__wbindgen_exn_store,x0=B.__externref_table_alloc,v0=B.__wbindgen_export_4,A0=B.__wbindgen_free,E0=B.__externref_table_dealloc,La=B.__wbindgen_start,I0=Object.freeze(Object.defineProperty({__proto__:null,__externref_table_alloc:x0,__externref_table_dealloc:E0,__wbg_automerge_free:Vh,__wbg_syncstate_free:jh,__wbindgen_exn_store:S0,__wbindgen_export_4:v0,__wbindgen_free:A0,__wbindgen_malloc:m0,__wbindgen_realloc:w0,__wbindgen_start:La,automerge_applyAndReturnPatches:Sd,automerge_applyChanges:Bd,automerge_applyPatches:wd,automerge_clone:Wh,automerge_commit:Kh,automerge_delete:Td,automerge_diff:Ed,automerge_diffIncremental:xd,automerge_dump:qd,automerge_emptyChange:e0,automerge_enableFreeze:bd,automerge_fork:qh,automerge_generateSyncMessage:Jd,automerge_get:gd,automerge_getActorId:Nd,automerge_getAll:yd,automerge_getBlock:ud,automerge_getChangeByHash:$d,automerge_getChangeMetaByHash:Pd,automerge_getChanges:jd,automerge_getChangesAdded:zd,automerge_getChangesMeta:Ld,automerge_getCursor:Zd,automerge_getCursorPosition:Qd,automerge_getDecodedChangeByHash:Fd,automerge_getHeads:Vd,automerge_getLastLocalChange:Wd,automerge_getMissingDeps:Gd,automerge_getWithType:_d,automerge_hasOurChanges:i0,automerge_increment:dd,automerge_insert:id,automerge_insertObject:fd,automerge_integrate:Cd,automerge_isolate:Id,automerge_joinBlock:ad,automerge_keys:Xh,automerge_length:kd,automerge_loadIncremental:Ud,automerge_mark:t0,automerge_marks:r0,automerge_marksAt:s0,automerge_materialize:Xd,automerge_merge:Jh,automerge_new:Nh,automerge_objInfo:pd,automerge_pendingOps:Gh,automerge_push:rd,automerge_pushObject:sd,automerge_put:ld,automerge_putObject:hd,automerge_receiveSyncMessage:Kd,automerge_registerDatatype:md,automerge_resetDiffCursor:Ad,automerge_rollback:Yh,automerge_save:Od,automerge_saveAndVerify:Md,automerge_saveIncremental:Hd,automerge_saveNoCompress:Rd,automerge_saveSince:Dd,automerge_spans:Qh,automerge_splice:ed,automerge_splitBlock:od,automerge_stats:a0,automerge_text:Zh,automerge_toJS:Yd,automerge_topoHistoryTraversal:o0,automerge_unmark:n0,automerge_updateBlock:cd,automerge_updateDiffCursor:vd,automerge_updateSpans:nd,automerge_updateText:td,create:c0,decodeChange:l0,decodeSyncMessage:p0,decodeSyncState:b0,encodeChange:f0,encodeSyncMessage:_0,encodeSyncState:y0,exportSyncState:g0,importSyncState:d0,initSyncState:h0,load:u0,memory:Bh,syncstate_clone:zh,syncstate_lastSentHeads:$h,syncstate_set_lastSentHeads:Ph,syncstate_set_sentHashes:Fh,syncstate_sharedHeads:Lh},Symbol.toStringTag,{value:"Module"}));yo(I0);La();const C0=Object.freeze(Object.defineProperty({__proto__:null,Automerge:Me,SyncState:ve,__wbg_String_8f0eb39a4a4c2f66:mo,__wbg_apply_eb9e9b97497f91e4:wo,__wbg_assign_3627b8559449930a:So,__wbg_buffer_609cc3eee51ed158:xo,__wbg_call_672a4d21634d4a24:vo,__wbg_call_7cccdd69e0791ae2:Ao,__wbg_concat_9de968491c4340cf:Eo,__wbg_defineProperty_a3ddad9901e2d29e:Io,__wbg_deleteProperty_96363d4a1d977c97:Co,__wbg_done_769e5ede4b31c67b:ko,__wbg_entries_3265d4158b33e5dc:To,__wbg_error_7534b8e9a36f1ab4:Oo,__wbg_for_4ff07bddd743c5e7:Ho,__wbg_freeze_ef6d70cf38e8d948:Do,__wbg_from_2a5d3e218e67aa85:Ro,__wbg_getRandomValues_3c9c0d586e575a16:Mo,__wbg_getTime_46267b1c24877e30:Uo,__wbg_get_67b2ba62fc30de12:Bo,__wbg_get_b9b93047fe3cf45b:jo,__wbg_instanceof_ArrayBuffer_e14585432e3737fc:Lo,__wbg_instanceof_Date_e9a9be8b9cea7890:$o,__wbg_instanceof_Object_7f2dcef8f78644a4:Po,__wbg_instanceof_Uint8Array_17156bcf118086a9:Fo,__wbg_isArray_a1eab7e0d067391b:zo,__wbg_iterator_9a24c88df860dc65:Vo,__wbg_keys_5c77a08ddc2fb8a6:No,__wbg_length_a446193dc22c12f8:Wo,__wbg_length_d56737991078581b:qo,__wbg_length_e2d2a49132c1b256:Go,__wbg_log_1ae1e9f741096e91:Ko,__wbg_log_c222819a41e063d3:Jo,__wbg_new_1ab78df5e132f715:Yo,__wbg_new_31a97dac4f10fab7:Xo,__wbg_new_405e22f390576ce2:Zo,__wbg_new_78feb108b6472713:Qo,__wbg_new_8a6f238a6ece86ea:ea,__wbg_new_a12002a7f91c75be:ta,__wbg_new_c68d7209be747379:na,__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a:ra,__wbg_next_25feadfc0913fea9:sa,__wbg_next_6574e1a8a62d1055:ia,__wbg_ownKeys_3930041068756f1f:oa,__wbg_push_737cfc8c1432c2c6:aa,__wbg_set_37837023f3d740e8:ca,__wbg_set_3f1d0b984ed272ed:ua,__wbg_set_65595bdd868b3009:fa,__wbg_set_bb8cecf6a62b9f46:la,__wbg_set_wasm:yo,__wbg_slice_972c243648c9fd2e:ha,__wbg_stack_0ed75d68575b0f3c:da,__wbg_toString_66ab719c2a98bdf1:ga,__wbg_unshift_c290010f73f04fb1:_a,__wbg_value_cd1ffa7b1ab794f1:pa,__wbg_values_fcb8ba8c0aad8b58:ya,__wbindgen_bigint_from_i64:ba,__wbindgen_bigint_from_u64:ma,__wbindgen_boolean_get:wa,__wbindgen_debug_string:Sa,__wbindgen_error_new:xa,__wbindgen_init_externref_table:va,__wbindgen_is_array:Aa,__wbindgen_is_function:Ea,__wbindgen_is_null:Ia,__wbindgen_is_object:Ca,__wbindgen_is_string:ka,__wbindgen_is_undefined:Ta,__wbindgen_json_serialize:Oa,__wbindgen_jsval_loose_eq:Ha,__wbindgen_memory:Da,__wbindgen_number_get:Ra,__wbindgen_number_new:Ma,__wbindgen_string_get:Ua,__wbindgen_string_new:Ba,__wbindgen_throw:ja,create:Eh,decodeChange:kh,decodeSyncMessage:Rh,decodeSyncState:Uh,encodeChange:Ch,encodeSyncMessage:Dh,encodeSyncState:Mh,exportSyncState:Hh,importSyncState:Oh,initSyncState:Th,load:Ih},Symbol.toStringTag,{value:"Module"}));Eu(C0);class k0{database;store;dbPromise;constructor(e="automerge",n="documents"){this.database=e,this.store=n,this.dbPromise=this.createDatabasePromise()}createDatabasePromise(){return new Promise((e,n)=>{const r=indexedDB.open(this.database,1);r.onerror=()=>{n(r.error)},r.onupgradeneeded=s=>{s.target.result.createObjectStore(this.store)},r.onsuccess=s=>{const i=s.target.result;e(i)}})}async load(e){const r=(await this.dbPromise).transaction(this.store),i=r.objectStore(this.store).get(e);return new Promise((o,a)=>{r.onerror=()=>{a(i.error)},i.onsuccess=c=>{const f=c.target.result;f&&typeof f=="object"&&"binary"in f?o(f.binary):o(void 0)}})}async save(e,n){const s=(await this.dbPromise).transaction(this.store,"readwrite");return s.objectStore(this.store).put({key:e,binary:n},e),new Promise((o,a)=>{s.onerror=()=>{a(s.error)},s.oncomplete=()=>{o()}})}async remove(e){const r=(await this.dbPromise).transaction(this.store,"readwrite");return r.objectStore(this.store).delete(e),new Promise((i,o)=>{r.onerror=()=>{o(r.error)},r.oncomplete=()=>{i()}})}async loadRange(e){const n=await this.dbPromise,r=e,s=[...e,"ï¿¿"],i=IDBKeyRange.bound(r,s),o=n.transaction(this.store),c=o.objectStore(this.store).openCursor(i),f=[];return new Promise((g,l)=>{o.onerror=()=>{l(c.error)},c.onsuccess=u=>{const d=u.target.result;d?(f.push({data:d.value.binary,key:d.key}),d.continue()):g(f)}})}async removeRange(e){const n=await this.dbPromise,r=e,s=[...e,"ï¿¿"],i=IDBKeyRange.bound(r,s),o=n.transaction(this.store,"readwrite");return o.objectStore(this.store).delete(i),new Promise((c,f)=>{o.onerror=()=>{f(o.error)},o.oncomplete=()=>{c()}})}}const Zs={};function T0(t){let e=Zs;return()=>(e===Zs&&(e=t()),e)}const jt=T0(()=>new bh({network:[],storage:new k0("duckduckfit","automerge")}));async function Nr(t,e){return await e.find(t)}function $a(t,e){return e.create(t)}async function O0(t,e){let n=t.doc();const r=Object.keys(e).length;let s=!1;for(let i=(n.version??0)+1;i<=r;i++){const o=e[i];if(o){const a=await o(n);t.change(a),t.change(c=>{c.version=i}),n=t.doc(),s=!0}}return s}async function Qs(t,e){const n=await O0(t,e.migrations);if(await e.onInit?.(t.doc()),e.onChange){const r=e.onChange;t.addListener("change",s=>r(s.doc))}return n}let mn=An(En(window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light")),wn=An("metric"),sn=An(En(ke()));async function ei(t){te(mn)!==t.theme&&Je(mn,t.theme,!0),te(wn)!==t.measurementSystem&&Je(wn,t.measurementSystem,!0),te(sn)!==t.locale&&(Je(sn,t.locale,!0),Fc(te(sn)))}const H0={migrations:{1:async()=>t=>{t.theme=te(mn),t.locale=Pc,t.measurementSystem=te(wn)}},onInit:ei,onChange:ei};async function lg(t){(await qr.settings()).change(n=>{n.locale=t})}function hg(){return te(sn)}async function dg(t){(await qr.settings()).change(n=>{n.theme=t})}function gg(){return te(mn)}async function _g(t){(await qr.settings()).change(n=>{n.measurementSystem=t})}function pg(){return te(wn)}const Pa=t=>`Hello, ${t.name} from en!`,D0=Pa,R0=(t,e={})=>(e.locale??ke())==="en"?Pa(t):D0(t),M0=()=>"Settings",U0=()=>"",B0=(t={},e={})=>(e.locale??ke())==="en"?M0():U0(),Fa=()=>"Theme",j0=Fa,L0=(t={},e={})=>(e.locale??ke())==="en"?Fa():j0(),za=()=>"Language",$0=za,P0=(t={},e={})=>(e.locale??ke())==="en"?za():$0(),Va=()=>"if it presists please contact support",F0=Va,z0=(t={},e={})=>(e.locale??ke())==="en"?Va():F0(),Na=()=>"Application",V0=Na,N0=(t={},e={})=>(e.locale??ke())==="en"?Na():V0(),Wa=()=>"Settings",W0=Wa,q0=(t={},e={})=>(e.locale??ke())==="en"?Wa():W0(),qa=()=>"Measurement System",G0=qa,K0=(t={},e={})=>(e.locale??ke())==="en"?qa():G0(),Ga=()=>"Imperial",J0=Ga,Y0=(t={},e={})=>(e.locale??ke())==="en"?Ga():J0(),Ka=()=>"Metric",X0=Ka,Z0=(t={},e={})=>(e.locale??ke())==="en"?Ka():X0(),ti=Object.freeze(Object.defineProperty({__proto__:null,application_settings_language:P0,application_settings_measurement_system:K0,application_settings_theme_mode:L0,application_settings_title:q0,errors_message_application:z0,errors_name_application:N0,hello_world:R0,imperial_system:Y0,metric_system:Z0,settings_title:B0},Symbol.toStringTag,{value:"Module"})),ni=En([]);function yg(t){const e=ni.findIndex(n=>n.id===t);e!==-1&&ni.splice(e,1)}class Wr extends Error{static from(e,n,...r){return new Wr(Q0(e,n,r))}}function Q0(t,e,n){const r=ti[t](),s=ti[e](...n);return`${r}: ${s}`}const eg={migrations:{1:async()=>{const t=jt();return e=>{e.settings=$a({version:0},t).documentId}}}},nr=du("user-document-id",null),Ja=Er(tg);async function tg(){let t;return nr.value==null?(t=$a({version:0},jt()),await t.whenReady(),await ri(t),nr.value=t.documentId):(t=await Nr(nr.value,jt()),await t.whenReady(),await ri(t)),t}async function ri(t){await Qs(t,eg);const e=t.doc();if(!e)throw Wr.from("errors_name_application","errors_message_application");const n=jt();await Qs(await Nr(e.settings,n),H0),await n.flush()}const ng=Er(async()=>(await te(Ja)).doc()),qr={async id(){return(await te(Ja)).documentId},async settings(){return Nr((await te(ng)).settings,jt())}};/**
 * @license lucide-svelte v0.540.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const rg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var sg=Dc("<svg><!><!></svg>");function bg(t,e){const n=Qr(e,["children","$$slots","$$events","$$legacy"]),r=Qr(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Hc(e,!1);let s=st(e,"name",8,void 0),i=st(e,"color",8,"currentColor"),o=st(e,"size",8,24),a=st(e,"strokeWidth",8,2),c=st(e,"absoluteStrokeWidth",8,!1),f=st(e,"iconNode",24,()=>[]);const g=(...h)=>h.filter((y,b,E)=>!!y&&E.indexOf(y)===b).join(" ");zc();var l=sg();is(l,(h,y)=>({...rg,...r,width:o(),height:o(),stroke:i(),"stroke-width":h,class:y}),[()=>(mt(c()),mt(a()),mt(o()),Xr(()=>c()?Number(a())*24/Number(o()):a())),()=>(mt(s()),mt(n),Xr(()=>g("lucide-icon","lucide",s()?`lucide-${s()}`:"",n.class)))]);var u=Rc(l);Zc(u,1,f,Yc,(h,y)=>{var b=Er(()=>$c(te(y),2));let E=()=>te(b)[0],R=()=>te(b)[1];var w=jc(),$=Lc(w);tu($,E,!0,(I,v)=>{is(I,()=>({...R()}))}),Zr(h,w)});var d=Mc(u);eu(d,e,"default",{}),Uc(l),Zr(t,l),Bc()}export{yg as A,ni as B,bg as I,is as a,q0 as b,L0 as c,P0 as d,Zc as e,K0 as f,hg as g,pg as h,uu as i,sr as j,lg as k,_g as l,gg as m,Yc as n,dg as o,fu as p,Y0 as q,fg as r,eu as s,Z0 as t,ht as u,qr as v,au as w,an as x,su as y,B0 as z};
